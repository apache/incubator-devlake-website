"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[89612],{14352:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var n=i(87462),o=(i(67294),i(3905));i(61839);const a={title:"CircleCI",sidebar_position:8,description:"Config UI instruction for CircleCI"},l=void 0,c={unversionedId:"Configuration/CircleCI",id:"version-v1.0/Configuration/CircleCI",title:"CircleCI",description:"Config UI instruction for CircleCI",source:"@site/versioned_docs/version-v1.0/Configuration/CircleCI.md",sourceDirName:"Configuration",slug:"/Configuration/CircleCI",permalink:"/zh/docs/v1.0/Configuration/CircleCI",draft:!1,editUrl:"https://github.com/apache/incubator-devlake-website/edit/main/versioned_docs/version-v1.0/Configuration/CircleCI.md",tags:[],version:"v1.0",sidebarPosition:8,frontMatter:{title:"CircleCI",sidebar_position:8,description:"Config UI instruction for CircleCI"},sidebar:"docsSidebar",previous:{title:"Bitbucket Server/Data Center",permalink:"/zh/docs/v1.0/Configuration/BitBucketServer"},next:{title:"GitHub",permalink:"/zh/docs/v1.0/Configuration/GitHub"}},r={},s=[{value:"Step 1 - Add Data Connections",id:"step-1---add-data-connections",level:2},{value:"Step 1.1 - Authentication",id:"step-11---authentication",level:3},{value:"Connection Name",id:"connection-name",level:4},{value:"Endpoint URL",id:"endpoint-url",level:4},{value:"Token",id:"token",level:4},{value:"Proxy URL (Optional)",id:"proxy-url-optional",level:4},{value:"Fixed Rate Limit (Optional)",id:"fixed-rate-limit-optional",level:4},{value:"Test and Save Connection",id:"test-and-save-connection",level:4},{value:"Step 1.2 - Configure Data Scope",id:"step-12---configure-data-scope",level:3},{value:"Projects",id:"projects",level:4},{value:"Step 1.3 - Adding Scope Config (Optional)",id:"step-13---adding-scope-config-optional",level:3},{value:"Data Entities",id:"data-entities",level:5},{value:"Transformations",id:"transformations",level:5},{value:"Step 2 - Collect Data in a Project",id:"step-2---collect-data-in-a-project",level:2},{value:"Step 2.1 - Create a Project",id:"step-21---create-a-project",level:3},{value:"Step 2.2 - Add a CircleCI Connection",id:"step-22---add-a-circleci-connection",level:3},{value:"Step 2.3 - Set the Sync Policy",id:"step-23---set-the-sync-policy",level:3},{value:"Step 2.4 - Start Data Collection",id:"step-24---start-data-collection",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}],d={toc:s};function p(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Visit Config UI at : ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:4000")," and go to ",(0,o.kt)("inlineCode",{parentName:"p"},"Connections")," page."),(0,o.kt)("h2",{id:"step-1---add-data-connections"},"Step 1 - Add Data Connections"),(0,o.kt)("h3",{id:"step-11---authentication"},"Step 1.1 - Authentication"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:i(65838).Z,width:"1642",height:"1248"})),(0,o.kt)("h4",{id:"connection-name"},"Connection Name"),(0,o.kt)("p",null,"Give your connection a unique name to help you identify it in the future."),(0,o.kt)("h4",{id:"endpoint-url"},"Endpoint URL"),(0,o.kt)("p",null,"For CircleCI, you do not need to enter the REST API endpoint URL, which is always ",(0,o.kt)("inlineCode",{parentName:"p"},"https://circleci.com/api/"),"."),(0,o.kt)("h4",{id:"token"},"Token"),(0,o.kt)("p",null,"Learn about ",(0,o.kt)("a",{parentName:"p",href:"https://circleci.com/docs/managing-api-tokens/"},"Managing API Tokens"),"."),(0,o.kt)("p",null,"Tokens you have generated that can be used to access the CircleCI API. Apps using these tokens can act as you and have full read- and write-permissions!\nThere are two types of API token(Personal and Project) you can create within CircleCI."),(0,o.kt)("h4",{id:"proxy-url-optional"},"Proxy URL (Optional)"),(0,o.kt)("p",null,"If you are behind a corporate firewall or VPN you may need to utilize a proxy server. Enter a valid proxy server address on your network, e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"http://your-proxy-server.com:1080")),(0,o.kt)("h4",{id:"fixed-rate-limit-optional"},"Fixed Rate Limit (Optional)"),(0,o.kt)("p",null,"DevLake uses a dynamic rate limit to collect CircleCI data. You can adjust the rate limit if you want to increase or lower the speed.\nLearn more about ",(0,o.kt)("a",{parentName:"p",href:"https://circleci.com/docs/api-developers-guide/#rate-limits"},"CircleCI API rate limit"),"."),(0,o.kt)("h4",{id:"test-and-save-connection"},"Test and Save Connection"),(0,o.kt)("p",null,"Click ",(0,o.kt)("inlineCode",{parentName:"p"},"Test Connection"),", if the connection is successful, click ",(0,o.kt)("inlineCode",{parentName:"p"},"Save Connection")," to add the connection."),(0,o.kt)("h3",{id:"step-12---configure-data-scope"},"Step 1.2 - Configure Data Scope"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:i(13131).Z,width:"1626",height:"1026"})),(0,o.kt)("h4",{id:"projects"},"Projects"),(0,o.kt)("p",null,"Select the CircleCI projects to collect."),(0,o.kt)("h3",{id:"step-13---adding-scope-config-optional"},"Step 1.3 - Adding Scope Config (Optional)"),(0,o.kt)("p",null,"Scope config includes two sets of configurations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Data Entities"),(0,o.kt)("li",{parentName:"ul"},"Transformations")),(0,o.kt)("h5",{id:"data-entities"},"Data Entities"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:i(55143).Z,width:"1926",height:"892"})),(0,o.kt)("p",null,"CircleCI only supports ",(0,o.kt)("inlineCode",{parentName:"p"},"CI/CD")," domain entities, which include CircleCI ",(0,o.kt)("inlineCode",{parentName:"p"},"projects"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"workflows"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"jobs"),", and etc."),(0,o.kt)("h5",{id:"transformations"},"Transformations"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:i(93898).Z,width:"888",height:"294"})),(0,o.kt)("p",null,"This set of configurations is used for calculating ",(0,o.kt)("a",{parentName:"p",href:"/zh/docs/v1.0/DORA"},"DORA metrics"),". "),(0,o.kt)("p",null,"You can transform a CircleCI workflow run into a DevLake deployment with the following regex:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Deployment: The given regex should match the name of the Circle workflow run or one of its jobs to be considered as a deployment. For example, if the workflow run used for deployment is named 'build-and-push-image', you can input ",(0,o.kt)("inlineCode",{parentName:"li"},"(push-image)"),". To make the regex case insensitive, you can include ",(0,o.kt)("inlineCode",{parentName:"li"},"(?i)")," before the regex."),(0,o.kt)("li",{parentName:"ul"},"Environment: The given regex should match the workflow run's name to be considered a deployment within the production environment. For instance, if the workflow run used for deployment is named 'deploy-to-prod', you can input ",(0,o.kt)("inlineCode",{parentName:"li"},"(prod)"),". To make the regex case insensitive, you can include (?i) before the regex.")),(0,o.kt)("h2",{id:"step-2---collect-data-in-a-project"},"Step 2 - Collect Data in a Project"),(0,o.kt)("h3",{id:"step-21---create-a-project"},"Step 2.1 - Create a Project"),(0,o.kt)("p",null,"Collecting CircleCI data requires creating a project first. You can visit the Project page from the side menu and create a new project by following the instructions on the user interface."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"create-a-project",src:i(38516).Z,width:"1624",height:"684"})),(0,o.kt)("h3",{id:"step-22---add-a-circleci-connection"},"Step 2.2 - Add a CircleCI Connection"),(0,o.kt)("p",null,"You can add a previously configured CircleCI connection to the project and select the boards for which you wish to collect the data for.\nPlease note: if you don't see the repositories you are looking for, please check if you have added them to the connection first."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"add-a-connection",src:i(88749).Z,width:"2394",height:"624"})),(0,o.kt)("h3",{id:"step-23---set-the-sync-policy"},"Step 2.3 - Set the Sync Policy"),(0,o.kt)("p",null,"There are three settings for Sync Policy:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Data Time Range: You can select the time range of the data you wish to collect. The default is set to the past six months."),(0,o.kt)("li",{parentName:"ul"},"Sync Frequency: You can choose how often you would like to sync your data in this step by selecting a sync frequency option or enter a cron code to specify your preferred schedule."),(0,o.kt)("li",{parentName:"ul"},"Skip Failed Tasks: sometime a few tasks may fail in a long pipeline; you can choose to skip them to avoid spending more time in running the pipeline all over again.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"sync-policy",src:i(93195).Z,width:"2428",height:"336"})),(0,o.kt)("h3",{id:"step-24---start-data-collection"},"Step 2.4 - Start Data Collection"),(0,o.kt)("p",null,'Click on "Collect Data" to start collecting data for the whole project. You can check the status in the Status tab on the same page.\n',(0,o.kt)("img",{alt:"collect-data",src:i(5031).Z,width:"2410",height:"664"})),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("p",null,"If you run into any problem, please check the ",(0,o.kt)("a",{parentName:"p",href:"/zh/docs/v1.0/Troubleshooting/Configuration"},"Troubleshooting")," or ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/apache/incubator-devlake/issues"},"create an issue")))}p.isMDXComponent=!0},65838:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/circleci-add-data-connections-bd6cb2687069ef9942cf09723a413534.png"},13131:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/circleci-choose-data-scope-1fd82c60a84e042c5e9781717fb72bc2.png"},88749:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/add-a-connection-project-4032e8e9a72cb4a6df81b6ced714205e.png"},55143:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/circleci-scope-config-1-c2f1900e354459833f0d10d32b561a07.png"},93898:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/circleci-scope-config-2-265d394287123cb84ad26d36064e4c18.png"},5031:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/collect-data-5919e2e6ddad525bca4fbcb46e672aff.png"},38516:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/create-a-project-20e220196044bbf9be564773c45c5990.png"},93195:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/sync-policy-2ac941b2918fc873626375dfe4cbf5f5.png"}}]);