<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://devlake.apache.org/zh/blog</id>
    <title>Apache DevLake (Incubating) Blog</title>
    <updated>2022-07-15T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://devlake.apache.org/zh/blog"/>
    <subtitle>Apache DevLake (Incubating) Blog</subtitle>
    <icon>https://devlake.apache.org/zh/img/logo.svg</icon>
    <entry>
        <title type="html"><![CDATA[æ‹¥æŠ±å¼€æºæŒ‡å—]]></title>
        <id>/2022/07/15/welcome-open-source</id>
        <link href="https://devlake.apache.org/zh/blog/2022/07/15/welcome-open-source"/>
        <updated>2022-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æ‹¥æŠ±å¼€æºæŒ‡å—
]]></summary>
        <content type="html"><![CDATA[<p>è¿‘å¹´æ¥ï¼Œå¼€æºæ­£åœ¨å˜å¾—è¶Šæ¥è¶Šç«ï¼Œåœ¨å¾ˆå¤šå¼€å‘è€…çœ¼ä¸­ï¼Œã€Œå¼€æºã€ä¹Ÿæ˜¯éå¸¸æå®¢çš„ä½“ç°ã€‚åŒæ—¶å‚ä¸å¼€æºé¡¹ç›®ä¹Ÿèƒ½ç»™èŒä¸šå‘å±•å¸¦æ¥å·¨å¤§çš„å¥½å¤„ã€‚å¯ä¸€äº›å°ä¼™ä¼´å´å› ä¸ºä¸çŸ¥é“å‚ä¸çš„æ–¹æ³•å’Œé€”å¾„æ²¡èƒ½å‚ä¸ï¼Œè¿™é‡Œå°±å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹ä½œä¸ºå¼€å‘è€…ï¼Œå¯ä»¥æ€ä¹ˆæ‹¥æŠ±å¼€æºè½¯ä»¶ï¼Œä»¥åŠæ€ä¹ˆæˆä¸ºå¤§å®¶è®¤å¯çš„å¼€æºè´¡çŒ®è€…ã€‚</p><p>å½“ç„¶ï¼Œæœ¬æ–‡ä¼šæ›´å¤šçš„ä»å¤§çš„èƒŒæ™¯çŸ¥è¯†ä¸Šè¿›è¡Œå™è¿°ï¼Œå…³äºä»£ç æäº¤çš„è¯¦ç»†æ­¥éª¤ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/b1mKPgOm1mnwsBbEBDRvK" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/b1mKPgOm1mnwsBbEBDRvK</a> ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯å¼€æºè½¯ä»¶">ä»€ä¹ˆæ˜¯å¼€æºè½¯ä»¶<a class="hash-link" href="#ä»€ä¹ˆæ˜¯å¼€æºè½¯ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¼€æºæ˜¯æºä»£ç å¯ä»¥ä»»æ„è·å–çš„è®¡ç®—æœºè½¯ä»¶ï¼Œä»»ä½•äººéƒ½èƒ½æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ†å‘ä»–ä»¬è®¤ä¸ºåˆé€‚çš„ä»£ç ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å¯ä»¥ä½¿ç”¨æºä»£ç è€Œæ²¡æœ‰ä»»ä½•è‘—ä½œæƒæˆ–å‘è¡Œæƒçš„çº¦æŸï¼Œæˆ‘ä»¬æ¥è§¦åˆ°çš„å¼€æºè½¯ä»¶ä¸€èˆ¬éƒ½æœ‰å¯¹åº”çš„å¼€æºè®¸å¯è¯ï¼ˆOpen Source Licenseï¼‰å¯¹è½¯ä»¶çš„ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹å’Œå†å‘å¸ƒç­‰è¿›è¡Œé™åˆ¶ã€‚è®¸å¯è¯å³æˆæƒæ¡æ¬¾ï¼Œå¼€æºè®¸å¯è¯å°±æ˜¯è¯´æ˜è¿™äº›é™åˆ¶çš„æ–‡ä»¶ï¼Œå¸¸è§çš„å¼€æºè®¸å¯è¯ä¸»è¦æœ‰ Apacheã€MITã€BSDã€GPLã€LGPLã€MPLã€SSPL ç­‰ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ è¡¨æ¥ç®€å•äº†è§£ä¸€ä¸‹å¸¸è§<strong>å®½æ¾</strong>å¼€æºè®¸å¯è¯ä¹‹é—´çš„åŒºåˆ«ï¼š</p><p><img loading="lazy" src="http://www.ruanyifeng.com/blogimg/asset/201105/bg2011050101.png" alt="å¸¸è§å¼€æºè®¸å¯è¯ä¹‹é—´çš„åŒºåˆ«" class="img_ev3q"></p><p>ï¼ˆå›¾ç‰‡æ¥è‡ª: <a href="https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html%EF%BC%89" target="_blank" rel="noopener noreferrer">https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.htmlï¼‰</a></p><p>å…¶ä¸­ï¼ŒApache è®¸å¯è¯ï¼ˆApache Licenseï¼‰æ˜¯ç›®å‰å…¨çƒæœ€å¤§çš„å¼€æºè½¯ä»¶åŸºé‡‘ä¼šä¹‹ä¸€ASF (Apache Software Foundation) å‘å¸ƒçš„Licenseã€‚è¿™æ˜¯ä¸€ä¸ªæœ€åˆä¸º Apache http æœåŠ¡å™¨è€Œæ’°å†™ã€‚æ­¤è®¸å¯è¯æœ€æ–°ç‰ˆæœ¬äº 2004 å¹´ 1 æœˆå‘å¸ƒï¼Œå¹¶è¦æ±‚æ‰€æœ‰ASFçš„é¡¹ç›®å‡é‡‡ç”¨æ­¤é¡¹Licenseã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯»æ‰¾è¿è¡Œè‰¯å¥½çš„å¼€æºé¡¹ç›®">å¯»æ‰¾è¿è¡Œè‰¯å¥½çš„å¼€æºé¡¹ç›®<a class="hash-link" href="#å¯»æ‰¾è¿è¡Œè‰¯å¥½çš„å¼€æºé¡¹ç›®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç›®å‰ï¼Œå¼€æºé¡¹ç›®ä¸»è¦æ˜¯ä¸¤ç±»ï¼Œä¸€ç±»ç”±å›¢é˜Ÿè‡ªè¡Œç»´æŠ¤ï¼Œä¸€ç±»ç”±ç‰¹å®šçš„åŸºé‡‘ä¼šè¿è¡Œã€‚ç°åœ¨å¤§éƒ¨åˆ†é¡¹ç›®å‡æ‰˜ç®¡åœ¨ GitHub ä¸Šï¼Œå› æ­¤åœ¨GitHubä¸Šç›´æ¥æœç´¢ç‚¹èµè¾ƒé«˜è¾ƒæ´»è·ƒçš„é¡¹ç›®ï¼Œå¾€å¾€å°±æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚æ¯”å¦‚æƒ³å‚ä¸æ•°æ®åˆ†æç›¸å…³çš„é¡¹ç›®ï¼Œå¯ä»¥åœ¨GitHubæœç´¢ data analyzesï¼Œæ³¨æ„è§‚å¯Ÿé¡¹ç›®æœ€è¿‘çš„æäº¤æ—¶é—´å’Œissueæ•°é‡ï¼Œæ›´æ–°å¿«è¯´æ˜é¡¹ç›®æˆå‘˜æ´»è·ƒï¼Œæœ‰issueè¯´æ˜æ˜¯ä¸€ä¸ªæ­£åœ¨å¿«é€Ÿå‘å±•çš„é¡¹ç›®ï¼Œæ›´é€‚åˆå‚ä¸ã€‚</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/3294100/177321877-e1b295a9-2e33-499d-98d8-0a789f96c375.png" alt="image" class="img_ev3q"></p><p>ç¬¬äºŒç§å¯»æ‰¾æ–¹å¼ï¼Œç”±å¼€æºåŸºé‡‘ä¼šç»´æŠ¤çš„è¿è¡Œè‰¯å¥½çš„é¡¹ç›®ï¼Œè¿˜å¯ä»¥åœ¨å¯¹åº”çš„å¼€æºåŸºé‡‘ä¼šå®˜ç½‘æ‰¾åˆ°ã€‚</p><p>æ¯”å¦‚LinuxåŸºé‡‘ä¼šçš„é¡¹ç›®åœ°å€ï¼š<a href="https://www.linuxfoundation.org/projects/" target="_blank" rel="noopener noreferrer">https://www.linuxfoundation.org/projects/</a></p><p><img loading="lazy" src="https://user-images.githubusercontent.com/3294100/177315987-75429570-d357-4170-aa81-755cf93690b6.png" alt="LinuxåŸºé‡‘ä¼šçš„é¡¹ç›®åœ°å€" class="img_ev3q"></p><p>æ¯”å¦‚CNCFçš„é¡¹ç›®é¡µï¼š<a href="https://landscape.cncf.io/" target="_blank" rel="noopener noreferrer">https://landscape.cncf.io/</a></p><p><img loading="lazy" src="https://user-images.githubusercontent.com/3294100/177316817-2818565d-ae07-4f1a-9c9d-a3b334276714.png" alt="CNCFçš„é¡¹ç›®é¡µ" class="img_ev3q"></p><p>æ¯”å¦‚ASFçš„é¡¹ç›®é¡µï¼š<a href="https://projects.apache.org/projects.html" target="_blank" rel="noopener noreferrer">https://projects.apache.org/projects.html</a></p><p><img loading="lazy" src="https://user-images.githubusercontent.com/3294100/177317430-35c08429-9d18-44f9-9e4b-b3172527572d.png" alt="ASFçš„é¡¹ç›®é¡µ" class="img_ev3q"></p><p>æœ€åï¼Œè¿˜æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„è¯„ä¼°é¢æ¿ï¼Œä»ä¸€äº›ç‹¬ç‰¹çš„è§†è§’äº†è§£ç°å­˜çš„å¼€æºé¡¹ç›®ã€‚
æ¯”å¦‚ossinsightï¼š<a href="https://ossinsight.io/collections/open-source-database" target="_blank" rel="noopener noreferrer">https://ossinsight.io/collections/open-source-database</a> ï¼Œå¯ä»¥äº†è§£æœ¬æœˆç‚¹èµæœ€å¤šçš„é¡¹ç›®æœ‰äº›ä»€ä¹ˆï¼Œ
<img loading="lazy" src="https://user-images.githubusercontent.com/3294100/179458318-bc6d753c-01da-41e5-b059-ea1a8d888e80.png" alt="ossinsight" class="img_ev3q">
å†æ¯”å¦‚ä» DevLake çš„ <a href="https://grafana-oss.demo.devlake.io/d/KXWvOFQnz/github_basic_metrics?orgId=1&amp;var-repo_id=github:GithubRepo:482676524&amp;from=1642498327554&amp;to=1658136727554" target="_blank" rel="noopener noreferrer">OSS é¡¹ç›®é¢æ¿</a> æ›´åŠ æ·±å…¥çš„äº†è§£é¡¹ç›®ï¼Œè¿™éƒ½æ˜¯äº†è§£å¼€æºé¡¹ç›®è¿è¡ŒçŠ¶å†µçš„æœ‰æ•ˆé€”å¾„ã€‚
<img loading="lazy" src="https://user-images.githubusercontent.com/3294100/179483669-cc954d0c-68ed-4af3-8170-9cf4f0f16abd.png" alt="devlake oss" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="apacheå¼€æºè½¯ä»¶åŸºé‡‘ä¼š">Apacheå¼€æºè½¯ä»¶åŸºé‡‘ä¼š<a class="hash-link" href="#apacheå¼€æºè½¯ä»¶åŸºé‡‘ä¼š" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å› ä¸ºç¬”è€…æ›´äº†è§£ ASF ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯¹å®ƒåšä¸€äº›æ›´è¯¦ç»†çš„ä»‹ç»ã€‚</p><p>Apache å¼€æºåŸºé‡‘ä¼šç›®å‰ç»´æŠ¤ç€380ä½™ä¸ªå¼€æºé¡¹ç›®ï¼Œä½†ä¸€å¹´çš„å¼€é”€ä»…ä¸€ç™¾å¤šä¸‡ç¾å…ƒå·¦å³ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ä½çš„æ•°ï¼ˆè€Œå…¶ä»–åŸºé‡‘ä¼šæ¯”å¦‚LinuxåŸºé‡‘ä¼šï¼Œæ¯å¹´å¼€é”€åœ¨ä¸Šäº¿ç¾å…ƒï¼‰ï¼Œå¹³å‡æ¯ä¸ªé¡¹ç›®ä»…2000ä½™ç¾å…ƒï¼Œè¿™å°±å†³å®šäº†Apacheçš„å¼€æºé¡¹ç›®æ›´ä¾èµ–ç¤¾åŒºå’Œå¼€æºè´¡çŒ®è€…ï¼Œåœ¨Apacheç¤¾åŒºä¸­ï¼Œã€ŒCommunity over Codeã€å³ç¤¾åŒºå…ˆäºç¼–ç ä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚Apache åŸºé‡‘ä¼šæ¯å¹´çš„æ”¯å‡ºå…¶ä¸­80%ç”¨åœ¨<strong>åŸºç¡€è®¾æ–½</strong>ï¼Œå…¶ä½™ä¼šç”¨åœ¨<strong>è¥é”€ã€å®£ä¼ å’Œå“ç‰Œç®¡ç†æœåŠ¡ï¼Œç ”è®¨ä¼šå’Œå‘å±•ç¤¾åŒºï¼Œæ³•å¾‹å’¨è¯¢ç­‰æ–¹é¢</strong>ï¼Œè€Œå…¶ä»–è¯¸å¦‚æ—¥å¸¸ç»´æŠ¤ã€ç¼–ç ç­‰å·¥ä½œå‡ç”±å„ä¸ªé¡¹ç›®çš„æˆå‘˜ç»´æŠ¤ã€‚</p><p>Apacheå¼€æºé¡¹ç›®ä¸­ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ä¸ªåŸºæœ¬çš„è§’è‰²ï¼š</p><ul><li><p>Contributor
æ™®é€šè´¡çŒ®è€…ï¼Œè¿™ç§å°±æ˜¯å¾ˆå®¹æ˜“è·å¾—ï¼Œåªéœ€è¦æäº¤ä¸€ä¸ªPRå¹¶è¢«å®˜æ–¹åˆå¹¶åˆ°ä¸»åˆ†æ”¯å³å¯è·å¾—ï¼Œä¾‹å¦‚æäº¤ä¸€ä¸ªæ–‡æ¡£ï¼Œä¿®æ”¹å‡ è¡Œä»£ç å°±è¡Œã€‚</p></li><li><p>Committer
æ ¸å¿ƒå¼€å‘ï¼Œå¯¹è´¡çŒ®ç‰¹åˆ«å¤§çš„ Contributorï¼Œå®˜æ–¹ç¤¾åŒºä¼šè€ƒè™‘å°†å…¶å¸æ”¶ï¼Œæå‡åˆ°commiterï¼Œæˆä¸ºæ ¸å¿ƒå¼€å‘ï¼Œæ­¤æ—¶å°±æœ‰é¡¹ç›®çš„å†™å…¥æƒé™ï¼Œ<strong>å¹¶å¯ä»¥ç”³è¯·@apache.comç»“å°¾çš„é‚®ç®±</strong>ã€‚</p></li><li><p>PMC
å¼€æºé¡¹ç›®å†³ç­–æˆå‘˜ã€‚</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚ä¸é¡¹ç›®è®¨è®º">å‚ä¸é¡¹ç›®è®¨è®º<a class="hash-link" href="#å‚ä¸é¡¹ç›®è®¨è®º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸€æ—¦é€‰æ‹©å¥½ä¸€ä¸ªå¼€æºé¡¹ç›®åï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•æ‰¾åˆ°ç»„ç»‡å‘¢ï¼Ÿ</p><p>é¦–å…ˆæ˜¯é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå…¨é¢äº†è§£è¯¥é¡¹ç›®çš„æ¶æ„è®¾è®¡æ–‡æ¡£å’Œè§£å†³çš„é—®é¢˜ï¼Œä¹‹åå¯ä»¥å°è¯•å‚ä¸é¡¹ç›®æ—¥å¸¸çš„è®¨è®ºã€‚å°½ç®¡åœ¨å¾®ä¿¡ç¾¤ä¸­æé—®å¾ˆæ–¹ä¾¿ï¼Œä½† Apache é¡¹ç›®çš„å¤§éƒ¨åˆ†è®¨è®ºéœ€è¦å…¬å¼€åœ°åœ¨é‚®ä»¶åˆ—è¡¨ä¸­è¿›è¡Œï¼Œæ–¹ä¾¿æ‰€æœ‰äººæŸ¥çœ‹åŠæŸ¥è¯¢ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦äº†è§£å¦‚ä½•å‚ä¸ Apache çš„é‚®ä»¶è®¨è®ºã€‚</p><p>Apacheä¸‹é¢çš„æ¯ä¸€ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„é‚®ä»¶åˆ—è¡¨ï¼ŒåŒæ—¶åˆ†ä¸åŒçš„é‚®ä»¶ç»„ï¼Œä»¥Apache DevLakeä¸ºä¾‹ï¼Œæœ‰å¦‚ä¸‹è®¢é˜…åˆ—è¡¨ï¼š</p><table><thead><tr><th align="left">é‚®ç®±</th><th align="left">ç”¨é€”</th></tr></thead><tbody><tr><td align="left"><a href="mailto:user-subscribe@devlake.apache.org" target="_blank" rel="noopener noreferrer">user-subscribe@devlake.apache.org</a></td><td align="left">è®¢é˜…è¯¥é‚®ä»¶å¯ä»¥å‚ä¸è®¨è®ºæ™®é€šç”¨æˆ·é‡åˆ°çš„é—®é¢˜</td></tr><tr><td align="left"><a href="mailto:dev-subscribe@devlake.apache.org" target="_blank" rel="noopener noreferrer">dev-subscribe@devlake.apache.org</a></td><td align="left">è®¢é˜…è¯¥é‚®ä»¶å¯ä»¥å‚ä¸è®¨è®º<strong>å¼€å‘è€…</strong>é‡åˆ°çš„é—®é¢˜</td></tr><tr><td align="left"><a href="mailto:commits-subscribe@devlake.apache.org" target="_blank" rel="noopener noreferrer">commits-subscribe@devlake.apache.org</a></td><td align="left">æ‰€æœ‰çš„ä»£ç çš„æäº¤å˜åŠ¨ä¿¡æ¯éƒ½ä¼šå‘åˆ°è¯¥é‚®ä»¶</td></tr></tbody></table><p>å…·ä½“æ“ä½œæ˜¯é¦–å…ˆç»™<a href="mailto:dev-subscribe@devlake.apache.org" target="_blank" rel="noopener noreferrer">dev-subscribe@devlake.apache.org</a>å‘ä¸€å°é‚®ä»¶ï¼Œç­‰æ”¶åˆ°ç¡®è®¤é‚®ä»¶åå†æ¬¡ç¡®è®¤å³å¯ã€‚</p><p>æ·»åŠ åå°±å¯ä»¥æ”¶åˆ°æ‰€æœ‰å¼€å‘è®¨è®ºçš„ä¿¡æ¯äº†ï¼Œå¦å¤–ä¹Ÿå¯ä»¥å…³æ³¨å®˜ç½‘çš„ maillist(<a href="https://lists.apache.org/list.html?dev@devlake.apache.org" target="_blank" rel="noopener noreferrer">https://lists.apache.org/list.html?dev@devlake.apache.org</a>) æŸ¥çœ‹å…¨éƒ¨å†å²é‚®ä»¶ã€‚</p><p>å¦å¤–ï¼Œå¤§éƒ¨åˆ†é¡¹ç›®ä¼šæœ‰ä¸€äº›çº¿ä¸Šçš„èšä¼šï¼Œå¾€å¾€å¯ä»¥åœ¨Readmeé¡µé¢æ‰¾åˆ°ï¼Œå‚ä¸çº¿ä¸Šèšä¼šå¯ä»¥æ›´ç›´æ¥çš„è·å–æ‰€éœ€çš„ä¿¡æ¯ï¼Œä¹Ÿèƒ½æœ‰æœºä¼šå’Œé¡¹ç›®PMCç›´æ¥äº¤æµã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å¼€æºé¡¹ç›®åé¦ˆé—®é¢˜">å‘å¼€æºé¡¹ç›®åé¦ˆé—®é¢˜<a class="hash-link" href="#å‘å¼€æºé¡¹ç›®åé¦ˆé—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœåœ¨é¡¹ç›®çš„ä½¿ç”¨ä¸­ï¼Œé‡åˆ°äº† bugï¼Œæˆ–è€…å¸Œæœ›æ’¸èµ·è¢–å­ä¿®æ”¹æŸä¸ªåŠŸèƒ½ç‚¹ï¼Œä½†è¿™ä¸ªåŠŸèƒ½ç‚¹éœ€è¦è¿›ä¸€æ­¥è®¨è®ºã€‚å¯ä»¥åœ¨å‰é¢çš„é‚®ä»¶ä¸­å‘èµ·è®¨è®ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ GitHub çš„ issue ä¸­åšä¸€ä¸ªè¾ƒæ­£å¼çš„è®°å½•ã€‚</p><p>ä¸€èˆ¬çš„é¡¹ç›®éƒ½ä¼šé’ˆå¯¹ä¸åŒçš„ç›®çš„ï¼Œæä¾›ä¸€äº› issue åˆ›å»ºçš„æ¨¡æ¿ã€‚</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/3294100/178148411-fc570ab5-91e8-4c13-984a-99dc19604d35.png" alt="create issue" class="img_ev3q"></p><p>å¸¸è§çš„ç±»å‹æœ‰ï¼š</p><ul><li>Bug æå‡ºä¸€ä¸ªåŠŸèƒ½å®ç°çš„é”™è¯¯</li><li>Document Issue æå‡ºä¸€é¡¹æ–‡æ¡£æ”¹è¿›çš„å»ºè®®</li><li>Feature Request è¯·æ±‚å¢åŠ æˆ–è¡¨ç¤ºä½ å°†å¢åŠ ä¸€ä¸ªäº§å“ç‰¹æ€§</li><li>Refactor å‘èµ·ä¸€é¡¹ä¸å½±å“åŠŸèƒ½çš„é‡æ„</li><li>Security Vulnerability æŠ¥å‘Šä¸€ä¸ªå®‰å…¨é—®é¢˜ï¼Œåœ¨é—®é¢˜ä¿®å¤ä»¥å‰ï¼Œè¯¥é—®é¢˜ä¸ä¼šå…¬å¸ƒã€‚</li></ul><p>æå‡ºä¸€ä¸ªæ¸…æ™°æ˜äº†çš„ issue å¾€å¾€ä¼šè®©ç¤¾åŒºçš„å…¶ä»–æˆå‘˜æ›´æ„¿æ„å“åº”ä½ çš„å·å¬ï¼Œç›¸ä¿¡æˆ‘ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªéå¸¸äº«å—çš„è¿‡ç¨‹~</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æˆä¸ºé¡¹ç›®çš„è´¡çŒ®è€…">æˆä¸ºé¡¹ç›®çš„è´¡çŒ®è€…<a class="hash-link" href="#æˆä¸ºé¡¹ç›®çš„è´¡çŒ®è€…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨å‚ä¸è®¨è®ºçš„åŸºç¡€ä¸Šï¼Œåªè¦èƒ½åœ¨ GitHub ç¤¾åŒºä¸­å¸®åŠ©éªŒè¯ä¸€äº›å‘å¸ƒçš„æ–°åŠŸèƒ½æˆ–è€…æä¸€äº›å»ºè®®æˆ–è€…ç¼ºé™·ï¼Œæˆ–è€…ä¿®æ”¹æºç ï¼Œå°±èƒ½æˆä¸ºè¯¥é¡¹ç›®çš„è´¡çŒ®è€…(Contributor)ã€‚</p><p>åˆšå‚ä¸é¡¹ç›®æ—¶ï¼Œå¯ä»¥è€ƒè™‘ç¼–å†™æ–‡æ¡£ï¼Œæˆ–å®Œå–„ä¸€äº›æ¨¡å—çš„å•å…ƒæµ‹è¯•ï¼Œæˆ–è€…è¿›è¡Œä¸€äº›ç®€å•ç¼–ç å·¥ä½œã€‚æ¯”å¦‚å¯ä»¥åœ¨ GitHub Issues åˆ—è¡¨ä¸­å¯»æ‰¾å¸¦æœ‰<code>good first issue</code>æ ‡è®°ä¸”æš‚æœªè¢«è®¤é¢†çš„äº‹æƒ…ï¼Œè¿™å¾€å¾€æ˜¯ç¤¾åŒºç»´æŠ¤è€…ä¸ºäº†å¼•å¯¼è´¡çŒ®è€…ä¸“é—¨åˆ›å»ºçš„issueï¼Œå¾ˆé€‚åˆä½œä¸ºç¬¬ä¸€ä¸ªæäº¤ã€‚å®Œæˆç¬¬ä¸€ä¸ªæäº¤åï¼Œå¯ä»¥å†å»çœ‹çœ‹å…¶ä»–opençš„issueå¹¶è§£å†³ã€‚</p><p>ç›®å‰å¼€æºé¡¹ç›®ä¸€èˆ¬é‡‡ç”¨ Git æ¥ç®¡ç†æºä»£ç ï¼Œå¦‚æœä½ ä»æœªä½¿ç”¨è¿‡ä»£ç ç®¡ç†å·¥å…·çš„è¯ï¼Œå¯ä»¥ç°åœ¨ç½‘ä¸Šå¯»æ‰¾æ•™ç¨‹äº†è§£ï¼Œæ¯”å¦‚ï¼š<a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener noreferrer">https://www.liaoxuefeng.com/wiki/896043488029600</a> ã€‚ä¸€èˆ¬çš„æäº¤æµç¨‹æ˜¯ï¼šå…ˆ fork å¯¹åº”çš„é¡¹ç›®ï¼Œåœ¨ fork é¡¹ç›®æäº¤ä»£ç åï¼Œå‘å¼€æºé¡¹ç›®å‘èµ·ä»£ç åˆå¹¶è¯·æ±‚ç­‰å¾…åˆå¹¶ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»»ä½•ä»£ç æäº¤åï¼Œéƒ½ä¸ä¼šç«‹åˆ»åˆå¹¶ï¼Œéœ€è¦å¯»æ‰¾ç¤¾åŒºç»´æŠ¤è€… Review åæ‰ä¼šè¿›å…¥ä¸»å¹²ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–å†™å¥½ä»£ç çš„æ³¨æ„äº‹é¡¹">ç¼–å†™å¥½ä»£ç çš„æ³¨æ„äº‹é¡¹<a class="hash-link" href="#ç¼–å†™å¥½ä»£ç çš„æ³¨æ„äº‹é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" src="http://p0.itc.cn/images01/20200714/7a66a58fb11448198086e1976887bfe3.png" alt="img" class="img_ev3q"></p><p>ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰</p><p>ä»£ç ä¸æ˜¯å†™å®Œå°±å¥½ï¼Œè¿˜éœ€è¦å…¶ä»–äººé˜…è¯»çš„ã€‚å› æ­¤ï¼Œå†™å‡ºèµå¿ƒæ‚¦ç›®çš„ä»£ç å¾ˆå€¼å¾—ç‚¹èµï¼Œå½“ç„¶ï¼Œæ°´å¹³çš„æå‡æ€»æ˜¯æœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œå› æ­¤ä»»ä½•å¼€æºé¡¹ç›®éƒ½æ˜¯é¼“åŠ±å°è¯•ä¸æå‡çš„è¿‡ç¨‹ã€‚è¿™é‡Œå°±åªè¯´å‡ ç‚¹æ›´å®¹æ˜“å¾—åˆ°ç¤¾åŒºæˆå‘˜å¸®åŠ©çš„æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å†™å®Œä»£ç æäº¤ PR åï¼Œæ³¨æ„åœ¨ PR æè¿°ä¸­è¡¥å……å®Œå–„çš„ç¼–ç æ€è·¯å’ŒèƒŒæ™¯çŸ¥è¯†ï¼Œè¿™ä¼šè®©å…¶ä»–æˆå‘˜æ›´å®¹æ˜“äº†è§£ä¿®æ”¹ç›®æ ‡ï¼›</li><li>æ³¨æ„æ§åˆ¶ PR çš„å¤§å°ï¼Œä¸€ä¸ªå°çš„ PR æ›´å®¹æ˜“è®©å…¶ä»–äººäº†è§£å…¨éƒ¨ä¿®æ”¹é¡¹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç…§æ¨¡å—æ‹†æˆå‡ ä¸ªèƒ½åˆ†åˆ«è¿è¡Œçš„ PRï¼›</li><li>æ³¨æ„è¡¥å……é€‚å½“çš„å•å…ƒæµ‹è¯•ï¼Œå› ä¸º Reviewer å¹¶ä¸è´Ÿè´£ç¡®å®šä»£ç èƒ½è·‘ï¼Œåªè´Ÿè´£çœ‹ä»£ç è®¾è®¡æ€è·¯æ˜¯å¦æ­£ç¡®ã€‚å› æ­¤å¢åŠ åˆé€‚çš„æµ‹è¯•ï¼Œèƒ½è®© Reviewer ç¡®å®šè¿™æ®µä»£ç æ˜¯å¯ä»¥è¿è¡Œçš„ã€‚æœ‰æ—¶ Reviewer ä¹Ÿä¼šé’ˆå¯¹å®¹æ˜“å‡ºé”™çš„åœ°æ–¹æå‡ºè¡¥å……æµ‹è¯•çš„å»ºè®®ã€‚</li></ol><p><img loading="lazy" src="http://p2.itc.cn/images01/20200714/29be57703b6c408588a9efec2e5fcb76.png" alt="img" class="img_ev3q"></p><p>ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œè¶…å¤§çš„æäº¤ä¼šè®© Reviewer æ¬²ä»™æ¬²æ­»çš„ ğŸ˜¹ï¼‰</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-review-å¸¸è§æœ¯è¯­">Code Review å¸¸è§æœ¯è¯­<a class="hash-link" href="#code-review-å¸¸è§æœ¯è¯­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨æäº¤ä»£ç ä¸Code Reviewçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä¼šé‡åˆ°ä¸‹é¢è¿™äº›ç¼©å†™ï¼Œäº†è§£åå‚ä¸å¼€æºç¤¾åŒºæ›´è½»æ¾ã€‚</p><table><thead><tr><th>ç¼©å†™</th><th>å…¨ç§°</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>-</td><td>I'll take it.</td><td>è¡¨ç¤ºä¼šå°è¯•åšè¿™ä¸ªä»»åŠ¡</td></tr><tr><td>PR/MR/CR</td><td>Pull/Merge/Change Request</td><td>å¦‚æœè¦æäº¤ä»£ç ç»™å¼€æºé¡¹ç›®ï¼Œå°±ä¼šå‘èµ·ä¸€ä¸ªåˆå¹¶è¯·æ±‚ï¼Œåœ¨ä¸åŒå¹³å°æœ‰ä¸åŒçš„åå­—ï¼Œä½†éƒ½æ˜¯åŒä¸€ä¸ªä¸œè¥¿</td></tr><tr><td>WIP</td><td>Work In Progress</td><td>è¡¨ç¤ºPRå°šæœªå®Œæˆï¼Œæš‚æ—¶è¿˜ä¸éœ€è¦review</td></tr><tr><td>PTAL</td><td>Please Take A Look</td><td>è¯·æ±‚é¡¹ç›®ç»´æŠ¤äººå‘˜è¿›è¡Œ code review</td></tr><tr><td>TBD</td><td>To Be Done</td><td>æç¤ºæœ‰ä¸€ä¸ªäº‹æƒ…éœ€è¦å®Œæˆ</td></tr><tr><td>TL;DR</td><td>Too Long; Didn't Read</td><td>å¤ªé•¿äº†ï¼Œæ‡’å¾—çœ‹ã€‚ä¹Ÿæœ‰æ—¶åœ¨æ–‡æ¡£ä¸­ç”¨ä½œæ¦‚è§ˆä¿¡æ¯çš„æ ‡é¢˜</td></tr><tr><td>LGTM/SGTM</td><td>Looks/Sounds Good To Me</td><td>è¡¨ç¤ºreviewå®Œå¹¶è§‰å¾—å¯ä»¥åˆå¹¶äº†ï¼Œå³Approveçš„æ„æ€</td></tr><tr><td>CC to</td><td>Carbon Copy to</td><td>æŠ„é€ç»™</td></tr></tbody></table><p>é¡ºä¾¿å†è¯´å‡ ä¸ª GitHub ä¸­å®ç”¨çš„å°æŠ€å·§ï¼š</p><ol><li>å¦‚æœä½ çš„ PR è§£å†³äº†æŸä¸ª issueï¼Œå¯ä»¥åœ¨æè¿°ä¸­åŠ ä¸Š close #1234ï¼Œ1234éœ€è¦æ”¹æˆå¯¹åº”çš„issueå·ï¼Œåœ¨ PR åˆå¹¶æ—¶è¯¥issueä¹Ÿä¼šåŒæ—¶å…³é—­ï¼ˆ<a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword#linking-a-pull-request-to-an-issue-using-a-keyword" target="_blank" rel="noopener noreferrer">æ›´å¤šä¿¡æ¯</a>ï¼‰
<img loading="lazy" src="https://user-images.githubusercontent.com/3294100/178149926-f4f647e4-3765-47be-8b3a-9b19381294dd.png" alt="image-20220710215354120" class="img_ev3q"></li><li>GitHub çš„ Markdown ç¼–è¾‘å™¨å¯ä»¥å°†é»˜è®¤å­—ä½“è®¾ç½®ä¸ºç­‰å®½å­—ä½“ï¼Œä¾¿äºä»£ç çš„ä¹¦å†™ï¼Œå…·ä½“è®¾ç½®ä¸ºï¼š <strong>Settings</strong> -  <strong>Appearance</strong> - <strong>Use a fixed-width (monospace) font when editing Markdown</strong>. ï¼ˆ<a href="https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/about-writing-and-formatting-on-github" target="_blank" rel="noopener noreferrer">æ›´å¤šä¿¡æ¯</a>ï¼‰
<img loading="lazy" src="https://docs.github.com/assets/cb-14573/images/help/writing/enable-fixed-width.png" alt="Screenshot showing the GitHub comment field with fixed width fonts enabled" class="img_ev3q"></li><li>å½“å‘ç°ä¸€ä¸ª issue å’Œå…¶ä»– issue é‡å¤æ—¶ï¼Œå¯ä»¥è®¾ç½®åœ¨è¯„è®ºåŒºç•™ä¸‹ Duplicate of #1234 æ¥æ ‡è®°ä¸æŸä¸ªissueé‡å¤ï¼ˆ<a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/marking-issues-or-pull-requests-as-a-duplicate" target="_blank" rel="noopener noreferrer">æ›´å¤šä¿¡æ¯</a>ï¼‰
<img loading="lazy" src="https://docs.github.com/assets/cb-29676/images/help/issues/duplicate-issue-syntax.png" alt="Duplicate issue syntax" class="img_ev3q"></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è¯­">ç»“è¯­<a class="hash-link" href="#ç»“è¯­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¥½å•¦ï¼Œå¤§ä½“çš„æƒ…å†µåº”è¯¥ä»‹ç»çš„å·®ä¸å¤šäº†ï¼Œå…¶å®å‚ä¸å¼€æºé¡¹ç›®å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„éš¾ï¼Œæˆä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®çš„Commiterï¼Œç»™èŒåœºå’ŒæŠ€æœ¯å®åŠ›å¸¦æ¥çš„åŠ©åŠ›å°†ä¸å¯ä¼°é‡ã€‚å¦å¤–ï¼Œå¦‚æœä½ è¿˜æ˜¯è¾ƒä¸ºåˆçº§çš„å¼€å‘è€…ï¼Œè¿«åˆ‡çš„æƒ³è¦çŸ¥é“å…·ä½“çš„å‚ä¸æ­¥éª¤ï¼Œå¯ä»¥çœ‹çœ‹å¼€å¤´æåˆ°çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/b1mKPgOm1mnwsBbEBDRvKw" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/b1mKPgOm1mnwsBbEBDRvKw</a> ã€‚</p><p>æˆ‘ä»¬çš„ DevLake (<a href="https://github.com/apache/incubator-devlake" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake</a>)  å’Œ DevStream (<a href="https://github.com/devstream-io/devstream" target="_blank" rel="noopener noreferrer">https://github.com/devstream-io/devstream</a>) ä¹Ÿæ˜¯ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œæ¬¢è¿ä½ çš„å‚ä¸å“¦~</p>]]></content>
        <author>
            <name>Likyh</name>
            <uri>https://github.com/likyh</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Compatibility of Apache DevLake with PostgreSQL]]></title>
        <id>compatibility-of-apache-devLake-with-postgreSQL</id>
        <link href="https://devlake.apache.org/zh/blog/compatibility-of-apache-devLake-with-postgreSQL"/>
        <updated>2022-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Apache DevLake is a dev data platform that can collect and integrate data from different dev tools including Jira, Github, Gitlab and Jenkins.]]></summary>
        <content type="html"><![CDATA[<p>Apache DevLake is a dev data platform that can collect and integrate data from different dev tools including Jira, Github, Gitlab and Jenkins.</p><p>This blog will not aim at a comprehensive summary of the compatibility of database but a record of issues for future reference.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1different--data-types">1.Different  Data Types<a class="hash-link" href="#1different--data-types" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql-does-not-have-a-uint-type">PostgreSQL does not have a uint type<a class="hash-link" href="#postgresql-does-not-have-a-uint-type" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type JenkinsBuild struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> common.NoPKModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> JobName           string  `gorm:"primaryKey;type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Duration          float64 // build time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> DisplayName       string  // "#7"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> EstimatedDuration float64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Number            int64 `gorm:"primaryKey;type:INT(10) UNSIGNED NOT NULL"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Result            string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Timestamp         int64     // start time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> StartTime         time.Time // convered by timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CommitSha         string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In <code>JenkinsBuild.Number</code>, the<code>gorm</code>struct tag used <code>UNSIGNED</code>, which will lead to the failure to create table and should be removed.</p><p><img loading="lazy" src="https://i.imgur.com/N7E9Vwd.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-does-not-have-a-bool-data-type">MySQL does not have a bool data type<a class="hash-link" href="#mysql-does-not-have-a-bool-data-type" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>For a field defined as bool type in model, gorm will map it to MySQL's TINYINT data type, which can be queried directly with 0 or 1 in SQL, but PostgreSQL has a bool type, so gorm will map it to the BOOL type. If 0 or 1 is still used in SQL to query, there will be a report of error.</p><p>Here is an example(only relevant fields are shown in the example). The lookup statement works in MySQL, but will lead to an error in PostgreSQL.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type GitlabMergeRequestNote struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> MergeRequestId  int    `gorm:"index"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> System          bool </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db.Where("merge_request_id = ? AND `system` = 0", gitlabMr.GitlabId).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After changing the sentence as it follows, an error will still be reported. The reason will be shown in the part about backticks.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.Where("merge_request_id = ? AND `system` = ?", gitlabMr.GitlabId, false)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2different-behaviors">2.Different Behaviors<a class="hash-link" href="#2different-behaviors" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bulk-insertion">Bulk insertion<a class="hash-link" href="#bulk-insertion" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>When <code>ON CONFLIT UPDATE ALL</code> was used to achieve bulk insertion, and if there are multiple records with the same primary key, it will report errors in PostgreSQL but not in MySQL.
<img loading="lazy" src="https://i.imgur.com/zaExAUG.png" class="img_ev3q"></p><p><img loading="lazy" src="https://i.imgur.com/BpZY8dN.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inconsistent-definition-of-model-with-schema">Inconsistent definition of model with schema<a class="hash-link" href="#inconsistent-definition-of-model-with-schema" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>For example, in the model definition, <code>GithubPullRequest.AuthorId</code> is of the int type, but this field in the database is of VARCHAR type. When inserting data, MySQL will accept it, but ProstgresSQL will report an error.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type GithubPullRequest struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> GithubId        int    `gorm:"primaryKey"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> RepoId          int    `gorm:"index"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Number          int    `gorm:"index"` </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> State           string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Title           string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> GithubCreatedAt time.Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> GithubUpdatedAt time.Time `gorm:"index"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ClosedAt        *time.Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // In order to get the following fields, we need to collect PRs individually from GitHub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Additions      int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Deletions      int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Comments       int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Commits        int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ReviewComments int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Merged         bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> MergedAt       *time.Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Body           string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Type           string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Component      string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> MergeCommitSha string `gorm:"type:varchar(40)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> HeadRef        string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> BaseRef        string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> BaseCommitSha  string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> HeadCommitSha  string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Url            string `gorm:"type:varchar(255)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> AuthorName     string `gorm:"type:varchar(100)"`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> AuthorId       int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> common.NoPKModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://i.imgur.com/onxGG8d.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3mysql-specific-functions">3.MySQL-Specific Functions<a class="hash-link" href="#3mysql-specific-functions" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>We used the <code>GROUP_CONCAT</code>function in a complex query. Although there are similar functions in PostgreSQL, the function names are different and the usage is slightly different.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cursor2, err := db.Table("pull_requests pr1").</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Joins("left join pull_requests pr2 on pr1.parent_pr_id = pr2.id").Group("pr1.parent_pr_id, pr2.created_date").Where("pr1.parent_pr_id != ''").</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Joins("left join repos on pr2.base_repo_id = repos.id").</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Order("pr2.created_date ASC").</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Select(`pr2.key as parent_pr_key, pr1.parent_pr_id as parent_pr_id, GROUP_CONCAT(pr1.base_ref order by pr1.base_ref ASC) as cherrypick_base_branches, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   GROUP_CONCAT(pr1.key order by pr1.base_ref ASC) as cherrypick_pr_keys, repos.name as repo_name, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   concat(repos.url, '/pull/', pr2.key) as parent_pr_url`).Rows()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Solution:
We finally decided to use two steps to achieve the <code>GROUP_CONCAT</code> function. First we used the simplest SQL query to get multiple pieces of the sorted data, and then used the code to group them.</p><p>After modification:</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    cursor2, err := db.Raw(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   SELECT pr2.pull_request_key                 AS parent_pr_key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          pr1.parent_pr_id                     AS parent_pr_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          pr1.base_ref                         AS cherrypick_base_branch,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          pr1.pull_request_key                 AS cherrypick_pr_key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          repos.NAME                           AS repo_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Concat(repos.url, '/pull/', pr2.pull_request_key) AS parent_pr_url,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pr2.created_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   FROM   pull_requests pr1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          LEFT JOIN pull_requests pr2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ON pr1.parent_pr_id = pr2.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          LEFT JOIN repos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 ON pr2.base_repo_id = repos.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   WHERE  pr1.parent_pr_id != ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ORDER  BY pr1.parent_pr_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             pr2.created_date,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       pr1.base_ref ASC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   `).Rows()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4different-grammar">4.Different Grammar<a class="hash-link" href="#4different-grammar" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backticks">Backticks<a class="hash-link" href="#backticks" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>We used backticks in some SQL statements to protect field names from conflicting with MySQL reserved words, which can lead to errors in PostgreSQL. To solve this problem we revisited our code, modified all field names that conflict with reserved words, and removed the backticks in the SQL statement. In the example just mentioned:</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.Where("merge_request_id = ? AND `system` = ?", gitlabMr.GitlabId, false)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Solution:
We changed <code>system</code> to <code>is_system</code> to avoid the usage of backticks.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db.Where("merge_request_id = ? AND is_system = ?", gitlabMr.GitlabId, false)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-standard-delete-statement">Non-standard delete statement<a class="hash-link" href="#non-standard-delete-statement" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>There were delete statements as followed in our code, which are legal in MySQL but will report an error in PostgreSQL.</p><div class="language-sql= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">err := db.Exec(`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> DELETE ic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> FROM jira_issue_commits ic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> LEFT JOIN jira_board_issues bi ON (bi.source_id = ic.source_id AND bi.issue_id = ic.issue_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> WHERE ic.source_id = ? AND bi.board_id = ?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> `, sourceId, boardId).Error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>é™ˆèˆ¸ç¦¹</name>
            <uri>https://github.com/fredtheflat</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="database" term="database"/>
        <category label="postgresql" term="postgresql"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[refdiffæ’ä»¶çš„è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚ç®—æ³•]]></title>
        <id>refdiff-calculate-commits-diff</id>
        <link href="https://devlake.apache.org/zh/blog/refdiff-calculate-commits-diff"/>
        <updated>2022-06-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æœ¬æ–‡ä½œè€…ï¼šNddtfjiang]]></summary>
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä½œè€…ï¼šNddtfjiang
ä¸ªäººä¸»é¡µï¼š<a href="https://nddtf.com/github" target="_blank" rel="noopener noreferrer">https://nddtf.com/github</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯-è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚calculatecommitsdiff">ä»€ä¹ˆæ˜¯ <code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>ï¼ˆCalculateCommitsDiffï¼‰ï¼Ÿ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚calculatecommitsdiff" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬å¸¸å¸¸éœ€è¦è®¡ç®—ä¸¤ä¸ª<code>æäº¤ç‰ˆæœ¬</code>ä¹‹é—´çš„å·®å¼‚ã€‚å…·ä½“çš„è¯´ï¼Œå°±æ˜¯éœ€è¦çŸ¥é“ä¸¤ä¸ªä¸åŒçš„<code>åˆ†æ”¯/æ ‡ç­¾</code>ä¹‹é—´ç›¸å·®äº†å“ªäº›<code>æäº¤ç‰ˆæœ¬</code>ã€‚</p><p>å¯¹äºä¸€èˆ¬ç”¨æˆ·æ¥è¯´ï¼Œé€šè¿‡<code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>ï¼Œç”¨æˆ·èƒ½è¿…é€Ÿçš„åˆ¤æ–­ä¸¤ä¸ªä¸åŒçš„<code>åˆ†æ”¯/æ ‡ç­¾</code>ä¹‹é—´åœ¨åŠŸèƒ½ã€BUG ä¿®å¤ç­‰ç­‰æ–¹é¢çš„åŒºåˆ«ã€‚ä»¥å¸®åŠ©ç”¨æˆ·é€‰æ‹©ä¸åŒçš„<code>åˆ†æ”¯/æ ‡ç­¾</code>æ¥ä½¿ç”¨ã€‚</p><p>è€Œå¦‚æœåªæ˜¯ä½¿ç”¨ <code>diff</code> å‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸¤ä¸ªä¸åŒçš„<code>åˆ†æ”¯/æ ‡ç­¾</code>çš„è¯ï¼Œå¤§é‡åºæ‚å†—ä½™çš„ä»£ç ä¿®æ”¹ä¿¡æ¯å°±ä¼šæ¯«æ— ç»„ç»‡çš„æ··æ‚åœ¨å…¶ä¸­ï¼Œè¦ä»ä¸­æå–å‡ºå…·ä½“çš„åŠŸèƒ½å˜æ›´ä¹‹ç±»çš„ä¿¡æ¯ï¼Œç­‰åŒäºå¤§æµ·æé’ˆã€‚</p><p>å¯¹äºä¸€æ¬¾è‡´åŠ›äºæå‡ç ”å‘æ•ˆèƒ½çš„äº§å“æ¥è¯´ï¼Œé€šè¿‡<code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>ï¼Œå°±èƒ½æŸ¥çœ‹ä¸€ç»„ç»„ä¸åŒçš„<code>åˆ†æ”¯/æ ‡ç­¾</code>çš„å˜è¿çŠ¶å†µï¼Œè¿™ä¸€æ•°æ®çš„è·å–ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åšè¿›ä¸€æ­¥çš„æ•ˆèƒ½åˆ†æã€‚</p><p>ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªé¡¹ç›®çš„ç®¡ç†è€…ï¼Œæƒ³è¦çœ‹çœ‹ä¸ºä»€ä¹ˆæœ€è¿‘çš„å‡ ä¸ªç‰ˆæœ¬å‘ç‰ˆè¶Šæ¥è¶Šæ…¢äº†çš„æ—¶å€™ã€‚å°±å¯ä»¥å¯¹æœ€è¿‘çš„å‡ ç»„<code>åˆ†æ”¯/æ ‡ç­¾</code>æ¥è®¡ç®—<code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>ã€‚æ­¤æ—¶æœ‰äº›<code>åˆ†æ”¯/æ ‡ç­¾</code>ç»„ä¹‹é—´æœ‰ç€å¤§é‡çš„<code>æäº¤ç‰ˆæœ¬</code>ï¼Œè€Œæœ‰äº›<code>åˆ†æ”¯/æ ‡ç­¾</code>ç»„ä¹‹é—´æœ‰ç€è¾ƒå°‘çš„æäº¤ç‰ˆæœ¬ã€‚é¡¹ç›®ç®¡ç†è€…å¯ä»¥æ›´è¿›ä¸€æ­¥çš„è®¡ç®—è¿™äº›æäº¤ç‰ˆæœ¬å„è‡ªçš„ä»£ç å½“é‡ï¼ŒæŠŠè¿™äº›æ•°æ®ä»¥å›¾è¡¨çš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ç»„å¾ˆç›´è§‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>çš„å›¾åƒã€‚æ­¤æ—¶ä»–æˆ–è®¸å°±èƒ½å‘ç°ï¼ŒåŸæ¥æ˜¯å› ä¸ºæœ€è¿‘çš„å‡ æ¬¡å‘ç‰ˆæ¶‰åŠåˆ°çš„å˜æ›´è¶Šæ¥è¶Šå¤æ‚äº†ã€‚é€šè¿‡è¿™æ ·çš„ç›´è§‚çš„ä¿¡æ¯ï¼Œå¼€å‘è€…å’Œç®¡ç†è€…ä»¬éƒ½èƒ½åšå‡ºç›¸åº”çš„è°ƒæ•´ï¼Œä»¥ä¾¿æå‡ç ”å‘æ•ˆèƒ½ã€‚</p><p><img loading="lazy" src="/zh/assets/images/é¢æ¿å›¾ç‰‡-03a197c811642b9877283665e88f49fa.png" width="2481" height="282" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·²æœ‰çš„è§£å†³æ–¹æ¡ˆ">å·²æœ‰çš„è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#å·²æœ‰çš„è§£å†³æ–¹æ¡ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å½“æˆ‘ä»¬åœ¨ <code>GitLab</code> ä¸Šæ‰“å¼€ä¸€ä¸ªä»£ç ä»“åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ url æœ«å°¾è¿½åŠ  compare çš„æ–¹å¼æ¥è¿›å…¥åˆ°ä»“åº“çš„æ¯”å¯¹é¡µé¢ã€‚</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAX0AAAAxCAIAAAC59u6lAAAKtElEQVR4Ae1cvXLkNgzW3XgmM5kr5e4eQK7iB7C7fYi9V8j4nsFymy5zfgdvm347+wG2s4oklZsbq7zJTKoLQPBflMTdWymy/W1haykQAD+CIAjQfvf1uS3wAQJAAAjMiMD7GWVBFBAAAkCAEYDfgR0AASAwNwLwO3MjDnlAAAjA78AGgAAQmBuBk7kFQt5iEPj5/KfF6PJWFPln9+9bGergOBHvDMKDl0AACEyAAPzOBKCCJRAAAoMIwO8MwoOXQAAITIAA/M4EoIIlEAACgwjA7wzCg5dAAAhMgAD8zgSggiUQAAKDCCyyjv64qTdNUa3rT9Wg8jO8bB++3G7bcnV1dXE6g7iiOGDszw+3ouPni/KHdUSh94ch1AxwTWEAyUS809zV9XW9eRzoNe2rZtewgLZ9K3+xSo7juq6/PCxovAtUaVqjA/dZEej6HVn11fnZrHr4wqpzFeaU5Y/v3j7bxT63zY48TnleLWe8C1RpsdMHxQ5AID5ntfdbCjbK1er/POGcreubA8byQrs02y25nWp1uRy3s0CVXujkQu00AlG8g30uDdOErY/qVKljvAnl7MF6gSrtoT1IXwACod951FvvTDnUF4DP1Cq2DwuIL8NBLlClUEF8e/kIBOcsk9qxZyyvmlOoookaMFd35FAglRRBgVoT9ZRmc02lKfOJSlSudlNoMiFw7VYTxcEXx4dBo4ZmL9oaWQkC96rviXLqnrokYZ2m7NVE60DjWIcJsvaei05xke7ZpHYGi2W6r1UlgtG2uwcDezApplHIqvVvxS+uh33qVSmEN+DMnWMlOwR+qc7DuVrfrGWavUbGyQPQs8PTYBQhmRqDGI8dTqSGTBw3Vg1XKpWVWLvtnVbLDg/HQcCPd4zbCRcMy2k2tZojkdlub2/vWzYjr7Gg1qgiQwS+0xE+UQtzJKvyFrvI6PzkKpsvjrptNw/Pho5lha+Z4DZWwJCnfpNB+06HSHigbJrhhxZYR5NbU40qq3NO0+iSnOsoGZM4b5ZzrKWBx0rQdERQO0H0ZPCkRWlXVGougk7mS1qlLryEPtmA/jB0sZIEXroqSur5OIsfiRrZ4hIV1ZYKf4GpsGE6Ndj3+axZO1Yj6CIqN3cdfYemVY8Tv46FgIt3+jPKLZ2+7MYi2xovaT+gILukyW13zfOFPqPR1qGm23YkjdWG1mzumuBiTrvbFaurm6G7JyRUbMfn1t4bezKygmhC710dcT3INXdGgtl+i3D30/0eN8pgace0N3pozVAbrcOKwsDyclVtNw07nspFazpjsgoPsLnpW3/UWiuak8cLLyKwoxJlKE/t3X4y+Ph8aC6KP2wv95BIcpvuEU+DPknsQMe+j3FqNpvG4ilCaNAEnp5ucTr0k2JiG/iYvgThmYOQXchm6+tgTHHzUNm5iKJgzX9731ZB2n63a6w4pdbYtDqA8HQMBGy8k97nRATZiTXx8nK9ksJLtdanLSI6W6tYmRyP3gP1kgqi5aL6JFThxZy2OF8POR3yV2oxkBZ+7F2QJrKM5bVvkaz26cXVldK0E3vIoIKfzyrNwkarY/6AgyM1uQ/ndOhdeaEgaZ9k7JIibsjWbT8TSfqriK4IZmWUq0/BqGlcUmtMXm/S27jvdAx8vtMhxWgurHr+Ax+KwyS3Q9+/xnl6sZaVLDlB5zWEWXnx2aAfXwSr1jYKo14abx95jWc3aGQL8HQoL2W2nNVRi7NJVqRaKRMwUyO6kQdrSyNYNeVMq+mL38dAwMQ7Qxnl6GaJuldDmQq5ZWOUKD+WhXE6PLFq0VEYXBsC91tZgSsaE/vB7IZZn1GwYPmJrPgIw69P6dBDLqvZPRYVHx5l97Md6cFsemKYVUeE5mC7CB1He1vbZh+UIjQuRqZpeDVcKn8qTo0UDA6wxtZzbyyYQMaK6zxQCMNJ6tDpDMxFOr8TX6LQPrOvzN+PPh85Ffph2JK0m8gGTvnqlnPbeqSRHXKrhpo9vjMoaleRte6W+hVdT8ua1hQftB2IgPY76Q35QJ7UTSYyr//Y/UBt2eTX0h+RVZYJ56VdZLqf1zomwpA+h5GaaY5/nxnHo06d6UiyN30bMxtbQoaeT8P03PW/+8wFMwi3ARky7yrpj0E/8T4X/TTjQ1rl5DXeMxpO5rSO8wVFLgLid4zbCTbkXBYpOol+KC52B+8UWVabmK+y74Rx00JRkVbbUo45dj2RP6Hopk6KHBNhOul92ERJprnzm8P7ZssRD50EVckqvhaYdkYdRjqxRUC6s0mnciS9iGb1RGkwyoUXAez9c5HK78RBhQx5HP044iClIvQ7gztCg4jQjHSOJpwdyTwOi8qd1mEueLsHApzf6c8o78EoJFULmfPMnWA5pMv6JruT+MZEh35ZElMUyVAoZNQnQicvLLGhi3MWlkA/SFmLx68PsOGhVGesYmcUczFxI53/PI8rLqtLy1k2lVOhY6DJ+TJVPz4pHp3z1MiQ+7lrPYUgJWrftq45aRFydNNuLrxq32s1gfCRMQa0+HIMBMjvZG69+0nTpiAVd9eVMiyp+qgjSD1xkoXaqe+tK5zzGV5/leQhJ13uOCuqP6Ya1T14GArvtxPhrdjEVmnK5FGVl2SFuqnUEkG726o/vQrXQm5G2ernL55uAdiS0QMnVjmTGmSy+ubC72ifw9Q3szToBxVrukWhC9hnKnVL6AflapONirNaVs4hDyTEq5obEZTk8eJ03znZMuiYMDfGoHjfndYxRnificBJMZRRzmSSIuMKl6qtd3KwHctOdQ/aqDiyfmKzZt/iJXTJqBUd1VZWOynb1tdBT0qyhgWO8K37xjUUzeK69pqpFk4pYq+BynlGlEdHBF5EwuQllZ24nk6esFyFifM9MsqSNyU34sZVrkiDTfdaEQvlD1d5ngh5dj36Sl7PXPTklYWN+2kY9qHfAx0z8EtXjuGhTzTdlKgOLIDBNSVIdh6U42IPaG2E6mUllfJHJXKVNmtaRzmBIAuB9ya1s783GONPBeBaaqmOkjMstiTvmsefuGPEjFyKvQ5Da6OO7omwRdZ+2XVECNXdQw7c//PqY9yNnGBde9V2fk+kN04Z3YOzy/wJT0lFkZ1R5s70J7K+LBLkJXqYIPXh0jvLdtFlci5SXdNtie6+Q2foAjWJC6MX4plmvVcr3wXwDDWC3d6c0DzDRM+IoOxpHeGD11kIvPv91yv+F1tHN5Es6W+RSGoutGTyArEJIUr+Y6pF/t8vOVIxZnanmRCXI7F+OfAeacD7sHmvzgG5d0j24QzaJAL6QmUnfZskRiMQeJ0IUF45rpy+zoEuZFR5d5QXoizUAAITIXBS31xNxBpsEwi8rX9plgAATUCAELB/nwU0gAAQAAIzIfDu67NXJZ5JKMQsAgEkPiedBsA7AC/inQFw8AoIAIFJEIDfmQRWMAUCQGAAAf336AMUePWmEEieDt4UAhjsDAgg3pkBZIgAAkAgQAB+J4ADX4AAEJgBAfidGUCGCCAABAIE4HcCOPAFCACBGRB49/379xnEQMQCEfj28dsCtXrdKn14+vC6B5g5OsQ7mUCBDAgAgaMhgHjnaFCCERAAApkIIN7JBApkQAAIHA0B+J2jQQlGQAAIZCIAv5MJFMiAABA4GgInf/7199GYgREQAAJAIAOB/wDG5KGDSylvZQAAAABJRU5ErkJggg==" width="381" height="49" class="img_ev3q"></p><p><img loading="lazy" src="/zh/assets/images/æºåˆ†æ”¯-ç›®æ ‡åˆ†æ”¯-99f50ad221ac3d6162e30ccd1e71a075.png" width="1345" height="949" class="img_ev3q"></p><p>åœ¨è¯¥é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®<code>æºåˆ†æ”¯/æ ‡ç­¾</code> å’Œ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>è®© <code>GitLab</code> å‘æˆ‘ä»¬å±•ç¤º ç›®æ ‡åˆ†æ”¯è½åäºæºåˆ†æ”¯å“ªäº›ç‰ˆæœ¬ï¼Œä»¥åŠè½åäº†å¤šå°‘ä¸ªç‰ˆæœ¬ã€‚</p><p>è®¾ç½®å®Œæ¯•åï¼Œ<code>GitLab</code> ä¼šå±•ç¤ºå¦‚ä¸‹ï¼š</p><p><img loading="lazy" src="/zh/assets/images/ç‰ˆæœ¬å¯¹æ¯”-d1d9959a319e4bb088379c7234097145.png" width="1741" height="1001" class="img_ev3q"></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æˆ‘ä»¬é€‰æ‹©çš„<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>æ¯”<code>æºåˆ†æ”¯/æ ‡ç­¾</code>å°‘äº†å¦‚å›¾æ‰€ç¤ºçš„<code>æäº¤ç‰ˆæœ¬</code>ï¼ˆCommitsï¼‰</p><p>ç„¶è€Œé—æ†¾çš„æ˜¯ï¼Œåƒ <code>GitLab</code> è¿™ç±»è§£å†³æ–¹æ¡ˆï¼Œéƒ½æ²¡æœ‰åšæ‰¹é‡åŒ–ï¼Œè‡ªåŠ¨åŒ–çš„å¤„ç†ã€‚ä¹Ÿæ›´æ²¡æœ‰å¯¹åç»­çš„è®¡ç®—å‡ºæ¥çš„ç»“æœè¿›è¡Œç›¸åº”çš„æ•°æ®æ±‡æ€»å¤„ç†ã€‚ç”¨æˆ·é¢å¯¹æµ·é‡çš„åˆ†æ”¯æäº¤çš„æ—¶å€™ï¼Œæ—¢ä¸å¯èƒ½æ‰‹åŠ¨çš„ä¸€ä¸ªä¸€ä¸ªå»æ¯”è¾ƒï¼Œä¹Ÿä¸å¯èƒ½æ‰‹åŠ¨çš„å»æŠŠæ•°æ®ç»“æœè‡ªå·±å¤åˆ¶ç²˜è´´åå†åˆ†æã€‚</p><p>å› æ­¤ <code>DevLake</code> å°±å¿…é¡»è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰€è°“çš„è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚å…·ä½“æ˜¯åœ¨è®¡ç®—ä»€ä¹ˆ">æ‰€è°“çš„<code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>å…·ä½“æ˜¯åœ¨è®¡ç®—ä»€ä¹ˆï¼Ÿ<a class="hash-link" href="#æ‰€è°“çš„è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚å…·ä½“æ˜¯åœ¨è®¡ç®—ä»€ä¹ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»¥ <code>GitLab</code> çš„è®¡ç®—è¿‡ç¨‹ä¸ºä¾‹æ¥è¯´çš„è¯ï¼Œæ‰€è°“çš„<code>è®¡ç®—æäº¤ç‰ˆæœ¬å·®å¼‚</code>ä¹Ÿå°±æ˜¯å½“ä¸€ä¸ª<code>æäº¤ç‰ˆæœ¬</code>åœ¨<code>æºåˆ†æ”¯/æ ‡ç­¾</code>ä¸­<code>å­˜åœ¨</code>ï¼Œä½†æ˜¯åœ¨<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ä¸­<strong>ä¸å­˜åœ¨</strong>çš„æ—¶å€™ï¼Œè¿™ä¸ªæäº¤ç‰ˆæœ¬å°±ä¼šè¢« <code>GitLab</code> ç»™é€®å‡ºæ¥ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ–è®¸æœ‰äººä¼šé—®ï¼Œå‡å¦‚ä¸€ä¸ª<code>æäº¤ç‰ˆæœ¬</code>åœ¨<code>æºåˆ†æ”¯/æ ‡ç­¾</code>ä¸­<strong>ä¸å­˜åœ¨</strong>ï¼Œç›¸åçš„ï¼Œåœ¨<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ä¸­<code>å­˜åœ¨</code>ï¼Œé‚£æ˜¯ä¸æ˜¯ä¹Ÿä¼šè¢«æŠ“èµ·æ¥å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼Œ<strong>ä¸ä¼š</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬è®¡ç®—<code>æäº¤ç‰ˆæœ¬</code>çš„å·®å¼‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªå…³å¿ƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ç¼ºå°‘äº†ä»€ä¹ˆï¼Œè€Œå¹¶ä¸å…³å¿ƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>å¤šå‡ºæ¥äº†ä»€ä¹ˆä¸œè¥¿ã€‚</p><p>è¿™å°±å¥½åƒä»¥å‰æœ‰ä¸€ä½ç®—æ³•ç«èµ›çš„å­¦ç”Ÿï¼Œåœ¨ NOI æ¯”èµ›ç»“æŸåè¢«ç›¸å…³å­¦æ ¡é¢è¯•çš„æ—¶å€™ï¼Œä¸€ä¸ªåŠ²çš„è‡ªæˆ‘ä»‹ç»è‡ªå·±æ‹…ä»»è¿‡ä»€ä¹ˆå¹¿æ’­ç«™é’åå­¦ç”Ÿä¼šï¼Œä»€ä¹ˆä¼šé•¿å‰¯ä¼šé•¿ä¹‹ç±»çš„ç»å†ã€‚ç»“æœå¾ˆå¿«å°±æƒ¹å¾—é¢è¯•å®˜è€å¸ˆä»¬å¿æ— å¯å¿çš„å‘Šè¯«é“ï¼š</p><blockquote><p>æˆ‘ä»¬åªæƒ³çŸ¥é“ä½ ä¿¡æ¯å­¦æ–¹é¢çš„è‡ªæˆ‘ä»‹ç»ï¼Œå…¶ä½™çš„æˆ‘éƒ½ä¸æ„Ÿå…´è¶£ï¼ï¼ï¼</p></blockquote><p>åœ¨è®¡ç®—<code>æäº¤ç‰ˆæœ¬</code>å·®å¼‚æ—¶ï¼Œ<code>GitLab</code> æ˜¯è¿™æ ·ã€‚ <code>GitHub</code> ä¹Ÿæ˜¯è¿™æ ·ã€‚äº‹å®ä¸Šï¼Œåœ¨ä½¿ç”¨ git å‘½ä»¤  <code>git log branch1...branch2</code>  çš„æ—¶å€™ï¼Œgit ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚</p><p>å®ƒä»¬éƒ½åªå…³å¿ƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ç›¸å¯¹äº<code>æºåˆ†æ”¯/æ ‡ç­¾</code>ç¼ºå°‘çš„éƒ¨åˆ†ã€‚</p><p>è®¡ç®—<code>æäº¤ç‰ˆæœ¬</code>å·®å¼‚å®é™…ä¸Šå°±æ˜¯ï¼š</p><ul><li>è®¡ç®—å¾…è®¡ç®—çš„<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ç›¸å¯¹äº<code>æºåˆ†æ”¯/æ ‡ç­¾</code>ç¼ºå°‘äº†å“ªäº›<code>æäº¤ç‰ˆæœ¬</code>ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¹æäº¤ç‰ˆæœ¬è¿›è¡Œæ•°å­¦å»ºæ¨¡">å¯¹<code>æäº¤ç‰ˆæœ¬</code>è¿›è¡Œæ•°å­¦å»ºæ¨¡<a class="hash-link" href="#å¯¹æäº¤ç‰ˆæœ¬è¿›è¡Œæ•°å­¦å»ºæ¨¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æƒ³è¦åšè®¡ç®—ï¼Œé‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªæŠ½è±¡çš„ç°å®é—®é¢˜ï¼Œè½¬æ¢æˆä¸€ä¸ªæ•°å­¦é—®é¢˜ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡Œæ•°å­¦å»ºæ¨¡äº†ã€‚</p><p>æˆ‘ä»¬éœ€è¦æŠŠåƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ã€<code>æºåˆ†æ”¯/æ ‡ç­¾</code>ã€<code>æäº¤ç‰ˆæœ¬</code> è¿™æ ·ä¸€ç³»åˆ—çš„æ¦‚å¿µå˜æˆæ•°å­¦æ¨¡å‹ä¸­çš„å¯¹è±¡ã€‚</p><p>å¦‚æ­¤æˆ‘ä»¬æ‰èƒ½ä¸ºå…¶è®¾è®¡ç®—æ³•ã€‚</p><p>æƒ³å½“ç„¶çš„ï¼Œæˆ‘ä»¬å°±æƒ³åˆ°äº†ä½¿ç”¨å›¾çš„æ–¹å¼æ¥è¿›è¡Œæ•°å­¦å»ºæ¨¡ã€‚</p><p>æˆ‘ä»¬å°†æ¯ä¸€ä¸ª<code>æäº¤ç‰ˆæœ¬</code>éƒ½çœ‹ä½œæ˜¯å›¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠ<code>æäº¤ç‰ˆæœ¬</code>åˆå¹¶ä¹‹å‰çš„ä¸€ç»„<code>æäº¤ç‰ˆæœ¬</code>ä¸å½“å‰<code>æäº¤ç‰ˆæœ¬</code>ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œçœ‹ä½œæˆæ˜¯ä¸€æ¡<code>æœ‰å‘è¾¹</code>ã€‚</p><p>ç”±äº<code>ç›®æ ‡åˆ†æ”¯</code>å’Œ<code>æºåˆ†æ”¯</code>äº‹å®ä¸Šä¹Ÿå„è‡ªä¸ä¸€ä¸ªç‰¹å®šçš„<code>æäº¤ç‰ˆæœ¬</code>ç›¸ç»‘å®šï¼Œå› æ­¤ä¹Ÿèƒ½å°†å®ƒä»¬çœ‹ä½œæ˜¯å›¾ä¸Šçš„ç‰¹åˆ«èŠ‚ç‚¹ã€‚</p><ul><li>å°†<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå‘½åä¸º<code>æ—§èŠ‚ç‚¹</code></li><li>å°†<code>æºåˆ†æ”¯/æ ‡ç­¾</code>æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå‘½åä¸º<code>æ–°èŠ‚ç‚¹</code></li></ul><p>å½“ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªéœ€è¦ç‰¹åˆ«å…³æ³¨çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯åˆå§‹çš„<code>æäº¤ç‰ˆæœ¬</code>æ‰€ä»£è¡¨çš„èŠ‚ç‚¹</p><ul><li>å°†åˆå§‹<code>æäº¤ç‰ˆæœ¬</code>æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå‘½åä¸º<code>æ ¹èŠ‚ç‚¹</code></li></ul><p>ä¸Šè¿°çš„æè¿°æˆ–è®¸æ˜¾å¾—æœ‰ç‚¹å„¿æŠ½è±¡ã€‚</p><p>æˆ‘ä»¬ç°åœ¨æ¥å®é™…ä¸¾ä¸€ä¸ªä¾‹å­ã€‚æ¥çœ‹çœ‹å¦‚ä½•å¯¹ä¸€ä¸ªä»“åº“è¿›è¡Œä¸Šè¿°æ•°å­¦å»ºæ¨¡ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰åŸºäºå¦‚ä¸‹æè¿°è€Œäº§ç”Ÿçš„ä¸€ä¸ªä»“åº“ï¼š</p><ol><li>åˆ›å»ºç©ºä»“åº“</li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>1</code> ä½œä¸ºåˆå§‹æäº¤</li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>2</code></li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»ºæ–°åˆ†æ”¯ <code>nd</code></li><li>åœ¨ <code>nd</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>3</code></li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>4</code></li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»ºæ–°åˆ†æ”¯ <code>dtf</code></li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>5</code></li><li>åœ¨ <code>dtf</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>6</code></li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»ºæ–°åˆ†æ”¯ <code>nddtf</code></li><li>åœ¨ <code>nddtf</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>7</code></li><li>æŠŠ <code>nd</code> åˆ†æ”¯åˆå¹¶åˆ° <code>nddtf</code>åˆ†æ”¯</li><li>æŠŠ <code>dtf</code> åˆ†æ”¯åˆå¹¶åˆ° <code>nddtf</code>åˆ†æ”¯</li><li>åœ¨ <code>main</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>8</code></li><li>åœ¨ <code>nddtf</code> åˆ†æ”¯ä¸Šåˆ›å»º<code>æäº¤ç‰ˆæœ¬</code> <code>9</code></li></ol><p>æˆ‘ä»¬å¯¹ä¸Šè¿°çš„ä»“åº“è¿›è¡Œæ„å›¾ä¹‹åï¼Œæœ€ç»ˆä¼šå¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ä¸ªæœ‰å‘å›¾ï¼š</p><p><img loading="lazy" src="/zh/assets/images/æ•°å­¦æ¨¡å‹æ„å›¾-4a78a881d229f093e4da55b862af4108.png" width="1161" height="733" class="img_ev3q"></p><ul><li>æ­¤æ—¶å½©è‰²èŠ‚ç‚¹ <code>1</code> ä¸º<code>æ ¹èŠ‚ç‚¹</code></li><li><code>main</code> åˆ†æ”¯ä¸º <code>1</code> <code>2</code> <code>4</code> <code>5</code> <code>8</code></li><li><code>nd</code> åˆ†æ”¯ä¸º <code>1</code> <code>2</code> <code>3</code> éšååˆå¹¶å…¥ <code>nddtf</code> åˆ†æ”¯</li><li><code>dtf</code> åˆ†æ”¯ä¸º <code>1</code> <code>2</code> <code>4</code> <code>6</code> éšååˆå¹¶å…¥ <code>nddtf</code> åˆ†æ”¯</li><li><code>nddtf</code> åˆ†æ”¯ä¸º <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code> <code>7</code> <code>9</code></li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ª<code>æäº¤ç‰ˆæœ¬</code>åœ¨å›¾ä¸­éƒ½ç›¸å¯¹åº”çš„æœ‰ä¸€ä¸ªèŠ‚ç‚¹</p><p>æ­¤æ—¶æˆ‘ä»¬æŠŠ<code>æäº¤ç‰ˆæœ¬</code> <code>1</code> æ‰€ä»£è¡¨çš„èŠ‚ç‚¹ï¼Œä½œä¸º<code>æ ¹èŠ‚ç‚¹</code></p><p>å½“ç„¶è¿™é‡Œå¯èƒ½ä¼šæœ‰åŒå­¦æé—®äº†ï¼š</p><ul><li>å‡å¦‚æˆ‘è¿™ä¸ªä»“åº“æœ‰<strong>ä¸€ä¸‡ä¸ª</strong><code>æ ¹èŠ‚ç‚¹</code>æ€ä¹ˆç ´ï¼Ÿ</li></ul><p>ç›¸ä¿¡ä¸€äº›ç»å¸¸åšå›¾çš„å»ºæ¨¡çš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“ç ´æ³•ã€‚</p><ul><li>åˆ›å»ºä¸€ä¸ªåå«ä¸º<code>ä¸€ä¸‡ä¸ªæ ¹èŠ‚ç‚¹</code>çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ŒæŠŠå®ƒè®¾ä¸ºè¿™äº›ä¸ªè™šå‡çš„<code>æ ¹èŠ‚ç‚¹</code>çš„çˆ¶èŠ‚ç‚¹ï¼Œæ¥å½“ä½œçœŸæ­£çš„<code>æ ¹èŠ‚ç‚¹</code>å³å¯ã€‚</li></ul><p>åœ¨è¿™ä¸ªæœ‰å‘å›¾ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®é™…çš„å»æŒ‡å®šå…·ä½“çš„<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>æˆ–è€…<code>æºåˆ†æ”¯/æ ‡ç­¾</code></p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»»æ„çš„ä¸¤ä¸ª<code>æäº¤ç‰ˆæœ¬</code>ä½œä¸ºä¸€å¯¹<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>æºåˆ†æ”¯/æ ‡ç­¾</code>
å½“ç„¶ï¼Œæœ‰çš„åŒå­¦åœ¨è¿™é‡Œå¯èƒ½åˆä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼š</p><ul><li><code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>æºåˆ†æ”¯/æ ‡ç­¾</code> è™½ç„¶éƒ½èƒ½æ˜ å°„åˆ°å…¶æœ€åçš„<code>æäº¤ç‰ˆæœ¬</code>ä¸Šï¼Œä½†æ˜¯å®é™…ä¸Šæ¥è¯´<code>æäº¤ç‰ˆæœ¬</code>ä¸<code>åˆ†æ”¯/æ ‡ç­¾</code>æœ¬è´¨ä¸Šå°±æ˜¯ä¸¤ç§ä¸åŒçš„æ¦‚å¿µã€‚</li></ul><p><code>åˆ†æ”¯/æ ‡ç­¾</code>çš„å®è´¨ï¼Œæ˜¯åŒ…å«ä¸€ç³»åˆ—çš„<code>æäº¤ç‰ˆæœ¬</code>çš„é›†åˆã€‚è€Œç‰¹å®šçš„<code>æäº¤ç‰ˆæœ¬</code>ä»…ä»…æ˜¯è¿™ä¸ªé›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ç½¢äº†ã€‚</p><p>å½“æˆ‘ä»¬æŠŠä¸€ä¸ªä»“åº“é€šè¿‡ä¸Šè¿°æ•°å­¦å»ºæ¨¡æŠ½è±¡æˆä¸€ä¸ªæœ‰å‘å›¾ä¹‹åï¼Œè¿™ä¸ªé›†åˆçš„ä¿¡æ¯ï¼Œä¼šå› æ­¤è€Œä¸¢å¤±æ‰å—ï¼Ÿ</p><p>å¯¹äºä¸€ä¸ªåˆæ³•çš„ä»“åº“æ¥è¯´ï¼Œç­”æ¡ˆæ˜¾ç„¶æ˜¯ï¼Œ<code>ä¸ä¼š</code></p><p>å®é™…ä¸Šï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸€å®šè¦åœ¨è¯¥æœ‰å‘å›¾ä¸­å¼ºè°ƒ<code>æ ¹èŠ‚ç‚¹</code>çš„åŸå› ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œè¿™é‡Œï¼Œå…ˆç»™å‡ºç»“è®ºï¼š</p><p><strong><code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„ä¸­é€”å¾„çš„<code>æ‰€æœ‰èŠ‚ç‚¹</code>çš„é›†åˆï¼Œå³ä¸ºè¯¥<code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€åŒ…å«çš„<code>æäº¤ç‰ˆæœ¬</code>é›†åˆã€‚</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€å•è¯æ˜-ä¸Šè¿°ç»“è®º">ç®€å•è¯æ˜ ä¸Šè¿°ç»“è®º<a class="hash-link" href="#ç®€å•è¯æ˜-ä¸Šè¿°ç»“è®º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>è®¾<code>æ ¹èŠ‚ç‚¹</code>ä¸ºèŠ‚ç‚¹ <code>A</code></li><li>è®¾è¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€ä»£è¡¨çš„èŠ‚ç‚¹ä¸ºèŠ‚ç‚¹ <code>B</code></li></ul><hr><ul><li>å½“ èŠ‚ç‚¹ <code>C</code> æ˜¯å±äºè¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code></li><li>å› ä¸º èŠ‚ç‚¹ <code>C</code> æ˜¯å±äºè¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code></li><li>æ‰€ä»¥ å¿…ç„¶å­˜åœ¨ä¸€ç»„æäº¤æˆ–è€…åˆå¹¶ ä½¿å¾— èŠ‚ç‚¹ <code>C</code> å¯ä»¥ä¸€ç›´æäº¤åˆ°èŠ‚ç‚¹ <code>B</code></li><li>åˆå› ä¸º æ¯ä¸€ä¸ªæ–°å¢çš„æäº¤ æˆ–è€… åˆå¹¶æ“ä½œï¼Œå‡ä¼šåˆ‡å®çš„å»ºç«‹ä¸€æ¡ä»æ–°å¢çš„æäº¤/åˆå¹¶åˆ°å½“å‰æäº¤çš„è¾¹</li><li>æ‰€ä»¥ï¼Œåè¿‡æ¥è¯´ï¼Œæ¯ä¸€ä¸ªæäº¤æˆ–è€…åˆå¹¶åçš„èŠ‚ç‚¹ï¼Œå‡å¯ä»¥æŠµè¾¾èŠ‚ç‚¹ <code>C</code></li><li>æ‰€ä»¥ èŠ‚ç‚¹ <code>B</code> å­˜åœ¨è‡³å°‘ä¸€æ¡è·¯å¾„ å¯ä»¥ æŠµè¾¾èŠ‚ç‚¹ <code>C</code></li><li>åŒç†å¯è¯ï¼ŒèŠ‚ç‚¹ <code>C</code> å­˜åœ¨è‡³å°‘ä¸€æ¡è·¯å¾„æŠµè¾¾<code>æ ¹èŠ‚ç‚¹</code> ä¹Ÿå°±æ˜¯èŠ‚ç‚¹ <code>A</code></li><li>ç»¼ä¸Šï¼Œå­˜åœ¨ä¸€æ¡ä»èŠ‚ç‚¹ <code>B</code> åˆ°èŠ‚ç‚¹ <code>A</code> çš„è·¯å¾„ï¼Œç»è¿‡èŠ‚ç‚¹ <code>C</code></li></ul><hr><ul><li>å½“ èŠ‚ç‚¹ <code>C</code> ä¸å±äºè¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code></li><li>å‡è®¾ å­˜åœ¨ä¸€æ¡ä»èŠ‚ç‚¹ <code>B</code> åˆ°èŠ‚ç‚¹ <code>A</code> çš„è·¯å¾„ï¼Œç»è¿‡èŠ‚ç‚¹ <code>C</code></li><li>å› ä¸º æ¯ä¸€æ¡è¾¹éƒ½æ˜¯ç”±æ–°å¢çš„æäº¤æˆ–è€…åˆå¹¶æ“ä½œå»ºç«‹çš„</li><li>æ‰€ä»¥ å¿…ç„¶å­˜åœ¨ä¸€ç³»åˆ—çš„æ–°å¢æäº¤æˆ–è€…åˆå¹¶æ“ä½œï¼Œä½¿å¾—èŠ‚ç‚¹ <code>C</code> æˆä¸ºèŠ‚ç‚¹ <code>B</code></li><li>åˆå› ä¸º æ¯ä¸€ä¸ªæäº¤åœ¨æŠ½è±¡é€»è¾‘ä¸Šéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„</li><li>å› æ­¤ï¼Œå¦‚æœç¼ºå¤±äº†èŠ‚ç‚¹ <code>C</code> åˆ™å¿…ç„¶å¯¼è‡´åœ¨æ„å»ºèŠ‚ç‚¹ <code>B</code> æ‰€ä»£è¡¨çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>çš„è¿‡ç¨‹ä¸­ï¼Œè‡³å°‘å­˜åœ¨ä¸€ä¸ªæäº¤æˆ–è€…åˆå¹¶æ“ä½œæ— æ³•æ‰§è¡Œã€‚</li><li>è¿™å°†å¯¼è‡´åˆ†æ”¯éæ³•</li><li>å› æ­¤ å‡è®¾ä¸æˆç«‹</li><li>å› æ­¤ å…¶é€†å¦å‘½é¢˜ å¯¹ä»»æ„ä¸€æ¡ä»èŠ‚ç‚¹ <code>B</code> åˆ°èŠ‚ç‚¹ <code>A</code> çš„è·¯å¾„ï¼Œéƒ½ä¸ä¼šç»è¿‡èŠ‚ç‚¹ <code>C</code> æˆç«‹</li></ul><hr><ul><li>æ ¹æ® </li><li>å½“ èŠ‚ç‚¹ <code>C</code> æ˜¯å±äºè¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>ï¼Œå­˜åœ¨ä¸€æ¡ä»èŠ‚ç‚¹ <code>B</code> åˆ°èŠ‚ç‚¹ <code>A</code> çš„è·¯å¾„ï¼Œç»è¿‡èŠ‚ç‚¹ <code>C</code> ï¼ˆå¿…è¦æ€§ï¼‰</li><li>å½“ èŠ‚ç‚¹ <code>C</code> ä¸å±äºè¦æ±‚çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>ï¼Œå¯¹ä»»æ„ä¸€æ¡ä»èŠ‚ç‚¹ <code>B</code> åˆ°èŠ‚ç‚¹ <code>A</code> çš„è·¯å¾„ï¼Œéƒ½ä¸ä¼šç»è¿‡èŠ‚ç‚¹ <code>C</code> ï¼ˆå……åˆ†æ€§ï¼‰</li><li>å¯å¾— <code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„ä¸­é€”å¾„çš„<code>æ‰€æœ‰èŠ‚ç‚¹</code>çš„é›†åˆï¼Œå³ä¸ºè¯¥<code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€åŒ…å«çš„<code>æäº¤ç‰ˆæœ¬</code>é›†åˆã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®—æ³•é€‰æ‹©">ç®—æ³•é€‰æ‹©<a class="hash-link" href="#ç®—æ³•é€‰æ‹©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†æ•°å­¦å»ºæ¨¡ï¼Œå¹¶ä¸”å·²ç»ä¸ºæ•°å­¦å»ºæ¨¡åšäº†åŸºæœ¬çš„è¯æ˜ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥å¼€å§‹åœ¨è¿™ä¸ªæ•°å­¦æ¨¡å‹çš„åŸºç¡€ä¸Šæ¥è®¾è®¡å¹¶å®ç°æˆ‘ä»¬çš„ç®—æ³•äº†ã€‚</p><p>å¦‚æœæ²¡æœ‰åšä¸Šè¿°åŸºæœ¬è®ºè¯çš„åŒå­¦ï¼Œè¿™é‡Œå¯èƒ½ä¼šçŠ¯ä¸€ä¸ªå°é”™è¯¯ï¼šé‚£å°±æ˜¯å®ƒä»¬ä¼šè¯¯ä»¥ä¸ºï¼Œåªè¦è®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„å³å¯ã€‚è‹¥çœŸæ˜¯å¦‚æ­¤çš„è¯ï¼Œ<code>SPFA</code>ï¼Œ<code>è¿ªæ°æ–¯ç‰¹æ‹‰</code>ï¼ˆDijkstraï¼‰ï¼Œç”šè‡³å¤´é“ä¸€ç‚¹å„¿ï¼Œæ¥ä¸ª<code>å¼—æ´›ä¼Šå¾·</code>ï¼ˆFloydï¼‰éƒ½æ˜¯å¾ˆå®¹æ˜“æƒ³åˆ°çš„ã€‚å½“ç„¶ç”±äºè¯¥æœ‰å‘å›¾çš„æ‰€æœ‰è¾¹é•¿éƒ½æ˜¯ 1ï¼Œæ‰€ä»¥æ›´ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥ä½¿ç”¨<code>å¹¿/å®½åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼ˆBFSï¼‰</code>æ¥è®¡ç®—æœ€çŸ­è·¯ã€‚</p><p>ä¸Šè¿°çš„ä¸€ç³»åˆ—è€³ç†Ÿèƒ½è¯¦çš„ç®—æ³•ï¼Œæˆ–å¤šæˆ–å°‘éƒ½æœ‰æˆç†Ÿçš„åº“å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ä½†æ˜¯é—æ†¾çš„æ˜¯ï¼Œå¦‚æœçœŸçš„æ˜¯å»ç®—æœ€çŸ­è·¯çš„è¯ï¼Œé‚£æœ€ç»ˆç»“æœææ€•ä¼šä¸å°½å¦‚äººæ„ã€‚</p><p>åœ¨ <code>DevLake</code> çš„æ—©æœŸä¸æˆç†Ÿçš„ç‰ˆæœ¬ä¸­ï¼Œæ›¾ç»ä½¿ç”¨è¿‡æœ€çŸ­è·¯çš„ç®—æ³•æ¥è®¡ç®—ã€‚å°½ç®¡å¯¹äºæ¯”è¾ƒç®€å•çº¿æ€§çš„ä»“åº“æ¥è¯´ï¼Œå¯ä»¥æ­ªæ‰“æ­£ç€çš„ç®—å‡ºç»“æœã€‚ä½†æ˜¯å½“ä»“åº“çš„åˆ†æ”¯å’Œåˆå¹¶å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œæœ€çŸ­è·¯æ‰€è®¡ç®—çš„ç»“æœå¾€å¾€éƒ½ä¼šé—æ¼å¤§é‡çš„<code>æäº¤ç‰ˆæœ¬</code>ã€‚</p><p>å› ä¸ºåœ¨åˆšæ‰æˆ‘ä»¬å·²ç»è®ºè¯è¿‡äº†ï¼Œè¿™ä¸ª<code>åˆ†æ”¯/æ ‡ç­¾</code>æ‰€åŒ…å«çš„<code>æäº¤ç‰ˆæœ¬</code>é›†åˆï¼Œæ˜¯å¿…é¡»è¦å…¨éƒ¨è·¯å¾„æ‰è¡Œçš„ã€‚åªæœ‰å…¨éƒ¨è·¯å¾„ï¼Œæ‰èƒ½æ»¡è¶³å……åˆ†ä¸”å¿…è¦æ¡ä»¶ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸­é—´åªè¦æ¼äº†ä¸€æ¡è·¯å¾„ï¼Œé‚£å°±ä¼šæ¼æ‰ä¸€ç³»åˆ—çš„<code>æäº¤ç‰ˆæœ¬</code>ã€‚</p><p>è¦è®¡ç®—è¿™ä¸ªæœ‰å‘å›¾ä¸Šçš„<code>æ—§èŠ‚ç‚¹</code>æ‰€ä»£è¡¨çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>æ¯”<code>æ–°èŠ‚ç‚¹</code>æ‰€ä»£è¡¨çš„<code>åˆ†æ”¯/æ ‡ç­¾</code>ç¼ºå°‘äº†å“ªäº›<code>æäº¤ç‰ˆæœ¬</code>ã€‚</p><p>å®è´¨ä¸Šå°±æ˜¯åœ¨è®¡ç®—<code>æ—§èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œå¯¹æ¯”<code>æ–°èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œç¼ºå°‘äº†å“ªäº›èŠ‚ç‚¹ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ•°å­¦å»ºæ¨¡çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªæœ‰å‘å›¾å»ºç«‹æˆä¸€æ£µæ ‘çš„è¯ã€‚</p><p>é‚£ä¹ˆç†Ÿæ‚‰ç®—æ³•çš„åŒå­¦ï¼Œå°±å¯ä»¥å¾ˆè‡ªç„¶çš„ä½¿ç”¨æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰ç®—æ³•ï¼Œæ±‚å‡ºå…¶å¹¶é›†ï¼Œç„¶åå†æ¥è®¡ç®—å…¶å¯¹åº”çš„ç¼ºå¤±çš„éƒ¨åˆ†ã€‚</p><p>ä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰å‘å›¾æ¥è¯´ï¼Œæ ‘ç»“æ„çš„ç®—æ³•æ˜¯æ²¡æ³•ç›´æ¥ä½¿ç”¨çš„ã€‚æ‰€å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬çš„è¿™ä¸ªå›¾ï¼Œåœ¨ç”±åˆæ³•ä»“åº“ç”Ÿæˆçš„æƒ…å†µä¸‹ï¼Œå¿…ç„¶æ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ã€‚</p><p>ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼Œä¹Ÿæ˜¯æœ‰è‡ªå·±çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰ç®—æ³•çš„ã€‚</p><p>åªæ˜¯ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>æˆ‘ä»¬çœŸçš„å¯¹ æœ€è¿‘å…¬å…±ç¥–å…ˆ è¿™ä¸ªç‰¹å®šçš„èŠ‚ç‚¹æ„Ÿå…´è¶£å—ï¼Ÿ</li><li>åœ¨æœ‰å¤šä¸ªä¸åŒè·¯å¾„çš„å…¬å…±ç¥–å…ˆçš„æƒ…å†µä¸‹ï¼Œåªæ±‚ä¸€ä¸ªæœ€è¿‘å…¬å…±ç¥–å…ˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p>æˆ‘ä»¬åªæ˜¯ä¸ºäº†è®¡ç®— ã€‚</p><ul><li><code>æ—§èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œå¯¹æ¯”<code>æ–°èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œç¼ºå°‘äº†å“ªäº›èŠ‚ç‚¹ã€‚</li></ul><p>é™¤æ­¤ä¹‹å¤–çš„ï¼Œæˆ‘ä»¬ä¸æ„Ÿå…´è¶£ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“å…¶å…¬å…±ç¥–å…ˆï¼Œä½†æ˜¯ï¼Œä¸å…³å¿ƒå®ƒæ˜¯ä¸æ˜¯æœ€è¿‘çš„ã€‚</p><p>å®ƒæ˜¯è¿‘çš„ä¹Ÿå¥½ï¼Œå®ƒæ˜¯è¿œçš„ä¹Ÿç½¢ï¼Œåªè¦æ˜¯å…¬å…±ç¥–å…ˆï¼Œéƒ½å¾—æŠ“èµ·æ¥ã€‚å»æ±‚æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œåœ¨æ ‘ç»“æ„ä¸‹ï¼Œå¯ä»¥è¿‘ä¼¼ç­‰ä»·äºæ±‚å…¶å…¨éƒ¨ç¥–å…ˆã€‚å› æ­¤å¯ä»¥ä½¿ç”¨è¯¥ç®—æ³•ã€‚</p><p>ä½†æ˜¯åœ¨æœ‰å‘æ— ç¯å›¾ä¸‹ï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆå°±æ˜¯ä¸ªåºŸç‰©ã€‚æ±‚å‡ºæ¥äº†åˆèƒ½å¦‚ä½•ï¼Ÿ</p><p>æ ¹æœ¬ä¸Šï¼Œè¿˜æ˜¯åº”è¯¥å»æ±‚å…¨éƒ¨çš„å…¬å…±ç¥–å…ˆã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½ç”¨æœ€ç›´æ¥çš„ç®—æ³•ã€‚</p><ul><li>è®¡ç®—å‡º<code>æ—§èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹</li><li>è®¡ç®—å‡º<code>æ–°èŠ‚ç‚¹</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹</li><li>æ£€æŸ¥<code>æ–°èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ç¼ºå°‘äº†å“ªäº›èŠ‚ç‚¹</li></ul><p>å¦‚ä½•è®¡ç®—ä»»æ„èŠ‚ç‚¹åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Ÿ</p><p>åœ¨ OI ä¸Šç†Ÿç»ƒäºéª—åˆ†å¯¼è®ºçš„åŒå­¦ä»¬ï¼Œåº”è¯¥å¾ˆè‡ªç„¶çš„å°±æ„è¯†åˆ°äº†</p><p><code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code></p><p>å½“ç„¶ï¼Œè¿™é‡Œè¡¥å……ä¸€ä¸‹ï¼Œç”±äº<code>æ ¹èŠ‚ç‚¹</code>çš„æ€§è´¨ï¼Œäº‹å®ä¸Šï¼Œæ— è®ºæ˜¯ä»å“ªä¸ªæ–¹å‘å‡ºå‘ï¼Œæ— è®ºèµ°é‚£æ¡è¾¹ï¼Œåªè¦æ˜¯èƒ½èµ°çš„è¾¹ï¼Œæœ€ç»ˆéƒ½ä¼šæŠµè¾¾<code>æ ¹èŠ‚ç‚¹</code></p><p>å› æ­¤ï¼Œåœ¨ä¸Šè¿°æ¡ä»¶æˆç«‹çš„åŸºç¡€ä¸Šï¼Œæ²¡æœ‰è®°å½•è·¯å¾„çŠ¶æ€çš„<code>å¹¿/å®½åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</code>ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚å› ä¸ºåœ¨å¿…ç„¶èƒ½æŠµè¾¾<code>æ ¹èŠ‚ç‚¹</code>çš„å‰æä¸‹ï¼Œå¯ä»¥å¿½ç•¥è·¯å¾„çŠ¶æ€ï¼Œä¸åšè·¯å¾„çš„å¯è¡Œæ€§åˆ¤æ–­ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸€å‰æï¼Œä¹Ÿæœ‰åˆ©äºæˆ‘ä»¬<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>è¿›è¡Œä¼˜åŒ–ã€‚</p><p>åœ¨æˆ‘ä»¬æ‰§è¡Œ<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰è®¿é—®åˆ°çš„èŠ‚ç‚¹ï¼Œå‡æ·»åŠ åˆ°é›†åˆä¸­ï¼Œè€Œæ— éœ€ç­‰å¾…ç¡®è®¤è¯¥èŠ‚ç‚¹èƒ½ç¡®å®æŠµè¾¾<code>æ ¹èŠ‚ç‚¹</code>åå†è¿›è¡Œæ·»åŠ ã€‚</p><p>å®é™…ä¸Šè¿™é‡Œåœ¨ä¸€ä¸ªé—®é¢˜ä¸Šæˆ‘ä»¬åˆä¼šå‡ºç°äº†ä¸¤ç§åˆ†æ­§ã€‚
é—®é¢˜æ˜¯ï¼Œå¦‚ä½•å°†ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°é›†åˆä¸­ã€‚æ–¹æ¡ˆæœ‰å¦‚ä¸‹ä¸¤ç§ã€‚</p><p>æŸ“è‰²æ³•ï¼šæ·»åŠ åˆ°é›†åˆä¸­çš„èŠ‚ç‚¹è¿›è¡ŒæŸ“è‰²ï¼Œæœªæ·»åŠ åˆ°é›†åˆä¸­çš„èŠ‚ç‚¹ä¸è¿›è¡ŒæŸ“è‰²ã€‚
é›†åˆæ³•ï¼šä½¿ç”¨å¹³è¡¡æ ‘ç®—æ³•å»ºç«‹ä¸€ä¸ªé›†åˆï¼Œå°†èŠ‚ç‚¹æ·»åŠ åˆ°è¯¥é›†åˆä¸­ã€‚</p><p>è¿™ä¸¤ç§ç®—æ³•å„æœ‰ä¼˜åŠ£ã€‚</p><ul><li>æŸ“è‰²æ³•çš„ä¼˜åŠ¿åœ¨äºï¼ŒæŸ“è‰²æ³•æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1) çš„ï¼Œå¿«å‡†ç‹ ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œé›†åˆæ³•æ·»åŠ ä¸€ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(n))ã€‚</li><li>é›†åˆæ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œé›†åˆæ³•éå†æ‰€æœ‰å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) çš„ï¼Œè€ŒæŸ“è‰²æ³•ä¸‹ï¼Œè¦éå†æ‰€æœ‰å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¼šæ˜¯ O(m)ï¼ŒåŒæ—¶é›†åˆæ³•å¯ä»¥é€šè¿‡è®¾è®¡ä¸€ä¸ªä¼˜ç§€çš„ hash ç®—æ³•ä»£æ›¿å¹³è¡¡æ ‘ï¼Œæ¥å°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°æ¥è¿‘ O(1).ï¼ˆè¿™é‡Œ n è¡¨ç¤ºé›†åˆå¤§å°ï¼Œm è¡¨ç¤ºæ•´ä¸ªå›¾çš„å¤§å°ï¼‰</li></ul><p>æˆ‘ä»¬è¿™é‡Œé€‰æ‹©ä½¿ç”¨é›†åˆæ³•ã€‚å®é™…ä¸Šè¿™ä¸¤ç§ç®—æ³•éƒ½å·®ä¸å¤šã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®—æ³•å®ç°">ç®—æ³•å®ç°<a class="hash-link" href="#ç®—æ³•å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>æ ¹æ®æäº¤å»ºå›¾</li><li>æˆ‘ä»¬å¯¹<code>æ—§èŠ‚ç‚¹</code>ä½¿ç”¨<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>è®¡ç®—å‡ºå…¶åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°<code>é›†åˆ A</code> ä¸­</li><li>æ¥ç€ï¼Œæˆ‘ä»¬å¯¹<code>æ–°èŠ‚ç‚¹</code>ä½¿ç”¨<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>è®¡ç®—å‡ºå…¶åˆ°<code>æ ¹èŠ‚ç‚¹</code>çš„å…¨éƒ¨è·¯å¾„æ‰€ç»èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°<code>é›†åˆ B</code></li><li>æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¼˜åŒ–ï¼Œè¿™ä¸ªä¼˜åŒ–æ˜¯å»ºç«‹åœ¨æˆ‘ä»¬çš„éœ€æ±‚ä¸Š</li><li>é‡å¤ä¸€éæˆ‘ä»¬çš„éœ€æ±‚</li><li>æˆ‘ä»¬åªå…³å¿ƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>ç¼ºå°‘äº†ä»€ä¹ˆï¼Œè€Œå¹¶ä¸å…³å¿ƒ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>å¤šå‡ºæ¥äº†ä»€ä¹ˆä¸œè¥¿ã€‚</li><li>å› æ­¤å½“å¯¹<code>æ–°èŠ‚ç‚¹</code>ä½¿ç”¨<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>æœç´¢åˆ°å·²ç»åœ¨<code>é›†åˆ A</code> ä¸­çš„èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥è®¤ä¸ºè¯¥èŠ‚ç‚¹å·²æœç´¢è¿‡ï¼Œæ— éœ€å†æ¬¡æœç´¢ã€‚</li><li>æ­¤æ—¶çš„<code>é›†åˆ B</code>ï¼Œå¯ä»¥æ°å¥½çš„é¿å¼€<code>é›†åˆ A</code> ä¸­å·²æœ‰çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œæ°å¥½å°±æ˜¯æˆ‘ä»¬æ‰€éœ€çš„ç»“æœã€‚</li></ul><p>æ ¸å¿ƒçš„è®¡ç®—ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oldGroup := make(map[string]*CommitNode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var dfs func(*CommitNode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// put all commit sha which can be depth-first-searched by old commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfs = func(now *CommitNode) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if _, ok = oldGroup[now.Sha]; ok {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oldGroup[now.Sha] = now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, node := range now.Parent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dfs(node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfs(oldCommitNode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var newGroup = make(map[string]*CommitNode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// put all commit sha which can be depth-first-searched by new commit, will stop when find any in either group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfs = func(now *CommitNode) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if _, ok = oldGroup[now.Sha]; ok {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if _, ok = newGroup[now.Sha]; ok {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    newGroup[now.Sha] = now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lostSha = append(lostSha, now.Sha)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _, node := range now.Parent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dfs(node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dfs(newCommitNode)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œçš„ lostSha å³ä¸ºæˆ‘ä»¬æœ€ç»ˆæ±‚å¾—çš„ç¼ºå¤±çš„éƒ¨åˆ†</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®—æ³•æ‰§è¡Œçš„æ¼”ç¤ºåŠ¨ç”»">ç®—æ³•æ‰§è¡Œçš„æ¼”ç¤ºåŠ¨ç”»<a class="hash-link" href="#ç®—æ³•æ‰§è¡Œçš„æ¼”ç¤ºåŠ¨ç”»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€é™‹çš„åŠ¨ç”»æ¥ç®€å•çš„æ¼”ç¤ºä¸€ä¸‹ï¼Œä¸Šè¿°ç®—æ³•åœ¨é€»è¾‘ä¸Šæ‰§è¡Œçš„æƒ…å†µã€‚</p><ul><li><code>æ—§èŠ‚ç‚¹</code>ä¸ºèŠ‚ç‚¹ <code>8</code></li><li><code>æ–°èŠ‚ç‚¹</code>ä¸ºèŠ‚ç‚¹ <code>9</code></li></ul><p><img loading="lazy" src="/zh/assets/images/dfs-3464f1398b150e893646c4f21e95ea10.gif" width="868" height="634" class="img_ev3q"></p><p>å¦‚ä¸Šè¿°<a href="https://devlake.apache.org/assets/images/dfs-3464f1398b150e893646c4f21e95ea10.gif" target="_blank" rel="noopener noreferrer">åŠ¨ç”»</a>æ‰€æ¼”ç¤ºçš„ä¸€èˆ¬
ä»èŠ‚ç‚¹ <code>8</code> å¼€å§‹æ‰§è¡Œ<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>åˆ°<code>æ ¹èŠ‚ç‚¹</code>ä¸­æ­¢
ä»èŠ‚ç‚¹ <code>9</code> å¼€å§‹æ‰§è¡Œ<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>åˆ°å·²ç»åœ¨èŠ‚ç‚¹ <code>8</code> çš„é›†åˆä¸­çš„èŠ‚ç‚¹ä¸ºæ­¢
æ­¤æ—¶ï¼Œåœ¨èŠ‚ç‚¹ <code>9</code> æ‰§è¡Œ<code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code>è¿‡ç¨‹ä¸­è¢«è®¿é—®åˆ°çš„æ‰€æœ‰éèŠ‚ç‚¹ <code>8</code> çš„èŠ‚ç‚¹</p><ul><li>èŠ‚ç‚¹ <code>3</code></li><li>èŠ‚ç‚¹ <code>6</code></li><li>èŠ‚ç‚¹ <code>7</code></li><li>èŠ‚ç‚¹ <code>9</code> </li></ul><p>å®ƒä»¬æ‰€å¯¹åº”çš„<code>æäº¤ç‰ˆæœ¬</code>å°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„å·®é›†</p><blockquote><p>æ­¤æ—¶æœ€çŸ­è·¯ä¸º <code>9</code> -&gt; <code>7</code> -&gt; <code>5</code> -&gt; <code>8</code>
æ­¤æ—¶æœ€è¿‘å…¬å…±çˆ¶èŠ‚ç‚¹ä¸º <code>5</code>ï¼Œåˆ°è¯¥èŠ‚ç‚¹çš„è·¯å¾„ä¸º <code>9</code> -&gt; <code>7</code> -&gt; <code>5</code>
ä»ä¸Šå›¾ä¸­ä¹Ÿå¯ä»¥ç›´è§‚çš„çœ‹åˆ°å¦‚æœä½¿ç”¨æœ€çŸ­è·¯ç®—æ³•ï¼Œæˆ–è€…æœ€è¿‘å…¬å…±çˆ¶èŠ‚ç‚¹ç®—æ³•çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•å¾—åˆ°æ­£ç¡®ç­”æ¡ˆçš„ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¶ç©ºå¤æ‚åº¦">æ—¶ç©ºå¤æ‚åº¦<a class="hash-link" href="#æ—¶ç©ºå¤æ‚åº¦" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è®¾<code>æäº¤ç‰ˆæœ¬</code>çš„æ€»å¤§å°ä¸º mï¼Œæ¯ä¸€ç»„<code>æºåˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>çš„å¹³å‡å¤§å°ä¸º nï¼Œä¸€å…±æœ‰ k ç»„æ•°æ®</p><p>DFS æ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ‰§è¡Œä¸€æ¬¡åŠ å…¥é›†åˆæ“ä½œã€‚æˆ‘ä»¬æŒ‰ç…§æˆ‘ä»¬å®é™…å®ç°ä¸­ä½¿ç”¨çš„ å¹³è¡¡æ ‘ç®—æ³•æ¥è®¡ç®— æ—¶é—´å¤æ‚åº¦ä¸º O(log(n))</p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—å‡º</p><ul><li>å»ºå›¾çš„æ—¶é—´å¤æ‚åº¦ï¼šO(m)</li><li>è®¡ç®—ä¸€ç»„<code>æºåˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>æ—¶é—´å¤æ‚åº¦ï¼šO(n<!-- -->*<!-- -->log(n))</li><li>è®¡ç®—æ‰€æœ‰<code>æºåˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>æ—¶é—´å¤æ‚åº¦ï¼šO(k<!-- -->*<!-- -->n<!-- -->*<!-- -->log(n))</li><li>è¯»å–ã€ç»Ÿè®¡ç»“æœæ—¶é—´å¤æ‚åº¦ï¼šO(k<!-- -->*<!-- -->n)</li><li>æ€»ä½“æ—¶é—´å¤æ‚åº¦ï¼šO(m + k<!-- -->*<!-- -->n<!-- -->*<!-- -->log(n))</li></ul><hr><ul><li>å›¾çš„ç©ºé—´å¤æ‚åº¦ï¼šO(m)</li><li>æ¯ç»„<code>æºåˆ†æ”¯/æ ‡ç­¾</code>å’Œ<code>ç›®æ ‡åˆ†æ”¯/æ ‡ç­¾</code>é›†åˆçš„ç©ºé—´å¤æ‚åº¦ï¼šO(n) ï¼ˆéå¹¶å‘æƒ…å†µä¸‹ï¼Œkç»„æ•°æ®å¯å…±ç”¨ï¼‰</li><li>æ€»ä½“ç©ºé—´å¤æ‚åº¦ï¼šO(m+n)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…³é”®è¯">å…³é”®è¯<a class="hash-link" href="#å…³é”®è¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><code>DevLake</code></li><li><code>CalculateCommitsDiff</code></li><li><code>ç®—æ³•</code></li><li><code>æ•°å­¦å»ºæ¨¡</code></li><li><code>è¯æ˜é€»è¾‘</code></li><li><code>å……åˆ†æ¡ä»¶</code></li><li><code>å¿…è¦æ¡ä»¶</code></li><li><code>å›¾è®º</code></li><li><code>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</code></li><li><code>å¹¿/å®½åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</code></li><li><code>æ—¶é—´å¤æ‚åº¦</code></li><li><code>ç©ºé—´å¤æ‚åº¦</code></li><li><code>æ—¶ç©ºå¤æ‚åº¦</code></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº†è§£æ›´å¤šæœ€æ–°åŠ¨æ€">äº†è§£æ›´å¤šæœ€æ–°åŠ¨æ€<a class="hash-link" href="#äº†è§£æ›´å¤šæœ€æ–°åŠ¨æ€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å®˜ç½‘ï¼š<a href="https://devlake.incubator.apache.org/" target="_blank" rel="noopener noreferrer">https://devlake.incubator.apache.org/</a></p><p>GitHubï¼š<a href="https://github.com/apache/incubator-devlake/" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake/</a></p><p>Slackï¼šé€šè¿‡ <a href="https://devlake-io.slack.com/join/shared_invite/zt-18uayb6ut-cHOjiYcBwERQ8VVPZ9cQQw#/shared-invite/email" target="_blank" rel="noopener noreferrer">Slack</a> è”ç³»æˆ‘ä»¬</p>]]></content>
        <author>
            <name>Nddtfjiang</name>
            <uri>http://nddtf.com/github</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="refdiff" term="refdiff"/>
        <category label="algorithm" term="algorithm"/>
        <category label="graph" term="graph"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache DevLake å…¼å®¹ PostgreSQL è¸©å‘å°ç»“]]></title>
        <id>some-practices-of-supporting-postgresql</id>
        <link href="https://devlake.apache.org/zh/blog/some-practices-of-supporting-postgresql"/>
        <updated>2022-06-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æœ¬æ–‡ä½œè€…ï¼šZhangLiang]]></summary>
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä½œè€…ï¼šZhangLiang<br>
<!-- -->ä¸ªäººä¸»é¡µï¼š<a href="https://github.com/mindlesscloud" target="_blank" rel="noopener noreferrer">https://github.com/mindlesscloud</a></p><p>Apache DevLake æ˜¯ä¸€ä¸ªç ”å‘æ•°æ®å¹³å°ï¼Œå¯ä»¥æ”¶é›†å’Œæ•´åˆå„ç±»ç ”å‘å·¥å…·çš„æ•°æ®ï¼Œæ¯”å¦‚ Jiraã€Githubã€Gitlabã€Jenkinsã€‚</p><p><strong>æœ¬æ–‡å¹¶ä¸æ‰“ç®—å¯¹æ•°æ®åº“å…¼å®¹è¿™ä¸ªé—®é¢˜åšå…¨é¢çš„æ€»ç»“ï¼Œåªæ˜¯å¯¹æˆ‘ä»¬å®é™…é‡åˆ°çš„é—®é¢˜åšä¸€ä¸ªè®°å½•ï¼Œå¸Œæœ›èƒ½å¯¹æœ‰ç›¸ä¼¼éœ€æ±‚çš„äººæä¾›ä¸€ä¸ªå‚è€ƒã€‚</strong></p><p><strong>1ã€æ•°æ®ç±»å‹å·®å¼‚</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql-ä¸æ”¯æŒ-uint-ç±»å‹çš„æ•°æ®ç±»å‹">PostgreSQL ä¸æ”¯æŒ uint ç±»å‹çš„æ•°æ®ç±»å‹<a class="hash-link" href="#postgresql-ä¸æ”¯æŒ-uint-ç±»å‹çš„æ•°æ®ç±»å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> JenkinsBuild </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NoPKModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JobName           </span><span class="token builtin">string</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">`gorm:"primaryKey;type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Duration          </span><span class="token builtin">float64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// build time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DisplayName       </span><span class="token builtin">string</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// "#7"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EstimatedDuration </span><span class="token builtin">float64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Number            </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"primaryKey;type:INT(10) UNSIGNED NOT NULL"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Result            </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Timestamp         </span><span class="token builtin">int64</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// start time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StartTime         time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token comment" style="color:#999988;font-style:italic">// convered by timestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CommitSha         </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­çš„<code>JenkinsBuild.Number</code>å­—æ®µçš„<code>gorm</code> struct tag ä½¿ç”¨äº†<code>UNSIGNED</code>ä¼šå¯¼è‡´å»ºè¡¨å¤±è´¥ï¼Œéœ€è¦å»æ‰ã€‚</p><p><img loading="lazy" src="/zh/assets/images/df2f9837-121e-4a64-976c-c5039d452bfd-f129f63a0aad6218d9040f3eb2917990.png" width="3730" height="236" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-æ²¡æœ‰-bool-å‹">MySQL æ²¡æœ‰ bool å‹<a class="hash-link" href="#mysql-æ²¡æœ‰-bool-å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äº model é‡Œå®šä¹‰ä¸º bool å‹çš„å­—æ®µï¼Œgorm ä¼šæŠŠå®ƒæ˜ å°„æˆ MySQL çš„ TINYINT ç±»å‹ï¼Œåœ¨ SQL é‡Œå¯ä»¥ç›´æ¥ç”¨ 0 æˆ–è€… 1 æŸ¥è¯¢ï¼Œä½†æ˜¯ PostgreSQL é‡Œæ˜¯æœ‰ bool ç±»å‹çš„ï¼Œæ‰€ä»¥ gorm ä¼šæŠŠå®ƒæ˜ å°„æˆ BOOL ç±»å‹ï¼Œå¦‚æœ SQL é‡Œè¿˜æ˜¯ç”¨çš„ 0 æˆ–è€… 1 å»æŸ¥è¯¢å°±ä¼šæŠ¥é”™ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼ˆä¸ºäº†æ¸…æ™°èµ·è§æˆ‘ä»¬åˆ æ‰äº†æ— å…³çš„å­—æ®µï¼‰ï¼Œä¸‹é¢çš„æŸ¥è¯¢è¯­å¥åœ¨ MySQL é‡Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨  PostgreSQL ä¸Šå°±ä¼šæŠ¥é”™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> GitlabMergeRequestNote </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MergeRequestId  </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:"index"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    System          </span><span class="token builtin">bool</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"merge_request_id = ? AND `system` = 0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gitlabMr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GitlabId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯­å¥æ”¹æˆè¿™æ ·åä»ç„¶ä¼šæœ‰é”™è¯¯ï¼Œå…·ä½“è¯·è§ä¸‹é¢å…³äºåå¼•å·çš„é—®é¢˜ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"merge_request_id = ? AND `system` = ?"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gitlabMr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GitlabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>2ã€è¡Œä¸ºå·®å¼‚</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰¹é‡æ’å…¥">æ‰¹é‡æ’å…¥<a class="hash-link" href="#æ‰¹é‡æ’å…¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦‚æœä½¿ç”¨äº†<code>ON CONFLIT UPDATE ALL</code>ä»å¥æ‰¹é‡æ’å…¥çš„æ—¶å€™ï¼Œæœ¬æ‰¹æ¬¡å¦‚æœæœ‰å¤šæ¡ä¸»é”®ç›¸åŒçš„è®°å½•ä¼šå¯¼è‡´ PostgreSQL æŠ¥é”™ï¼ŒMySQL åˆ™ä¸ä¼šã€‚</p><p><img loading="lazy" src="/zh/assets/images/efea0188-80e4-4519-a010-977a7fd5432e-24bf2c80d325f021cfb13cd26652aec9.png" width="3718" height="634" class="img_ev3q"></p><p><img loading="lazy" src="/zh/assets/images/7b2a6f29-ea2a-4a84-97c8-7eba5a5131a8-ecef21ecd88f5e7e73b4ba15818892d4.png" width="3712" height="184" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å­—æ®µç±»å‹-model-å®šä¹‰ä¸-schema-ä¸ä¸€è‡´">å­—æ®µç±»å‹ model å®šä¹‰ä¸ schema ä¸ä¸€è‡´<a class="hash-link" href="#å­—æ®µç±»å‹-model-å®šä¹‰ä¸-schema-ä¸ä¸€è‡´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¾‹å¦‚åœ¨ model å®šä¹‰ä¸­<code>GithubPullRequest.AuthorId</code>æ˜¯ int ç±»å‹ï¼Œä½†æ˜¯æ•°æ®åº“é‡Œè¿™ä¸ªå­—æ®µæ˜¯ VARCHAR ç±»å‹ï¼Œæ’å…¥æ•°æ®çš„æ—¶å€™ MySQL æ˜¯å…è®¸çš„ï¼ŒPostgreSQL åˆ™ä¼šæŠ¥é”™ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> GithubPullRequest </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GithubId        </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:"primaryKey"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RepoId          </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:"index"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Number          </span><span class="token builtin">int</span><span class="token plain">    </span><span class="token string" style="color:#e3116c">`gorm:"index"`</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    State           </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Title           </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GithubCreatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GithubUpdatedAt time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token string" style="color:#e3116c">`gorm:"index"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClosedAt        </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// In order to get the following fields, we need to collect PRs individually from GitHub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Additions      </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Deletions      </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Comments       </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Commits        </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ReviewComments </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Merged         </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MergedAt       </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Body           </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type           </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Component      </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MergeCommitSha </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(40)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HeadRef        </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BaseRef        </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BaseCommitSha  </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HeadCommitSha  </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Url            </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(255)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthorName     </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`gorm:"type:varchar(100)"`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AuthorId       </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NoPKModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/zh/assets/images/8afb097c-a0b3-4bdc-80f3-7241c3fa566f-05d6a3d073455a2d728f33dedce09593.png" width="3718" height="224" class="img_ev3q"></p><p><strong>3ã€MySQL ç‰¹æœ‰çš„å‡½æ•°</strong></p><p>åœ¨ä¸€ä¸ªå¤æ‚æŸ¥è¯¢ä¸­æˆ‘ä»¬æ›¾ç»ä½¿ç”¨äº† <code>GROUP_CONCAT</code> å‡½æ•°ï¼Œè™½ç„¶ PostgreSQL ä¸­æœ‰åŠŸèƒ½ç±»ä¼¼çš„å‡½æ•°ä½†æ˜¯å‡½æ•°åä¸åŒï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿæœ‰ç»†å¾®å·®åˆ«ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cursor2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pull_requests pr1"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Joins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"left join pull_requests pr2 on pr1.parent_pr_id = pr2.id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Group</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pr1.parent_pr_id, pr2.created_date"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pr1.parent_pr_id != ''"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Joins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"left join repos on pr2.base_repo_id = repos.id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"pr2.created_date ASC"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">Select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">`pr2.key as parent_pr_key, pr1.parent_pr_id as parent_pr_id, GROUP_CONCAT(pr1.base_ref order by pr1.base_ref ASC) as cherrypick_base_branches, </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            GROUP_CONCAT(pr1.key order by pr1.base_ref ASC) as cherrypick_pr_keys, repos.name as repo_name, </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            concat(repos.url, '/pull/', pr2.key) as parent_pr_url`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Rows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£å†³æ–¹æ¡ˆï¼š
æˆ‘ä»¬æœ€ç»ˆå†³å®šæŠŠ<code>GROUP_CONCAT</code>å‡½æ•°çš„åŠŸèƒ½æ‹†åˆ†æˆä¸¤æ­¥ï¼Œå…ˆç”¨æœ€ç®€å•çš„ SQL æŸ¥è¯¢å¾—åˆ°æ’åºå¥½çš„å¤šæ¡æ•°æ®ï¼Œç„¶åç”¨ä»£ç åšèšåˆã€‚</p><p>ä¿®æ”¹åï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cursor2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            SELECT pr2.pull_request_key                 AS parent_pr_key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   pr1.parent_pr_id                     AS parent_pr_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   pr1.base_ref                         AS cherrypick_base_branch,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   pr1.pull_request_key                 AS cherrypick_pr_key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   repos.NAME                           AS repo_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   Concat(repos.url, '/pull/', pr2.pull_request_key) AS parent_pr_url,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   pr2.created_date</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            FROM   pull_requests pr1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   LEFT JOIN pull_requests pr2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                          ON pr1.parent_pr_id = pr2.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                   LEFT JOIN repos</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                          ON pr2.base_repo_id = repos.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            WHERE  pr1.parent_pr_id != ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            ORDER  BY pr1.parent_pr_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                      pr2.created_date,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                      pr1.base_ref ASC</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            `</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Rows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4ã€è¯­æ³•å·®å¼‚</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åå¼•å·">åå¼•å·<a class="hash-link" href="#åå¼•å·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŸäº› SQL è¯­å¥ä¸­æˆ‘ä»¬ä½¿ç”¨äº†åå¼•å·ï¼Œç”¨æ¥ä¿æŠ¤å­—æ®µåï¼Œä»¥å…è·Ÿ MySQL ä¿ç•™å­—æœ‰å†²çªï¼Œè¿™ç§åšæ³•åœ¨ PostgreSQL ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬é‡æ–°å®¡è§†äº†æˆ‘ä»¬çš„ä»£ç ï¼ŒæŠŠæ‰€æœ‰è·Ÿä¿ç•™å­—å†²çªçš„å­—æ®µååšäº†ä¿®æ”¹ï¼ŒåŒæ—¶å»æ‰äº† SQL è¯­å¥ä¸­çš„åå¼•å·ã€‚ä¾‹å¦‚åˆšæ‰æåˆ°çš„è¿™ä¸ªä¾‹å­ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"merge_request_id = ? AND `system` = ?"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gitlabMr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GitlabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£å†³æ–¹æ¡ˆï¼šæˆ‘ä»¬æŠŠ<code>system</code>æ”¹ä¸ªåå­—<code>is_system</code>ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠåå¼•å·å»æ‰ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"merge_request_id = ? AND is_system = ?"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gitlabMr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GitlabId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸è§„èŒƒçš„åˆ é™¤è¯­å¥">ä¸è§„èŒƒçš„åˆ é™¤è¯­å¥<a class="hash-link" href="#ä¸è§„èŒƒçš„åˆ é™¤è¯­å¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘ä»¬çš„ä»£ç ä¸­æ›¾ç»å‡ºç°è¿‡è¿™ç§åˆ é™¤è¯­å¥ï¼Œè¿™åœ¨ MySQL ä¸­æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯åœ¨ PostgreSQL ä¸­ä¼šæŠ¥è¯­æ³•é”™è¯¯ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Exec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    DELETE ic</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    FROM jira_issue_commits ic</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    LEFT JOIN jira_board_issues bi ON (bi.source_id = ic.source_id AND bi.issue_id = ic.issue_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    WHERE ic.source_id = ? AND bi.board_id = ?</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    `</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sourceId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> boardId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è§£å†³æ–¹æ¡ˆï¼šæˆ‘ä»¬æŠŠ<code>DELETE</code>åé¢çš„è¡¨åˆ«åå»æ‰å°±å¯ä»¥äº†ã€‚</p><p><strong>äº†è§£æ›´å¤šæœ€æ–°åŠ¨æ€</strong></p><p>å®˜ç½‘ï¼š<a href="https://devlake.incubator.apache.org/" target="_blank" rel="noopener noreferrer">https://devlake.incubator.apache.org/</a></p><p>GitHubï¼š<a href="https://github.com/apache/incubator-devlake/" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake/</a></p><p>Slackï¼šé€šè¿‡ <a href="https://devlake-io.slack.com/join/shared_invite/zt-18uayb6ut-cHOjiYcBwERQ8VVPZ9cQQw#/shared-invite/email" target="_blank" rel="noopener noreferrer">Slack</a> è”ç³»æˆ‘ä»¬</p>]]></content>
        <author>
            <name>ZhangLiang</name>
            <uri>https://github.com/mindlesscloud</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="database" term="database"/>
        <category label="postgresql" term="postgresql"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[How DevLake is Up and Running]]></title>
        <id>how-DevLake-is-up-and-running</id>
        <link href="https://devlake.apache.org/zh/blog/how-DevLake-is-up-and-running"/>
        <updated>2022-06-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Apache DevLake is an integration tool with the DevOps data collection functionality, which presents a different stage of data to development teams via Grafana. which also can leverage teams to improve the development process with a data-driven model.]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/apache/incubator-devlake" target="_blank" rel="noopener noreferrer">Apache DevLake</a> is an integration tool with the DevOps data collection functionality, which presents a different stage of data to development teams via Grafana. which also can leverage teams to improve the development process with a data-driven model.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-devlack-architecture-overview">Apache DevLack Architecture Overview<a class="hash-link" href="#apache-devlack-architecture-overview" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>The left side of the following screenshot is an <a href="https://devlake.apache.org/docs/DataModels/DataSupport" target="_blank" rel="noopener noreferrer">integrative DevOps data plugin</a>, the existing plugins include Github, GitLab, JIRA, Jenkins, Tapd, Feishu, and the most featured analysis engine in the Simayi platform.</li><li>The main framework in the middle of the following screenshot, completes data collection, expansion, and conversion to the domain layer by running subtasks in the plugins. The user can trigger the tasks by config-UI or all API.</li><li>RMDBS currently supports Mysql and PostgresSQL, more databases will be supported in the future.</li><li>Grafana can generate different types of needed data by using SQL.</li></ul><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.001-9fe996eee294ce1843bc3f126a1a7b89.png" width="567" height="310" class="img_ev3q"></p><blockquote><p>Then letâ€™s move on to how to start running DevLake.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-system">Start the system<a class="hash-link" href="#start-the-system" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Before the Golang program runs, it will automatically call the init() method in the package. We need to focus on the loading of the services package. The following code has detailed comments:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get initial config information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get Database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> runner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewGormDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Nested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"db"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// configure time zone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> cron</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UTC</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// create scheduled task manager</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cronManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cron</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// initialize the data migration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">migration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// register the framework's data migration scripts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">migrationscripts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RegisterAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load plugin, loads all .so files in the folder cfg.GetString("PLUGIN_DIR")ï¼Œin th LoadPlugins method()ï¼Œspecifically, LoadPlugins stores the pluginName:PluginMeta key-value pair into core.plugins by calling runner.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> runner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LoadPlugins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"PLUGIN_DIR"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Nested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"plugin"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// run data migration scripts to complete the initializztion work of tables in the databse framework layer.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> migration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// call service init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">pipelineServiceInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-execution-principle-of-devlake">The execution principle of DevLake<a class="hash-link" href="#the-execution-principle-of-devlake" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>The running process of the pipeline</strong>
Before we go through the pipeline process, we need to know the <a href="https://devlake.apache.org/docs/Glossary#blueprints" target="_blank" rel="noopener noreferrer">Blueprint</a> first.</p><p>Blueprint is a timed task that contains all the subtasks and plans that need to be executed. Each execution record of Blueprint is a historical run, AKA Pipeline. Which presents a trigger for DevLack to complete one or more data collection transformation tasks through one or more plugins.</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.002-40065677c2b00df89eeaac1d9512f286.png" width="567" height="263" class="img_ev3q"></p><p>The following is the pipeline running flow chart.</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.003-74567cb3674a6e2d6c980cc4c4182217.png" width="664" height="1106" class="img_ev3q"></p><p>A pipeline contains a two-dimensional array of tasks, mainly to ensure that a series of tasks are executed in a preset order. Like the following screenshot if the plugin of Stage 3 needs to rely on the other plugin to prepare the data(eg: the operation of refdiff needs to rely on gitextractor and Github, for more information on data sources and plugins, please refer to the <a href="https://devlake.apache.org/docs/DataModels/DataSupport" target="_blank" rel="noopener noreferrer">documentation</a>, then when Stage 3 starts to execute, it needs to ensure that its dependencies have been executed in Stage 1 and Stage 2.</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.004-a6a550c4f00b232abc7b28e30738be09.png" width="567" height="238" class="img_ev3q"></p><p><strong>Task running process</strong></p><p>The plugin tasks in stage1, stage2, and stage3 are executed in parallel:</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.005-d300a6d714d498f9097b571e386d4acf.png" width="664" height="1036" class="img_ev3q"></p><p><strong>The next step is to execute the subtasks in the plugin sequentially.</strong></p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.006-7ad36df1d8f947cba6e34c8e3c54cf25.png" width="760" height="1294" class="img_ev3q"></p><ol><li>The work before the RunTask is to prepare the params for the RunTask method to call, like logger, db, context and etc.</li><li>The main method of RunTask is mainly to update the tasks in the Database, at the same time prepare to run the options of the plugins task.</li><li>RunpluginTask will obtain the corresponding  <a href="#pm">PluginMeta</a> through core.Getplugin(pluginName), then obtains the <a href="#pt">PluginTask</a> via PluginMeta, and then executes RunPluginSubTasks.</li></ol><p><strong>The running process of each plugin subtask(the relevant interface and func will be explained in the next section)</strong></p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.007-f26dbf5692430e807fb782d9233f53f3.png" width="1586" height="600" class="img_ev3q"></p><ol><li>Get all available subtasks subtaskMeta of all th4e plugins by calling SubTaskMetas().</li><li>Use options<!-- -->[â€˜taskâ€™]<!-- --> and subtaskMeta to form a set of subtasks to be executed subtaskMetas.</li><li>Calculate how many subtasks in total</li><li>Build taskCtx via helper.NewDefaultTaskContext.</li><li>Build taskData via call pluginTask.PrepareTaskData.</li><li>Iterate over all subtasks in subtaskMetas.<ol><li>Get subtaskCtx of subtask via call taskCtx.SubTaskContext(subtaskMeta.Name).</li><li>Run subtaskMeta.EntryPoint(subtaskCtx)</li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-interfaces-in-devlake">Important interfaces in DevLake<a class="hash-link" href="#important-interfaces-in-devlake" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li><a id="pm">PluginMeta</a>: Contains the two basic methods of plugins, which all plugins need to implement. And stored in core.plugins when the system starts. And obtained through core.GetPlugin when executing plugin tasks.</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> PluginMeta </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">Description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//PkgPath information will be lost when compiled as plugin(.so), this func will return that info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">RootPkgPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><a id="pt">PluginTask</a>: It can be obtained by PluginMeta, after the plugin implemented this method, Framework can run the subtask directly, instead of letting the plugin itself run it, the biggest benefit of this is that the subtasks of the plugin are easier to implement, and we can more easily leverage(such as adding logs, etc.) during the operation of the plugin.</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> PluginTask </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// return all available subtasks, framework will run them for you in order</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">SubTaskMetas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">SubTaskMeta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// based on task context and user input options, return data that shared among all subtasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">PrepareTaskData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskCtx TaskContext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Every plugin has a <a id="td">taskData</a>, which contains configuration options, apiClient, and other properties of plugins.(like the github has repo information)</li><li><a id="stm">SubTaskMeta</a>:: the meta data of a subtask, every subtask will define a SubTaskMeta.</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> CollectMeetingTopUserItemMeta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SubTaskMeta</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"collectMeetingTopUserItem"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   EntryPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CollectMeetingTopUserItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   EnabledByDefault</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Collect top user meeting data from Feishu api"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li><a id="ec">ExecContext</a>: defines all resources needed to execute (sub)tasks.</li><li><a id="stc">SubTaskContext</a>: defines all resources need to execute subtask(including ExecContext).</li><li><a id="tc">TaskContext</a>: defines all resources need to execute tasks(including ExecContext). The difference with SubTaskContext is the TaskContext() method in SubTaskContext can retire TaskContext, but SubTaskContext(subtask string) method in TaskContext can return SubTaskContext, which means the subtask belongs to the plugin task, so we use the different contexts to distinguish this.</li><li><a id="step">SubTaskEntryPoint</a>: all the subtasks in the plugin have to implement this function so that they can be coordinated and arranged by the framework layer.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-plan">Further Plan<a class="hash-link" href="#further-plan" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>This blog introduced the basics of the DevLack framework and how it starts and runs, there are 3 more contexts api<!-- -->_<!-- -->collector, api<!-- -->_<!-- -->extractor, and data<!-- -->_<!-- -->convertor will be explained in the next blog.</p>]]></content>
        <author>
            <name>Danna Wang</name>
            <uri>https://github.com/banshengbushu</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="apache" term="apache"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache DevLakeä»£ç åº“å¯¼è§ˆ]]></title>
        <id>apache-devlake-codebase-walkthrough</id>
        <link href="https://devlake.apache.org/zh/blog/apache-devlake-codebase-walkthrough"/>
        <updated>2022-06-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Apache DevLakeæ˜¯ä»€ä¹ˆï¼Ÿ]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-devlakeæ˜¯ä»€ä¹ˆ">Apache DevLakeæ˜¯ä»€ä¹ˆï¼Ÿ<a class="hash-link" href="#apache-devlakeæ˜¯ä»€ä¹ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç ”å‘æ•°æ®æ•£è½åœ¨è½¯ä»¶ç ”å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µã€ä¸åŒå·¥ä½œæµã€ä¸åŒDevOpså·¥å…·ä¸­ï¼Œä¸”æ ‡å‡†åŒ–ç¨‹åº¦ä½ï¼Œå¯¼è‡´æ•ˆèƒ½æ•°æ®éš¾ä»¥ç•™å­˜ã€æ±‡é›†å¹¶è½¬åŒ–ä¸ºæœ‰æ•ˆæ´è§ã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œ<a href="https://github.com/apache/incubator-devlake" target="_blank" rel="noopener noreferrer">Apache DevLake</a> åº”è¿è€Œç”Ÿã€‚Apache DevLakeæ˜¯ä¸€æ¬¾å¼€æºçš„ç ”å‘æ•°æ®å¹³å°ï¼Œå®ƒé€šè¿‡æä¾›è‡ªåŠ¨åŒ–ã€ä¸€ç«™å¼çš„æ•°æ®æ”¶é›†ã€åˆ†æä»¥åŠå¯è§†åŒ–èƒ½åŠ›ï¼Œå¸®åŠ©ç ”å‘å›¢é˜Ÿæ›´å¥½åœ°ç†è§£å¼€å‘è¿‡ç¨‹ï¼ŒæŒ–æ˜å…³é”®ç“¶é¢ˆä¸ææ•ˆæœºä¼šã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-devlakeæ¶æ„æ¦‚è¿°">Apache DevLakeæ¶æ„æ¦‚è¿°<a class="hash-link" href="#apache-devlakeæ¶æ„æ¦‚è¿°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="img" src="/zh/assets/images/Architecture_Diagram-f52640e8c40d052f526ed8283e2833e5.png" width="1262" height="641" class="img_ev3q"></p><center>Apache DevLake æ¶æ„å›¾</center><br><ul><li>Config UI: äººå¦‚å…¶åï¼Œé…ç½®çš„å¯è§†åŒ–ï¼Œå…¶ä¸»è¦æ‰¿è½½Apache DevLakeçš„é…ç½®å·¥ä½œã€‚é€šè¿‡Config UIï¼Œç”¨æˆ·å¯ä»¥å»ºç«‹æ•°æ®æºè¿æ¥ï¼Œå¹¶å®ç°æ•°æ®çš„æ”¶é›†èŒƒå›´ï¼Œéƒ¨åˆ†æ•°æ®çš„è½¬æ¢è§„åˆ™ï¼Œä»¥åŠæ”¶é›†é¢‘ç‡ç­‰ä»»åŠ¡ã€‚</li><li>Api Severï¼šApache DevLakeçš„Apiæ¥å£ï¼Œæ˜¯å‰ç«¯è°ƒç”¨åç«¯æ•°æ®çš„é€šé“ã€‚</li><li>Runnerï¼šApache DevLakeè¿è¡Œçš„åº•å±‚æ”¯æ’‘æœºåˆ¶ã€‚</li><li>Pluginsï¼šå…·ä½“æ‰§è¡Œçš„æ’ä»¶ä¸šåŠ¡ï¼Œä¸»è¦æ‰¿è½½Apache DevLakeçš„åç«¯æ•°æ®æ”¶é›†ã€æ‰©å±•å’Œè½¬æ¢çš„å·¥ä½œã€‚é™¤dbtæ’ä»¶å¤–çš„æ’ä»¶äº§å‡ºApache DevLakeçš„é¢„ç½®æ•°æ®ï¼Œé¢„ç½®æ•°æ®ä¸»è¦åŒ…æ‹¬ä¸‰å±‚ï¼›<ul><li>raw layerï¼šè´Ÿè´£å‚¨å­˜æœ€åŸå§‹çš„api response jsonã€‚</li><li>tool layerï¼šæ ¹æ®raw layeræå–å‡ºæ­¤æ’ä»¶æ‰€éœ€çš„æ•°æ®ã€‚</li><li>domain layerï¼šæ ¹æ®tool layerå±‚æŠ½è±¡å‡ºå…±æ€§çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šè¢«ä½¿ç”¨åœ¨Grafanaå›¾è¡¨ä¸­ï¼Œç”¨äºå¤šç§ç ”å‘æŒ‡æ ‡çš„å±•ç¤ºã€‚</li></ul></li><li>RDBS: å…³ç³»å‹æ•°æ®åº“ã€‚ç›®å‰Apache DavLakeæ”¯æŒMySQLå’ŒPostgreSQLï¼ŒåæœŸè¿˜ä¼šç»§ç»­æ”¯æŒæ›´å¤šçš„æ•°æ®åº“ã€‚</li><li>Grafana Dashboards: å…¶ä¸»è¦æ‰¿è½½Apache DevLakeçš„å‰ç«¯å±•ç¤ºå·¥ä½œã€‚æ ¹æ®Apache DevLakeæ”¶é›†çš„æ•°æ®ï¼Œé€šè¿‡sqlè¯­å¥æ¥ç”Ÿæˆå›¢é˜Ÿéœ€è¦çš„äº¤ä»˜æ•ˆç‡ã€è´¨é‡ã€æˆæœ¬ã€èƒ½åŠ›ç­‰å„ç§ç ”å‘æ•ˆèƒ½æŒ‡æ ‡ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç›®å½•ç»“æ„tree">ç›®å½•ç»“æ„Tree<a class="hash-link" href="#ç›®å½•ç»“æ„tree" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ blueprints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ domainlayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ ping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ pipelines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ shared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ config-ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ devops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ lake-builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ e2e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ _archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ dashboards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ provisioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â”œâ”€â”€ dashboards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â””â”€â”€ datasources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ logger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ domainlayer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ crossdomain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ devops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ didgen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ ticket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ ae</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ dbt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ feishu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ apimodels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ gitextractor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ parser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ github</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ gitlab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ e2e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ impl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ helper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ jenkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ jira</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp;     â””â”€â”€ apiv2models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ refdiff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â”œâ”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ tapd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â”œâ”€â”€ models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â”‚&nbsp;&nbsp; â””â”€â”€ migrationscripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â”‚&nbsp;&nbsp;     â””â”€â”€ archived</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp;     â””â”€â”€ tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ releases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ lake-v0.10.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ lake-v0.10.0-beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ lake-v0.10.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ lake-v0.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ lake-v0.8.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ lake-v0.9.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ runner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â”‚&nbsp;&nbsp; â””â”€â”€ task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚&nbsp;&nbsp; â””â”€â”€ example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ testhelper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docker-compose.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docker-compose-temporal.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ k8s-deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ .env.exemple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç›®å½•å¯¼è§ˆ">ç›®å½•å¯¼è§ˆ<a class="hash-link" href="#ç›®å½•å¯¼è§ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>åç«¯éƒ¨åˆ†ï¼š<ul><li>configï¼šå¯¹.envé…ç½®æ–‡ä»¶çš„è¯»ã€å†™ä»¥åŠä¿®æ”¹çš„æ“ä½œã€‚</li><li>loggerï¼šlogæ—¥å¿—çš„levelã€formatç­‰è®¾ç½®ã€‚</li><li>errorsï¼šErrorçš„å®šä¹‰ã€‚</li><li>utilsï¼šå·¥å…·åŒ…ï¼Œå®ƒåŒ…å«ä¸€äº›åŸºç¡€é€šç”¨çš„å‡½æ•°ã€‚</li><li>runnerï¼šæä¾›åŸºç¡€æ‰§è¡ŒæœåŠ¡ï¼ŒåŒ…æ‹¬æ•°æ®åº“ï¼Œcmdï¼Œpipelinesï¼Œtasksä»¥åŠåŠ è½½ç¼–è¯‘åçš„æ’ä»¶ç­‰åŸºç¡€æœåŠ¡ã€‚</li><li>modelsï¼šå®šä¹‰æ¡†æ¶çº§åˆ«çš„å®ä½“ã€‚<ul><li>commonï¼šåŸºç¡€structå®šä¹‰ã€‚</li><li><a href="https://devlake.apache.org/docs/DataModels/DevLakeDomainLayerSchema" target="_blank" rel="noopener noreferrer">domainlayer</a>ï¼šé¢†åŸŸå±‚æ˜¯æ¥è‡ªä¸åŒå·¥å…·æ•°æ®çš„é€šç”¨æŠ½è±¡ã€‚<ul><li>ticketï¼šIssue Trackingï¼Œå³é—®é¢˜è·Ÿè¸ªé¢†åŸŸã€‚</li><li>codeï¼šåŒ…æ‹¬Source Codeæºä»£ç å…³è”é¢†åŸŸã€‚ä»¥åŠCode Reviewä»£ç å®¡æŸ¥é¢†åŸŸã€‚</li><li>devopsï¼šCI/CDï¼Œå³æŒç»­é›†æˆã€æŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²é¢†åŸŸã€‚</li><li>crossdomainï¼šè·¨åŸŸå®ä½“ï¼Œè¿™äº›å®ä½“ç”¨äºå…³è”ä¸åŒé¢†åŸŸä¹‹é—´çš„å®ä½“ï¼Œè¿™æ˜¯å»ºç«‹å…¨æ–¹é¢åˆ†æçš„åŸºç¡€ã€‚</li><li>userï¼šå¯¹ç”¨æˆ·çš„æŠ½è±¡é¢†åŸŸï¼Œuserä¹Ÿå±äºcrossdomainèŒƒç•´ã€‚</li></ul></li><li>migrationscriptsï¼šåˆå§‹åŒ–å¹¶æ›´æ–°æ•°æ®åº“ã€‚</li></ul></li><li>pluginsï¼š<ul><li>coreï¼šæ’ä»¶é€šç”¨æ¥å£çš„å®šä¹‰ä»¥åŠç®¡ç†ã€‚</li><li>helperï¼šæ’ä»¶é€šç”¨å·¥å…·çš„é›†åˆï¼Œæä¾›æ’ä»¶æ‰€éœ€è¦çš„è¾…åŠ©ç±»ï¼Œå¦‚apiæ”¶é›†ï¼Œæ•°æ®ETLï¼Œæ—¶é—´å¤„ç†ç­‰ã€‚<ul><li>ç½‘ç»œè¯·æ±‚Api Clientå·¥å…·ã€‚</li><li>æ”¶é›†æ•°æ®Collectorè¾…åŠ©ç±»ï¼Œæˆ‘ä»¬åŸºäºapiç›¸åŒçš„å¤„ç†æ¨¡å¼ï¼Œç»Ÿä¸€äº†å¹¶å‘ï¼Œé™é€Ÿä»¥åŠé‡è¯•ç­‰åŠŸèƒ½ï¼Œæœ€ç»ˆå®ç°äº†ä¸€å¥—é€šç”¨çš„æ¡†æ¶ï¼Œæå¤§åœ°å‡å°‘äº†å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚</li><li>æå–æ•°æ®Extractorè¾…åŠ©ç±»ï¼ŒåŒæ—¶ä¹Ÿå†…å»ºäº†æ‰¹é‡å¤„ç†æœºåˆ¶ã€‚</li><li>è½¬æ¢æ•°æ®Convertorè¾…åŠ©ç±»ã€‚</li><li>æ•°æ®åº“å¤„ç†å·¥å…·ã€‚</li><li>æ—¶é—´å¤„ç†å·¥å…·ã€‚</li><li>å‡½æ•°å·¥å…·ã€‚</li></ul></li><li>aeï¼šåˆ†æå¼•æ“ï¼Œç”¨äºå¯¼å…¥merico aeåˆ†æå¼•æ“çš„æ•°æ®ã€‚</li><li>feishuï¼šæ”¶é›†é£ä¹¦æ•°æ®ï¼Œç›®å‰ä¸»è¦æ˜¯è·å–ä¸€æ®µæ—¶é—´å†…ç»„ç»‡å†…ä¼šè®®ä½¿ç”¨çš„topç”¨æˆ·åˆ—è¡¨çš„æ•°æ®ã€‚</li><li>githubï¼šæ”¶é›†Githubæ•°æ®å¹¶è®¡ç®—ç›¸å…³æŒ‡æ ‡ã€‚ï¼ˆå…¶ä»–çš„å¤§éƒ¨åˆ†æ’ä»¶çš„ç›®å½•ç»“æ„å’Œå®ç°åŠŸèƒ½å’Œgithubå¤§åŒå°å¼‚ï¼Œè¿™é‡Œä»¥githubä¸ºä¾‹æ¥ä»‹ç»ï¼‰ã€‚<ul><li>github.goï¼šgithubå¯åŠ¨å…¥å£ã€‚</li><li>tasksï¼šå…·ä½“æ‰§è¡Œçš„4ç±»ä»»åŠ¡ã€‚<ul><li>*_collector.goï¼šæ”¶é›†æ•°æ®åˆ°raw layerå±‚ã€‚</li><li>*_extractor.goï¼šæå–æ‰€éœ€çš„æ•°æ®åˆ°tool layerå±‚ã€‚</li><li>*_convertor.goï¼šè½¬æ¢æ‰€éœ€çš„æ•°æ®åˆ°domain layerå±‚ã€‚</li><li>*_enricher.goï¼šdomain layerå±‚æ›´è¿›ä¸€æ­¥çš„æ•°æ®è®¡ç®—è½¬æ¢ã€‚</li></ul></li><li>modelsï¼šå®šä¹‰githubå¯¹åº”å®ä½“entityã€‚</li><li>apiï¼šapiæ¥å£ã€‚</li><li>utilsï¼šgithubæå–çš„ä¸€äº›åŸºæœ¬é€šç”¨å‡½æ•°ã€‚</li></ul></li><li>gitextractorï¼šgitæ•°æ®æå–å·¥å…·ï¼Œè¯¥æ’ä»¶å¯ä»¥ä»è¿œç«¯æˆ–æœ¬åœ°gitä»“åº“æå–commitå’Œreferenceä¿¡æ¯ï¼Œå¹¶ä¿å­˜åˆ°æ•°æ®åº“æˆ–csvæ–‡ä»¶ã€‚ç”¨æ¥ä»£æ›¿githubæ’ä»¶æ”¶é›†commitä¿¡æ¯ä»¥å‡å°‘apiè¯·æ±‚çš„æ•°é‡ï¼Œæé«˜æ”¶é›†é€Ÿåº¦ã€‚</li><li>refdiffï¼šåœ¨åˆ†æå¼€å‘å·¥ä½œäº§ç”Ÿä»£ç é‡æ—¶ï¼Œç»å¸¸éœ€è¦çŸ¥é“ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„diffã€‚æœ¬æ’ä»¶åŸºäºæ•°æ®åº“ä¸­å­˜å‚¨çš„commitsçˆ¶å­å…³ç³»ä¿¡æ¯ï¼Œæä¾›äº†è®¡ç®—ref(branch/tag)ä¹‹é—´ç›¸å·®commitsåˆ—è¡¨çš„èƒ½åŠ›ã€‚</li><li>gitlabï¼šæ”¶é›†Gitlabæ•°æ®å¹¶è®¡ç®—ç›¸å…³æŒ‡æ ‡ã€‚</li><li>jenkinsï¼šæ”¶é›†jenkinsçš„buildå’Œjobç›¸å…³æŒ‡æ ‡ã€‚</li><li>jiraï¼šæ”¶é›†jiraæ•°æ®å¹¶è®¡ç®—ç›¸å…³æŒ‡æ ‡ã€‚</li><li>tapdï¼šæ”¶é›†tapdæ•°æ®å¹¶è®¡ç®—ç›¸å…³æŒ‡æ ‡ã€‚</li><li>dbtï¼š(data build tool)æ˜¯ä¸€æ¬¾æµè¡Œçš„å¼€æºæ•°æ®è½¬æ¢å·¥å…·ï¼Œèƒ½å¤Ÿé€šè¿‡SQLå®ç°æ•°æ®è½¬åŒ–ï¼Œå°†å‘½ä»¤è½¬åŒ–ä¸ºè¡¨æˆ–è€…è§†å›¾ï¼Œæå‡æ•°æ®åˆ†æå¸ˆçš„å·¥ä½œæ•ˆç‡ã€‚Apache DevLakeå¢åŠ äº†dbtæ’ä»¶ï¼Œç”¨äºæ•°æ®å®šåˆ¶çš„éœ€è¦ã€‚</li></ul></li><li>servicesï¼šåˆ›å»ºã€ç®¡ç†Apache DevLakeå„ç§æœåŠ¡ï¼ŒåŒ…å«notificationsã€blueprintsã€pipelinesã€tasksã€pluginsç­‰ã€‚</li><li>apiï¼šä½¿ç”¨Ginæ¡†æ¶æ­å»ºçš„ä¸€ä¸ªé€šç”¨Apache DevLake APIæœåŠ¡ã€‚</li></ul></li><li>å‰ç«¯éƒ¨åˆ†ï¼š<ul><li>congfig-uiï¼šä¸»è¦æ˜¯Apache DevLakeçš„æ’ä»¶é…ç½®ä¿¡æ¯çš„å¯è§†åŒ–ã€‚<a href="https://devlake.apache.org/docs/Glossary" target="_blank" rel="noopener noreferrer">ä¸€äº›æœ¯è¯­çš„è§£é‡Š</a><ul><li>å¸¸è§„æ¨¡å¼ <ul><li>blueprintsçš„é…ç½®ã€‚</li><li>data connectionsçš„é…ç½®ã€‚</li><li>transformation rulesçš„é…ç½®ã€‚</li></ul></li><li>é«˜çº§æ¨¡å¼ï¼šä¸»è¦æ˜¯é€šè¿‡jsonçš„æ–¹å¼æ¥è¯·æ±‚apiï¼Œå¯é€‰æ‹©å¯¹åº”çš„æ’ä»¶ï¼Œå¯¹åº”çš„subtasksï¼Œä»¥åŠæ’ä»¶æ‰€éœ€è¦çš„å…¶ä»–ä¿¡æ¯ã€‚</li></ul></li><li>Grafanaï¼šå…¶ä¸»è¦æ‰¿è½½Apache DevLakeçš„å‰ç«¯å±•ç¤ºå·¥ä½œã€‚æ ¹æ®æ”¶é›†çš„æ•°æ®ï¼Œé€šè¿‡sqlè¯­å¥æ¥ç”Ÿæˆå›¢é˜Ÿéœ€è¦çš„å„ç§æ•°æ®ã€‚ç›®å‰sqlä¸»è¦ç”¨domain layerå±‚çš„è¡¨æ¥å®ç°é€šç”¨æ•°æ®å±•ç¤ºéœ€æ±‚ã€‚</li></ul></li><li>migrationï¼šæ•°æ®åº“è¿ç§»å·¥å…·ã€‚<ul><li>migrationï¼šæ•°æ®åº“è¿ç§»å·¥å…·migrationçš„å…·ä½“å®ç°ã€‚</li><li>models/migrationscriptsï¼šdomian layerå±‚çš„æ•°æ®åº“è¿ç§»è„šæœ¬ã€‚</li><li>plugins/xxx/models/migrationscriptsï¼šæ’ä»¶çš„æ•°æ®åº“è¿ç§»è„šæœ¬ã€‚ä¸»è¦æ˜¯<em>raw</em>å’Œ<em>tool</em>å¼€å¤´çš„æ•°æ®åº“çš„è¿ç§»ã€‚</li></ul></li><li>æµ‹è¯•éƒ¨åˆ†ï¼š<ul><li>testhelperå’Œpluginsä¸‹çš„*_test.goæ–‡ä»¶ï¼šå³å•å…ƒæµ‹è¯•ï¼Œå±äºç™½ç›’æµ‹è¯•èŒƒç•´ã€‚é’ˆå¯¹ç›®æ ‡å¯¹è±¡è‡ªèº«çš„é€»è¾‘ï¼Œæ‰§è¡Œè·¯å¾„çš„æ­£ç¡®æ€§è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡æœ‰ä¾èµ–å…¶å®ƒèµ„æºæˆ–å¯¹å¤Ÿç”¨ï¼Œé‡‡ç”¨æ³¨å…¥æˆ–è€… mock ç­‰æ–¹å¼è¿›è¡Œæ¨¡æ‹Ÿï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°åˆ¶é€ ä¸€äº›éš¾ä»¥å¤ç°çš„æç«¯æƒ…å†µã€‚</li><li>testï¼šé›†æˆæµ‹è¯•ï¼Œç°ç›’æµ‹è¯•èŒƒç•´ã€‚åœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</li><li>e2eï¼š ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œå±äºé»‘ç›’æµ‹è¯•èŒƒç•´ã€‚ç›¸å¯¹äºå•å…ƒæµ‹è¯•æ›´æ³¨é‡äºç›®æ ‡è‡ªèº«ï¼Œe2eæ›´é‡è§†ç›®æ ‡ä¸ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†äº’åŠ¨çš„æ•´ä½“æ­£ç¡®æ€§ï¼Œç›¸å¯¹äºå•å…ƒæµ‹è¯•ç€é‡é€»è¾‘æµ‹è¯•ï¼Œe2eä¾§é‡äºè¾“å‡ºç»“æœçš„æ­£ç¡®æ€§ã€‚</li></ul></li><li>ç¼–è¯‘ï¼Œå‘å¸ƒéƒ¨åˆ†ï¼š<ul><li>devops/lake-builderï¼š mericodev/lake-builderçš„dockeræ„å»ºã€‚</li><li>Dockerfileï¼šä¸»è¦ç”¨äºæ„å»ºdevlakeé•œåƒã€‚</li><li>docker-compose.ymlï¼šæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨YMLæ–‡ä»¶æ¥é…ç½®Apache DevLakeæ‰€éœ€è¦çš„æœåŠ¡ç»„ä»¶ã€‚</li><li>docker-compose-temporal.ymlï¼šTemporalæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ç¼–æ’å¹³å°ï¼Œä»¥åˆ†å¸ƒå¼çš„æ¨¡å¼æ¥éƒ¨ç½²Apache DevLakeï¼Œç›®å‰å¤„äºè¯•éªŒé˜¶æ®µï¼Œä»…ä¾›å‚è€ƒã€‚</li><li>workerï¼šTemporalåˆ†å¸ƒå¼éƒ¨ç½²å½¢å¼ä¸­çš„workerå®ç°ï¼Œç›®å‰å¤„äºè¯•éªŒé˜¶æ®µï¼Œä»…ä¾›å‚è€ƒã€‚</li><li>k8s-deploy.yamlï¼šKubernetesæ˜¯ä¸€ä¸ªå¯ç§»æ¤ã€å¯æ‰©å±•çš„å¼€æºå¹³å°ï¼Œç”¨äºç®¡ç†å®¹å™¨åŒ–çš„å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ï¼Œå¯ä¿ƒè¿›å£°æ˜å¼é…ç½®å’Œè‡ªåŠ¨åŒ–ã€‚ç›®å‰Apache DevLakeå·²æ”¯æŒåœ¨k8sé›†ç¾¤ä¸Šéƒ¨ç½²ã€‚</li><li>Makefileï¼šæ˜¯ä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶çš„ç¼–è¯‘è§„åˆ™ï¼Œæè¿°äº†æ•´ä¸ªå·¥ç¨‹çš„ç¼–è¯‘å’Œé“¾æ¥ç­‰è§„åˆ™ã€‚</li><li>releasesï¼šApache DevLakeå†å²releaseç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬docker-compose.ymlå’Œenv.exampleã€‚</li><li>scriptsï¼šshellè„šæœ¬ï¼ŒåŒ…æ‹¬ç¼–è¯‘pluginsè„šæœ¬ã€‚</li></ul></li><li>å…¶ä»–ï¼š<ul><li>imgï¼šlogoã€ç¤¾åŒºå¾®ä¿¡äºŒç»´ç ç­‰å›¾åƒä¿¡æ¯ã€‚</li><li>versionï¼šå®ç°ç‰ˆæœ¬æ˜¾ç¤ºçš„æ”¯æŒï¼Œåœ¨æ­£å¼çš„é•œåƒä¸­ä¼šæ˜¾ç¤ºå¯¹åº”releaseçš„ç‰ˆæœ¬ã€‚</li><li>.env.exempleï¼šé…ç½®æ–‡ä»¶å®ä¾‹ï¼ŒåŒ…æ‹¬DB URL, LOGä»¥åŠå„æ’ä»¶çš„é…ç½®ç¤ºä¾‹ä¿¡æ¯ã€‚</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•è”ç³»æˆ‘ä»¬">å¦‚ä½•è”ç³»æˆ‘ä»¬<a class="hash-link" href="#å¦‚ä½•è”ç³»æˆ‘ä»¬" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>Githubåœ°å€ï¼š<a href="https://github.com/apache/incubator-devlake" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake</a></li><li>å®˜ç½‘åœ°å€ï¼š<a href="https://devlake.apache.org/" target="_blank" rel="noopener noreferrer">https://devlake.apache.org/</a></li><li><a href="https://join.slack.com/t/devlake-io/shared_invite/zt-18uayb6ut-cHOjiYcBwERQ8VVPZ9cQQw" target="_blank" rel="noopener noreferrer">Slack</a>: é€šè¿‡Slackè”ç³»</li><li>å¾®ä¿¡è”ç³»:<br><img loading="lazy" alt="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAC9FBMVEX///8AAACCgoJCQkIEBAQbGxs9PT1mZmaRkZG4uLiQkJAaGhrNzc1ubm4nJycDAwMsLCwBAQH8/PxfX18KCgoNDQ13d3f+/v79/f37+/tnZ2c3Nzf9/v78/f77/P4ICAj19/3o7fzb4/rO2fnBz/iyw/aou/Wit/QoKCj6+/7Q2/m3x/aZsPOFofF+m/B6mPB5l+94lu9RUVHu8v3P2vmpvPWHovF7mfB5l/B2dnb9/f7AzveQqfLn7Pzx9P2+zfeJpPF4l++AnPCgtfSSq/KJo/G+zPeYr/N8mvC/zffs8Px6mO/R2/nr7/ytwPV/nPDy9P3z9v2nu/WuwPXY4fqUrPK7yvfq7vyRqfJQUFDM1/mGofGIo/G6yveBnfD8/P7W3/p9mvC7y/eCnvHd5fvm7Px7mPC8y/eds/T4+v7r8PyMpvKVrfPF0viDn/HN2PmBnvC0xPbZ4fqUrPPz9f2juPTt8f3j6fuWrfPI1Pivwfb09v2wwfaLpfGqvfV3lu/5+v6csvPS3Pm1xvbn7fyCnvD3+f6Xr/Py9f2asfP+/v+9zPf+//+lufT5+/6KpfF8mfDBz/fp7vyLpfK1xfbl6vyRqvLD0fiXrvOetPTw8/3K1vnv8v309/22xva5yPemuvWFoPGOp/KQqPLq7/yKpPHC0Pjk6vutv/WGovHa4vrT3fqxw/b3+P6zxPaEoPHb4/vJ1fj4+f6ftfTv8/2kufTw9P2ftPSEn/Hc5PuTq/KPqPKNpvL2+P6htvT6+vre5fuWrvO6yffS3PrH1PjV3vrt8fySqvLd5Pvf5vuwwvbH0/jY2Nj5+fmOqPLv7++4yPebsvPM2Pnw8PDi6Pvj6vurvvXX4Pp3le+bsfOjt/SkuPTg5/vCz/jI1fjL1/msv/WMpfLG0/jl6/zP2fnE0fjQ2vnh5/uovPXh6Pu5yffi6fuNp/KmuvSxwva0xfbD0Ph/m/DBzvfR3PmAnfCvwfWds/OZr/N2le95mO+ampqSkpKJjhZSAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAXEQAAFxEByibzPwAADqVJREFUeNrt3Hl8FNUdAPBJjARRjizgJMouWYJAODJvlGSXzQGDHCGCW+WQJpGQVrEYDqWCkkg2BAnRiKZRiaBYoUEtSCxYpWhBpCotodXW1lSr1VZrT4+29v6n782x987+ZjYkZPb3Pp98sjP7zu+8efvm5DgMGDBgwIABAwbDIcVoCE2nt6SXLnQlPBdAOrN5wgtCLMRCLMRCLMRCLC5uSAXHhICYDYY3To+2FrEQC7EQC7EQC7HAxaYCKpFgFEA6+HbQa5/Z1iIWYiEWYiEWYiGW2eSGax21PLMr9VwAWwyxEAuxEAuxEAuxehsLntxwi/Sy7tFNhViIhViIhViIhVgJtlYnpAJqBmgfnOdsbI6eaS1iIRZiIRZiWRQrNW44z0JYPdpaeJX655Lh1iIWYiEWYiFW/1hCrF7AOhvBcEHwjQPf4Gbr0tsBsRALsfo8IBZiIVaPNdNwJfSiALIGgBiuPCB5j5aHWIiFWIiFWIiVjFgAJXhdDFceUCW9KAkmT7BmiIVYiIVYiIVYFseCtwEOolclvczgEnrbD9CGs7/BEQuxEAuxEAuxrIplNhfD28EsKzyBXuUNSyAWYiEWYiEWYiEWIKZeCQBIeBTDnvBgWMlsZ0AsxEIsxEIsxEIseEx4XQCsZnUB1vAleNaIhViIhViIhVhJjAVog15IsEWGIRP01MsMsRArybHSzh+QPvACdWlQ+oAL0xArVrgoyqrBQ4YiloEwaFgGYsGDbfiIcxALAJJg2yPzHXlx4Fs+Mysryyb70A+ZvKE8DVcCkPzcwkq7JABls2XyvB+IfpTXIJYWLs1S12cyKAVplN3hsI9SFyhYJmKxMHqQspJXOxCf7RyTM/aycePHj7tsbM4YZ7ay1mbjIXlaG2tCZjBVrnPipMlT8gQiyoEIeVMmT5rozOXkPZSPn6elsS5XqRgEf8XU/AIXJSLELcjBTT+Koqsgf+oVvBwrqbGmqVaUwuMsLHJRKCEoENa5BArmKios9qgRzw0ss3SJysujd8n0GUQKkaJKM6+cpejRr2bPKZH3RdAGhxPoJYBvgN7C4rNob8mdOJeQMCqBlM5zlOULympCrpo7P1eNnqxY8p614GqvGE4lCGLRlzjumms1RCJ6Fy4I2hWTCmua0q/o36LFUahoj1rCWK5bKgWGsMWL6Cq1byUT1peVfsVx9vKKaFYCqbxOzul60R3Qqii300FO1ro8ebAmaP3KMW+ZJESzEvOr5JyWV2uUdCYhLZvn0PrWhGTBGm1T+5XjK3nRuhXF+uoNSk43FmiDFnGtICTvJofatzJH9z2WnovZYiNiDmSLtIN4CmNYCeLXViqJbq5Reh6RVk1dvYZqFXrkLslxg+I1U68NZhvW+1iXsiV6gMOvvUWKbkWq13IhPYuQycVc1a3ELS1bSxPKR0mXJgNWGusYrL3rCmJYCeLXb1MTLZL7HhHWb6ALt68hglSwTpamXTMtCbDSOWVwL7tDjGFFVmzUEq1mEy1SWivj1c2iKcQ7ytRB/hLrY41kn2nXcNwpxRiwBGlTmZrGU++jVt55ygjWsFlko1etQ90RR1oei51DZr+EjTNjWRGyxaOmuWuTJEhbVzuUpaZtrC+SmY3qL+LFVscawT7SpjbfHWsnFMia29Uk97QQIhZM1ejKZsi+4t3NMjfHjegjLEBrATx69VQWhisd696xQqyO5Ra336cmKb6fSEVj/GdmyluVn0bhG9pE3nCLDMfsS6wMm9Kx2h6QYnasvEVqiqoHJXHbQ/6CN+xQ00g1bWrXyrA01jBOmTa0k1gdSxAfrlNTLFom7XT6y22qFfyz+XZ1+jDM0ljsAgVt5q7FsUesFY+oCRasEuof9Re7+zGX31dcvEv5QRxkZayh7AOdYzW2amf1iCSGnvmTZqlAfPncbzZphfJtjwcNcqS1Uc6G44zeB9GfsIZw8vBuv1qeAxCfVLpn77dme+kHTYKQsZpPboNdKzN3YlHIrExcaFeG+AkWxhrMycN7xz7aconMyH9i+ZMbHnWO2fjUJqKe1iLffiiiRMf++pmhM1iyr0MZ4gf3CVaCMQ0kp7vPgVY6f9o7r9jfczzOwh0Kh/i0Pbykg53Lwk8QktYD6n4Yd0vDK6jX2j7CYoeFS+g4Nf7G0PVlk55hh4He70SU5Dm0Jvyn0y0u0aZa1saycYefFcXN3w3PMPc5dpg8XhnTPc3POwJJ5rSGa4lHDnOZSYBFh6xK8XtHIzJsfkEUiGuq/Hn3gy9+v77D/9Wx44FT8ep+WLmA462P9RLPnfD6Xm6KyLCjggji3GYZ9KRbFH31Vf7vjm4NH7S8J9QzplbHanSJq44pS7wje7dD6SHFz9AJ12r54+FtPrqnvdjsT9Q0OWwSS1w/4PiXLI9Fu8MrhGx9lX0e9drYI7NOrf+hrNVWQVf/SI5z32aGNWu3PxF/Ouz3kJCuoJ/DPsJK0DPO0hn678ccd1ISSM3U5rq262sEH93fau5i3+/6iSS+oHamnFtE0bUk6EaQQ66w/VA6KWfFnUmJFQzXGrCyN7Fep/8yOc9puk9J3r1LKwR5bkWkN9j3jmtF8acNSlzH8vU7fxY8rDWWhmGJd3o4dnT4pmWxlP3GXi8f7Ej+W4x86+WJaDsRH1aHMnqskxtyg9HGFeFY9crk1WZZLFsQVtD4I3bKMD+vEGc7o5cZMWb5sbIsi/UmJ++Gd4qhVqfaFMSnfK6c6GUefDj8lI54WtkNX7csVmCAD/5du/sXaowTFb5xDVHL3H9L+BTe+gM8e4SJjltdQSewiOut57Wc+ZarvN3Risw+EjGD16YOF/Qhll6CxDNjNznIk1I/FsmbdDCQoG77L99+NDIfT0sruyvX7XYT4narxo3KpDTuLQ9mN3ifY7GL0VnscMd/qs/bkhucYsM7JL85Ip91Na30t1OU5KvTonyi0H+4k25ZrAGceiCtXXlobXGEJrnmae+visPuSr6n+d35Xe8VFj6x+tfvl78y/YMa2s1IZYdyID3Asljnc/K1ncNHlN82t1QfcTztWFv0m99mczqB/3CVJIjPHlbOZ11oWaw0Trl0v0QZr6WlbexQesPRj35302OdnVuuf6+8u7ihrP34+sL9JblVdkfDyqi3vrcTwk7+yXeHpFkWK4U9qqqcVpYH9495Z86k8Xu9Ah2RfD6fKAnVBW/Xts/PaW/pmr/u920l0bEeCZxWvig2T7/HCr5gIZClc/6wT2ADdsgTKD7J+/Jlh/6YbY/1QEXdc2LYBYvexgIkNxszaIndecsuhS2Ujw6rBV+0C9MMjEzZueWjm1eOimznqOLHVxDxavVS2JDYTQEo6bWo77FCL7KSwMVCLQSDle6bnP+n8j+XNDk8ypN0vONg26H6+2m0sIus1sQKv3wvP/jFHmhytZZWl7ayWVTgAjWdW/lE1zN/uWPnJx98eutnnbX5V66qdLFpVvjle4tiDeOUG0M+J7KT4J0y65MHp3etbXy1u3v5gZyultNvV3oF9iSdW+tiEhv71aCc1Ym4McSiWP5bjjZJf529rTPnBmezI2Qg548tOPF+fdEa5dFDQYg2pPk2qbcc2TIsjaXdzMZ//LejZU0eLnqouu3Dv3/6wpRqIosF/1ay3vhFzUZeGd6H6zXFAljabZJ8vIfqPbud3fOOF1V8UcoGL2Vkq946e9XC8nd3VWm3SfYRll55gNK5+EGNqd2ACwl87jUd73bntL/xj/r6hZM+z1l0+4ZjSm/MUm7AhTfaMKThhp0NLO3WbiOB99jtnuAkivZIy2OlsJdeBC4m089Vh+uef63D6Wwr27W7YRQgJ7VjpRvZnfoplv9xFMpUd92Jj+eMm7yjprJiz56KggdO/fOztSfKmuL1O//jKJbH8j/oxGV37qjwrmCjt6TM39lHwVv5r5PdbSt1cgo86GR9LHkaz/Yk+/TqwOwzMI0iIqkuOD79wJPN9qgZKfvwwJgS1sIaLe+DysOZUW+Hd7P5VOvWU08V5ux/8uaSg7kenvc4Dpa0OdmNNfIUyzb6nMGC5wKoYIx66j32q4GJQt7WgqLN29+qrX1r++YX93Z5/I+UmysdXkGzZmcHS/eB8qCdkihnBn2+f+953x58c2RSYem9qiAKW/CrCqYlH5b6EoyF3vhcoS/BGGi69H6Mpb5eZf7c/xBdLrovzp0YeL3KfzOSEou9uIe2v2TObBLzuVb24p4Z00s49vI2Ocn/MsyX3r+x1FdCFUe+Esp/ftlVVOgMeiXUtERK7xksw4J6eRrbRtCXjSlWl0M3OMDMcPK+xzL0GrsJibW2X2MN1LhsIS9IfOedkBckZkY8eZKUWIZfvZnUWClp6dpn0EtdkxvL4OuCkx0rJWXE8Dgn5W3DRwAy6zUsuCdAIkUnRM86Y9ig2JWSX3HeM20AmBmodR9h0TB0yOAo31w0eMLQKFknO1bguzOvZ9nePHPBwPQB58c6z45Yxi/jIhZiIRZimaqgXkyzdICt0jMbtUfJEQuxEAuxEAuxkhjLbHUNC8Irb5gAXhB8JWIhFmIhFmIhFmKZbQMA2XA6eC49Qw6oC2IhFmIhFmIhFmJFjalXnl7NEvSEf2fYDM5jWAKxEAuxEAuxECuJsfRiwkEAJQBiwtsOjwIIgOoiFmIhFmIhFmIhltn2Ra0nPDO9euoRAJD1CoJj6bUBsRALsRALsRALscwGeGsNQ8KtzerCkRELsRALsRALsRALULpeABQLh0ywYYa3EbyeiIVYiIVYiIVYiAVog05INQwCcIFvRvh3PRMFsRALsRALsRALsQArddqgiwUHgVdQL0+zrIC6mK0gYiEWYiEWYiEWYulh6VVeL8DrAk9nNuse3ZqIhViIhViIhViIpYeltxQ/M8iUymxMeKPN6iIWYiEWYiEWYiEWFzek6sUEVCl+CQaaYrjR8C1tuJmIhViIhViIZRms1LjhPMQycPUjQRDDWSfIarhhhluLWIiFWIiFWIiVjFgYMGDAgAFD8ob/A7JH8PPkQQVXAAAAAElFTkSuQmCC" width="300" height="300" class="img_ev3q"></li></ul>]]></content>
        <author>
            <name>å®‰è‡ªå®½</name>
            <uri>https://github.com/abeizn</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="codebase" term="codebase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¦‚ä½•è´¡çŒ®issue]]></title>
        <id>/2022/05/20/å¦‚ä½•è´¡çŒ®issues</id>
        <link href="https://devlake.apache.org/zh/blog/2022/05/20/å¦‚ä½•è´¡çŒ®issues"/>
        <updated>2022-05-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä¸Šå‘¨(2022-05-12)ï¼Œæˆ‘ä»¬ä»¥å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼ä¸ºå¤§å®¶åˆ—å‡ºäº†ä¸¤ä¸ª"good first issue"ã€‚]]></summary>
        <content type="html"><![CDATA[<p>ä¸Šå‘¨(2022-05-12)ï¼Œæˆ‘ä»¬ä»¥å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼ä¸ºå¤§å®¶åˆ—å‡ºäº†ä¸¤ä¸ª"good first issue"ã€‚
è¿™å¾ˆæœ‰è¶£ï¼Œå®ƒä»¬å‡ ä¹ç«‹åˆ»å°±è¢«æ‹¿èµ°äº†......
ä½†å¯¹äºé‚£äº›æœ‰å…´è¶£ä½†æ²¡æœ‰å¾—åˆ°çš„äººæ¥è¯´å¯èƒ½å°±ä¸é‚£ä¹ˆæœ‰è¶£äº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰€ä»¥">æ‰€ä»¥...<a class="hash-link" href="#æ‰€ä»¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘ä»¬å†³å®šï¼Œä¸å†æœ‰ç«äº‰ï¼Œä½ å¯ä»¥ä»æˆ‘ä»¬çš„github issue pagesä¸­æŒ‘é€‰ä½ å–œæ¬¢çš„issueã€‚å¦‚æœæ²¡æœ‰äº†ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„ã€‚
æˆ‘ä»¬æ¯•ç«Ÿæ˜¯ç¤¾åŒºï¼</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ€ä¹ˆåšå‘¢è¿™å¾ˆç®€å•">æ€ä¹ˆåšå‘¢ï¼Ÿè¿™å¾ˆç®€å•!<a class="hash-link" href="#æ€ä¹ˆåšå‘¢è¿™å¾ˆç®€å•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿›å…¥æˆ‘ä»¬çš„<a href="https://github.com/apache/incubator-devlake/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22" target="_blank" rel="noopener noreferrer">é—®é¢˜é¡µé¢</a>ï¼Œç„¶åç‚¹å‡»è¿™é‡Œã€‚æˆ‘ä»¬æ‰€æœ‰çš„Good First Issueéƒ½åˆ—åœ¨è¿™é‡Œ!
<img loading="lazy" alt="good first issue" src="/zh/assets/images/issue_page_screenshot-4aa3f48811d5bc6aa1a36ce71727344c.png" width="1320" height="266" class="img_ev3q"></p><ul><li><p>é¦–å…ˆï¼Œå¯»æ‰¾ç°æœ‰çš„issuesï¼Œæ‰¾åˆ°ä¸€ä¸ªä½ å–œæ¬¢çš„ã€‚
ä½ å¯ä»¥é€šè¿‡è¯„è®º"I'll take it!"æ¥é¢„è®¢å®ƒã€‚
æ¥ä¸‹æ¥ä½ å¯ä»¥å†™ä¸€ä»½â€œæ”»ç•¥â€ï¼Œä»¥å±•ç¤ºä½ å¯¹é—®é¢˜çš„ç†è§£å’Œä½ å°†é‡‡å–ä»€ä¹ˆæ ·çš„æ­¥éª¤æ¥è§£å†³è¿™ä¸ªissueï¼Œç„¶åå¼€å§‹Codingã€‚</p></li><li><p>å¦‚æœæ²¡æœ‰GFIäº†æ€ä¹ˆåŠï¼Ÿåˆ›é€ ä½ è‡ªå·±çš„issue! ç°åœ¨ï¼Œé€šè¿‡æŸ¥çœ‹æˆ‘ä»¬çš„ä»£ç åº“ã€‚
ä½ è‚¯å®šèƒ½å‘ç°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚æ–‡æ¡£ã€å•å…ƒæµ‹è¯•ï¼Œç”šè‡³æ˜¯é”™å­—ã€‚
æŠŠä½ è§‰å¾—ä¸å¯¹çš„åœ°æ–¹æå‡ºæ¥ï¼Œæˆ‘ä»¬ä¼šéªŒè¯å®ƒæ˜¯å¦å¿…è¦ï¼Œ
ç„¶åä½ å°±å¯ä»¥å¼€å§‹Codingäº†ã€‚</p></li><li><p>æœ€åï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦è´¹å°½å¿ƒæ€ä¸ºä½ å†™ä»£ç ï¼Ÿ
ä¸ä¸ä¸ï¼Œä½ ä¸æ˜¯ä¸ºæˆ‘ä»¬å†™ä»£ç ï¼Œä½ æ˜¯ä¸ºç¤¾åŒºé‡Œçš„æ¯ä¸ªäººå†™ä»£ç ï¼Œä½ æ˜¯ä¸ºè‡ªå·±å†™ä»£ç ã€‚
ä¸ºäº†æé«˜ä½ çš„æŠ€èƒ½ï¼Œä¸ºäº†å­¦ä¹ å¦‚ä½•ä¸ä»–äººåˆä½œã€‚è€Œå¯¹äºé‚£äº›åšå‡ºé‡å¤§è´¡çŒ®çš„äººï¼Œ
æˆ‘ä»¬ä¸ºæ‚¨æä¾›ä¸€ä¸ªApache Committerçš„å¸­ä½ï¼Œç”šè‡³æ˜¯PPMCï¼</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å°±è¿™äº›äº†æœ‰ä»»ä½•é—®é¢˜è¯·éšæ—¶æå‡ºç¼–ç å¿«ä¹">å°±è¿™äº›äº†ï¼Œæœ‰ä»»ä½•é—®é¢˜è¯·éšæ—¶æå‡ºã€‚ç¼–ç å¿«ä¹ï¼<a class="hash-link" href="#å°±è¿™äº›äº†æœ‰ä»»ä½•é—®é¢˜è¯·éšæ—¶æå‡ºç¼–ç å¿«ä¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[DevLake åŠ å…¥ Apache å­µåŒ–å™¨ï¼Œæ¥å’Œæˆ‘ä»¬ä¸€èµ·ç©å¼€æºï¼]]></title>
        <id>apache-welcomes-devlake</id>
        <link href="https://devlake.apache.org/zh/blog/apache-welcomes-devlake"/>
        <updated>2022-05-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[4 æœˆ 29 æ—¥ï¼Œå¼€æºç ”å‘æ•°æ®å¹³å° DevLake é€šè¿‡æŠ•ç¥¨å†³è®®ï¼Œæ­£å¼æˆä¸º Apache è½¯ä»¶åŸºé‡‘ä¼š (ASF) çš„å­µåŒ–é¡¹ç›®ã€‚]]></summary>
        <content type="html"><![CDATA[<p>4 æœˆ 29 æ—¥ï¼Œå¼€æºç ”å‘æ•°æ®å¹³å° DevLake é€šè¿‡æŠ•ç¥¨å†³è®®ï¼Œæ­£å¼æˆä¸º Apache è½¯ä»¶åŸºé‡‘ä¼š (ASF) çš„å­µåŒ–é¡¹ç›®ã€‚</p><p><img loading="lazy" alt="incubation" src="/zh/assets/images/incubation-screenshot-4dc642e1d68b6d7ec457d3e352c32053.jpg" width="1356" height="690" class="img_ev3q"></p><p>è¿›å…¥å­µåŒ–å™¨åï¼ŒDevLake å°†éµå¾ª <a href="https://www.apache.org/theapacheway/index.html" target="_blank" rel="noopener noreferrer">The Apache Way</a>ï¼Œåœ¨å¯¼å¸ˆä»¬çš„å¼•å¯¼ä¸‹ï¼ŒåšæŒä»¥äººä¸ºæœ¬ã€ç¤¾åŒºé«˜äºä»£ç çš„ç†å¿µï¼ŒæŒç»­å»ºè®¾åŒ…å®¹ã€å¤šå…ƒã€å´‡å°šçŸ¥è¯†çš„ç¤¾åŒºã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devlake-ä¸»è¦ç‰¹æ€§">DevLake ä¸»è¦ç‰¹æ€§<a class="hash-link" href="#devlake-ä¸»è¦ç‰¹æ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½œä¸ºå¼€æºçš„ç ”å‘æ•°æ®å¹³å°ï¼ŒDevLake å‘è½¯ä»¶ç ”å‘å›¢é˜Ÿæä¾›è‡ªåŠ¨åŒ–ã€ä¸€ç«™å¼çš„æ•°æ®æ”¶é›†ã€åˆ†æä»¥åŠå¯è§†åŒ–èƒ½åŠ›ï¼Œå¸®åŠ©ç ”å‘å›¢é˜Ÿå€ŸåŠ©æ•°æ®æ›´å¥½åœ°ç†è§£å¼€å‘è¿‡ç¨‹ï¼ŒæŒ–æ˜å…³é”®ç“¶é¢ˆä¸ææ•ˆæœºä¼šã€‚ </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å½’é›†-devops-å…¨æµç¨‹æ•ˆèƒ½æ•°æ®è¿æ¥æ•°æ®å­¤å²›">å½’é›† DevOps å…¨æµç¨‹æ•ˆèƒ½æ•°æ®ï¼Œè¿æ¥æ•°æ®å­¤å²›<a class="hash-link" href="#å½’é›†-devops-å…¨æµç¨‹æ•ˆèƒ½æ•°æ®è¿æ¥æ•°æ®å­¤å²›" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>é’ˆå¯¹ DevOps å·¥å…·é“¾å¤æ‚ã€æ•°æ®æ”¶é›†éš¾çš„ç—›ç‚¹ï¼ŒDevLake å°†éœ€æ±‚-è®¾è®¡-å¼€å‘-æµ‹è¯•-äº¤ä»˜-è¿è¥å…¨æµç¨‹ã€ä¸åŒå·¥å…·çš„æ•ˆèƒ½æ•°æ®æ±‡é›†äºä¸€ä¸ªå¹³å°ï¼Œé¿å…ç”¨æˆ·é‡å¤é€ è½®å­ã€‚</p><p>è¿™äº›æ•°æ®å¯ä»¥äº’ç›¸å…³è”åˆ†æï¼Œè¿›è€Œæ›´åŠ å‡†ç¡®ã€å…¨é¢åœ°åˆ»ç”»ç ”å‘è¿‡ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨äº†è§£é¡¹ç›® bug ä¿®å¤çš„è¿‘å†µæ—¶ï¼Œä¸ä»…å¯ä»¥äº†è§£å·²ä¿®å¤ bug çš„ä¸ªæ•°ï¼Œè¿˜å¯ä»¥äº†è§£è¿™äº› bug çš„åˆ†å¸ƒã€bug ä¿®å¤ç›¸å…³çš„ä»£ç å·¥ä½œé‡ã€æ‰€å æ€»å·¥ä½œé‡æ¯”ä¾‹ç­‰ä¿¡æ¯ã€‚</p><p>å½“å‰ DevLake å·²æ”¯æŒä¸»æµé¡¹ç›®ç®¡ç†å·¥å…· <a href="https://github.com/apache/incubator-devlake/tree/main/plugins/jira" target="_blank" rel="noopener noreferrer">JIRA cloud</a>ã€<a href="https://github.com/apache/incubator-devlake/tree/main/plugins/jira" target="_blank" rel="noopener noreferrer">JIRA server</a>ã€<a href="https://github.com/apache/incubator-devlake/tree/main/plugins/tapd" target="_blank" rel="noopener noreferrer">TAPD</a>ï¼Œä»£ç æ‰˜ç®¡å·¥å…· <a href="https://github.com/apache/incubator-devlake/tree/main/plugins/gitextractor" target="_blank" rel="noopener noreferrer">Git</a>ã€<a href="https://github.com/apache/incubator-devlake/tree/main/plugins/github" target="_blank" rel="noopener noreferrer">GitHub</a>ã€<a href="https://github.com/apache/incubator-devlake/tree/main/plugins/gitlab" target="_blank" rel="noopener noreferrer">GitLab</a>ï¼ŒCI/CD å·¥å…· <a href="https://github.com/apache/incubator-devlake/tree/main/plugins/jenkins" target="_blank" rel="noopener noreferrer">Jenkins</a>ï¼Œæ—¥å†å·¥å…·<a href="https://github.com/apache/incubator-devlake/tree/main/plugins/feishu" target="_blank" rel="noopener noreferrer">é£ä¹¦æ—¥å†</a>ã€‚</p><p>æ•°æ®æºåˆ—è¡¨æ­£åœ¨å¿«é€Ÿæ‹“å±•ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ Apache DevLake å·²æ”¯æŒæ•°æ®çš„<a href="https://devlake.apache.org/docs/DataModels/DataSupport" target="_blank" rel="noopener noreferrer">è¯¦ç»†æ–‡æ¡£</a>ï¼ŒåŒæ—¶éå¸¸æ¬¢è¿<a href="https://github.com/apache/incubator-devlake/blob/main/plugins/README.md" target="_blank" rel="noopener noreferrer">å‚ä¸è´¡çŒ®æ–°çš„æ•°æ®æºæ’ä»¶</a>ï¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ ‡å‡†åŒ–ç ”å‘æ•°æ®æ¨¡å‹å’Œå¼€ç®±å³ç”¨çš„æ•ˆèƒ½æŒ‡æ ‡">æ ‡å‡†åŒ–ç ”å‘æ•°æ®æ¨¡å‹å’Œå¼€ç®±å³ç”¨çš„æ•ˆèƒ½æŒ‡æ ‡<a class="hash-link" href="#æ ‡å‡†åŒ–ç ”å‘æ•°æ®æ¨¡å‹å’Œå¼€ç®±å³ç”¨çš„æ•ˆèƒ½æŒ‡æ ‡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>ç ”å‘è¿‡ç¨‹æ•°æ®çš„æ ‡å‡†åŒ–ç¨‹åº¦ä½ï¼Œç”¨æˆ·éš¾ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ•°æ®è¿›ä¸€æ­¥åˆ†æï¼›è€Œæ•ˆèƒ½æŒ‡æ ‡å®šä¹‰ä¸è®¡ç®—æ–¹æ³•æ¨¡ç³Šï¼Œåˆç»™ç ”å‘æ•°æ®çš„åº”ç”¨å¸¦æ¥äº†é¢å¤–çš„æˆæœ¬ã€‚</p><p>Apache DevLake æä¾›äº†ä¾¿æ·çš„æ•°æ®è½¬åŒ–èƒ½åŠ›ï¼Œå°†æ”¶é›†æ¥çš„æ•°æ®æ¸…æ´—è½¬æ¢ä¸º<a href="https://devlake.apache.org/docs/DataModels/DevLakeDomainLayerSchema" target="_blank" rel="noopener noreferrer">æ ‡å‡†æ•°æ®æ¨¡å‹</a>ï¼Œå¹¶åŸºäºæ ‡å‡†æ¨¡å‹ç”Ÿæˆä¸€ç³»åˆ—<a href="https://devlake.apache.org/docs/EngineeringMetrics" target="_blank" rel="noopener noreferrer">ç ”å‘æ•ˆèƒ½æŒ‡æ ‡</a>ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ç®€å•æ˜“æ‡‚ã€å¼€ç®±å³ç”¨ã€‚ä¸€æ–¹é¢èŠ‚çœäº†æ²»ç†æ•°æ®å’Œå®šä¹‰æŒ‡æ ‡çš„æˆæœ¬ï¼Œå¦ä¸€æ–¹é¢ä½¿æ•ˆèƒ½æŒ‡æ ‡æ›´åŠ é€æ˜ï¼Œä¾¿äºç ”å‘æ•°æ®çš„åº”ç”¨è½åœ°ã€‚</p><p>ç›®å‰ Apache DevLake å·²æ”¯æŒ 20+å¸¸è§ç ”å‘æ•ˆèƒ½æŒ‡æ ‡ï¼Œå¯åº”ç”¨äºäº¤ä»˜æ•ˆç‡ã€è´¨é‡ã€æˆæœ¬ã€èƒ½åŠ›ç­‰ä¸åŒè®¤çŸ¥åŸŸã€‚</p><p>ç»“åˆç”¨æˆ·ä½¿ç”¨ç ”å‘æ•°æ®çš„å…·ä½“åœºæ™¯ï¼ŒApache DevLake åŸºäº Grafana æ­å»ºæ•°æ®çœ‹æ¿ï¼Œæ”¯æŒè¶‹åŠ¿åˆ†æã€æŒ‰ç…§æˆå‘˜/é˜¶æ®µä¸‹é’»ç­‰åˆ†æèƒ½åŠ›ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½ç ”å‘æ•ˆèƒ½æå‡çš„å…³é”®ç¯èŠ‚ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹<a href="https://devlake.apache.org/docs/LiveDemo" target="_blank" rel="noopener noreferrer">é¢„è®¾æ•°æ®çœ‹æ¿</a>ï¼Œåç»­æˆ‘ä»¬å°†åœ¨ blog ä¸­ä»‹ç»æ¯ä¸€ä¸ªæ•°æ®çœ‹æ¿åŠå…¶èƒŒåçš„çœŸå®ç”¨æˆ·åœºæ™¯ã€‚</p><p><img loading="lazy" alt="é¢å‘å¼€æºäº§å“çš„ç‰ˆæœ¬/æ¨¡å—è´¨é‡åˆ†æ" src="/zh/assets/images/Dashboard-1-0bd59aa8caf7e5684cc1359e0d82709a.jpg" width="1451" height="750" class="img_ev3q"></p><p><img loading="lazy" alt="é¢å‘å¼€æºäº§å“çš„ç‰ˆæœ¬/æ¨¡å—è´¨é‡åˆ†æ" src="/zh/assets/images/Dashboard-2-d239627397b177b7108f0fc66b60dbbd.jpg" width="1447" height="896" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="çµæ´»çš„æ•°æ®æºæ’ä»¶ç³»ç»ŸåŠæ•°æ®å¤„ç†æ¡†æ¶æ”¯æŒè‡ªå®šä¹‰">çµæ´»çš„æ•°æ®æºæ’ä»¶ç³»ç»ŸåŠæ•°æ®å¤„ç†æ¡†æ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰<a class="hash-link" href="#çµæ´»çš„æ•°æ®æºæ’ä»¶ç³»ç»ŸåŠæ•°æ®å¤„ç†æ¡†æ¶æ”¯æŒè‡ªå®šä¹‰" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>Apache DevLake å°†æ•°æ®åŠ å·¥ã€å…³è”ä¸è½¬æ¢çš„åº•å±‚èƒ½åŠ›å¼€æ”¾å‡ºæ¥ï¼Œæä¾›å¯æ‹“å±•çš„æ•°æ®åº•åº§ã€‚
ç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚ï¼Œå®ç°ä»¥ä¸‹è‡ªå®šä¹‰ï¼š</p><ul><li>æ•°æ®æºè‡ªå®šä¹‰ï¼šApache DevLake åŸºäº Golang plugin ç³»ç»Ÿè®¾è®¡äº†çµæ´»çš„æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·ç‹¬ç«‹å¼€å‘æ¥å…¥ä»»æ„ DevOps å·¥å…·</li><li>æ•°æ®å®ä½“è‡ªå®šä¹‰ï¼šåŸºäº dbt æ’ä»¶ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ•°æ®è½¬æ¢æ¨¡å‹</li><li>æ•ˆèƒ½æŒ‡æ ‡è‡ªå®šä¹‰ï¼šæ”¯æŒç”¨æˆ·åŸºäºæ•°æ®æ¨¡å‹è‡ªå®šä¹‰æŒ‡æ ‡ï¼Œæˆ–è°ƒæ•´æŒ‡æ ‡è®¡ç®—æ–¹å¼</li><li>æ•°æ®çœ‹æ¿è‡ªå®šä¹‰ï¼šSQL æŸ¥è¯¢ï¼Œåœ¨ Grafana ä¸­æ‹–æ‹½æ­å»ºæ•°æ®çœ‹æ¿</li></ul><p>ä»¥ä¸‹æ˜¯ <a href="https://github.com/apache/incubator-devlake/blob/main/ARCHITECTURE.md" target="_blank" rel="noopener noreferrer">Apache DevLake æ¶æ„å›¾</a>ï¼š</p><p><img loading="lazy" alt="é¢å‘å¼€æºäº§å“çš„ç‰ˆæœ¬/æ¨¡å—è´¨é‡åˆ†æ" src="/zh/assets/images/0.11-architecture-diagram-f422e47efad0b84f72eb3bc51c7d1f1b.jpg" width="2143" height="1182" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æœªæ¥è§„åˆ’">æœªæ¥è§„åˆ’<a class="hash-link" href="#æœªæ¥è§„åˆ’" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ€æœ¯ä¸äº§å“æ–¹é¢">æŠ€æœ¯ä¸äº§å“æ–¹é¢<a class="hash-link" href="#æŠ€æœ¯ä¸äº§å“æ–¹é¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>é›†æˆæ›´å¤šæ•°æ®æºï¼Œè¦†ç›–æ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸ (SDLC)</li><li>æä¾›æ›´ä¸°å¯Œçš„ç ”å‘æ•°æ®åˆ†æåœºæ™¯ï¼Œä¸ç”¨æˆ·å…±å»º Dashboardï¼Œå®ç°æ›´è¿›ä¸€æ­¥çš„å¼€ç®±å³ç”¨</li><li>æå‡çµæ´»æ€§ï¼Œç”¨æˆ·èƒ½å¤Ÿæ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚ï¼Œè½»æ¾åœ°è‡ªå®šä¹‰æ•°æ®æ¨¡å‹å’ŒæŒ‡æ ‡</li><li>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œé™ä½å®‰è£…ã€é…ç½®ã€æ”¶é›†çš„æˆæœ¬ï¼Œä½¿ç”¨æˆ·ä¸“æ³¨æ•°æ®åˆ†æ</li><li>å¢å¼ºç³»ç»Ÿå¯ä¼¸ç¼©æ€§, æå‡å¤§è§„æ¨¡æ•°æ®åœºæ™¯ä¸‹çš„ç³»ç»Ÿæ€§èƒ½</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºå»ºè®¾æ–¹é¢">ç¤¾åŒºå»ºè®¾æ–¹é¢<a class="hash-link" href="#ç¤¾åŒºå»ºè®¾æ–¹é¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><ul><li>ç»„ç»‡å¤šç§å¤šæ ·çš„ç¤¾åŒºæ´»åŠ¨ï¼Œç§¯æè¿›è¡Œçº¿ä¸Šå’Œçº¿ä¸‹æŠ€æœ¯å¸ƒé“ï¼Œå¸å¼•æ›´å¤šç”¨æˆ·ã€å¼€å‘è€…å’Œå¼€æºçˆ±å¥½è€…å‚ä¸åˆ° DevLake çš„ç¤¾åŒºä¸­æ¥</li><li>æ‰“é€ å¼€æ”¾ã€å‹å¥½çš„äº¤æµç¯å¢ƒï¼Œå®Œå–„å’Œä¸°å¯Œ DevLake ç›¸å…³å†…å®¹ä½“ç³»ï¼Œå®Œå–„ç”¨æˆ·æ–‡æ¡£å’Œè´¡çŒ®æŒ‡å—ï¼Œé™ä½ç”¨æˆ·ä½¿ç”¨å’Œå‚ä¸é—¨æ§›ï¼Œå‘ç¤¾åŒºæä¾›æ›´åŠæ—¶çš„å“åº”ï¼Œç§¯æä¸ç”¨æˆ·äº’åŠ¨ï¼Œè§£å†³ç”¨æˆ·é—®é¢˜å¹¶è¿›ä¸€æ­¥ä¿ƒè¿›é¡¹ç›®è¿­ä»£</li><li>ç§¯æä¸å…¶ä»–å¼€æºé¡¹ç›®å’Œç¤¾åŒºå±•å¼€åˆä½œï¼Œè®©æ›´å¤šç”Ÿæ€åˆä½œä¼™ä¼´äº†è§£å’Œå‚ä¸åˆ° DevLake ç¤¾åŒºï¼Œå…±å»ºç¹è£ç”Ÿæ€</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆåŠ å…¥-asf-å­µåŒ–å™¨">ä¸ºä»€ä¹ˆåŠ å…¥ ASF å­µåŒ–å™¨<a class="hash-link" href="#ä¸ºä»€ä¹ˆåŠ å…¥-asf-å­µåŒ–å™¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆï¼ŒDevLake ç›¸ä¿¡ The Apache way æ˜¯ç¤¾åŒºæˆåŠŸä¹‹é“ï¼Œä»¥äººä¸ºæœ¬å¼€æ”¾ã€ç¤¾åŒºé«˜äºä»£ç ç­‰ç†å¿µå°†å¸®åŠ© DevLake å¥åº·ã€æŒç»­åœ°æˆé•¿ã€‚</p><p>å…¶æ¬¡ï¼ŒDevLake å’Œæ•°æ®åŸºå»ºç›¸å…³ï¼Œä¸ Apache åŸºé‡‘ä¼šçš„å…³æ³¨ç‚¹é«˜åº¦å¥‘åˆã€‚DevLake æœŸå¾…ä¸ Apache ç”Ÿæ€çš„å…¶ä»–å¤§æ•°æ®å¼€æºé¡¹ç›®å…±åŒå‘å±•ï¼Œå…±å»ºç”Ÿæ€ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¼å¸ˆä»‹ç»">å¯¼å¸ˆä»‹ç»<a class="hash-link" href="#å¯¼å¸ˆä»‹ç»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><a href="https://github.com/WillemJiang" target="_blank" rel="noopener noreferrer">å§œå®</a>ï¼šDevLake Championï¼ŒASF Memberï¼ŒåŒæ—¶ä¹Ÿä»Šå¹´å½“é€‰çš„ Apache è‘£äº‹</li><li><a href="https://github.com/terrymanu" target="_blank" rel="noopener noreferrer">å¼ äº®</a>ï¼šSphereEx å…¬å¸åˆ›å§‹äºº &amp; CEOï¼ŒASF Memberï¼ŒApache ShardingSphere åˆ›å§‹äºº &amp; PMC Chair</li><li><a href="https://github.com/dailidong" target="_blank" rel="noopener noreferrer">ä»£ç«‹å†¬</a>ï¼šç™½é²¸å¼€æºè”åˆåˆ›å§‹äººï¼ŒASF Memberï¼ŒApache DolphinScheduler PMC Chair</li><li><a href="https://github.com/sijie" target="_blank" rel="noopener noreferrer">éƒ­æ–¯æ°</a>ï¼šASF Member, PMC Member on Apache Pulsarï¼ŒStreamNative åˆ›å§‹äºº &amp; CEO</li><li><a href="https://github.com/felixcheung" target="_blank" rel="noopener noreferrer">Felix Cheung</a>ï¼š ASF Memberï¼ŒApache Zeppelinã€Sparkã€SuperSetã€YuniKornã€Pinot ç­‰é¡¹ç›® PMCï¼ŒSafeGraph æŠ€æœ¯é«˜çº§å‰¯æ€»è£</li><li><a href="https://github.com/jbonofre" target="_blank" rel="noopener noreferrer">Jean-Baptiste OnofrÃ©</a>ï¼šASF Memberï¼ŒKaraf PMC Chairï¼ŒActiveMQã€Archivaã€Ariesã€Beamã€Brooklynã€Camelã€Carbondataã€Felix ç­‰é¡¹ç›® PMC</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¼å¸ˆå¯„è¯­">å¯¼å¸ˆå¯„è¯­<a class="hash-link" href="#å¯¼å¸ˆå¯„è¯­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li><p>å§œå®ï¼šéå¸¸é«˜å…´èƒ½å¤Ÿæˆä¸º DevLake çš„å¼€æºå­µåŒ–é¢†è·¯äººï¼Œå¸®åŠ© DevLake åŠ å…¥çš„ ASF å­µåŒ–å™¨ã€‚ DevLake ç€åŠ›äºè§£å†³è½¯ä»¶ç ”å‘é¢†åŸŸæ•°æ®æ”¶é›†ï¼Œä»¥åŠç ”å‘ç“¶é¢ˆåˆ†æçš„ç—›ç‚¹é—®é¢˜ã€‚æ¬¢è¿å¯¹æå‡è½¯ä»¶ç ”å‘æ•ˆç‡æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å‚ä¸åˆ° DevLake çš„ä½¿ç”¨å’Œå¼€å‘ä¸­æ¥ï¼Œä¸€åŒæ„å»ºç¹è£å‘å±•çš„ç¤¾åŒºç”Ÿæ€ã€‚ </p></li><li><p>å¼ äº®ï¼šæ¬¢è¿ Apache å­µåŒ–å™¨çš„æ–°æˆå‘˜ DevLakeã€‚å®ƒå°†ä½¿å·¥ç¨‹æ•ˆèƒ½é¢†åŸŸçš„å‘å±•æ›´åŠ å¼€æ”¾å’Œç¹è£ï¼Œè¿›è€Œæ¨åŠ¨æ•´ä¸ªé¢†åŸŸçš„æ ‡å‡†åŒ–è¿›ç¨‹ã€‚æ¬¢è¿æ›´å¤šçš„è´¡çŒ®è€…å‚ä¸ ASF ç¤¾åŒºï¼Œæœ› DevLake æ—©æ—¥æ¯•ä¸šï¼</p></li><li><p>ä»£ç«‹å†¬ï¼šå¾ˆé«˜å…´çœ‹åˆ° DevLake åŠ å…¥åˆ° Apache å­µåŒ–å™¨ï¼ŒDevLake æ˜¯ä¸€ä¸ªä¸“ä¸ºå¼€å‘å›¢é˜Ÿåˆ†æå’Œæé«˜å·¥ç¨‹ç”Ÿäº§åŠ›çš„å¹³å°ï¼Œæ¬¢è¿å¹¿å¤§çš„å¼€å‘ä¼™ä¼´ä»¬ä¸€èµ·å‚ä¸è®© DevLake ç¤¾åŒºæ›´åŠ ç¹è£ã€æ—©æ—¥æˆä¸ºé¡¶çº§é¡¹ç›®ï¼</p></li><li><p>éƒ­æ–¯æ°ï¼šç¥è´º DevLake è¿›å…¥ Apache è½¯ä»¶åŸºé‡‘ä¼šå­µåŒ–å™¨ï¼Œè¿™æ˜¯ DevLake èµ°å‘ä¸–ç•Œçš„ä¸€å¤§æ­¥ï¼ŒæœŸå¾…æœ‰æ›´å¤šæŠ€æœ¯çˆ±å¥½è€…å’Œç”¨æˆ·åŠ å…¥ï¼Œå…±å»ºç¹è£ã€‚ç¥ç¤¾åŒºå¿«é€Ÿæˆé•¿æˆä¸ºé¡¶çº§é¡¹ç›®ï¼Œæˆä¸ºç ”å‘æ•°æ®å¹³å°çš„ä¸­æµç ¥æŸ±ã€‚</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•å‚ä¸-devlake-ç¤¾åŒº">å¦‚ä½•å‚ä¸ DevLake ç¤¾åŒºï¼Ÿ<a class="hash-link" href="#å¦‚ä½•å‚ä¸-devlake-ç¤¾åŒº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>DevLake çš„å‘å±•ç¦»ä¸å¼€ç¤¾åŒºç”¨æˆ·çš„æ”¯æŒï¼Œæ¬¢è¿æ‰€æœ‰äººå‚ä¸ç¤¾åŒºå»ºè®¾ï¼Œè®© DevLake è¶Šæ¥è¶Šæœ‰ç”Ÿå‘½åŠ›ğŸ¥³</p><ul><li>åŠ å…¥ç¤¾ç¾¤<ul><li>åŠ å…¥ <a href="https://join.slack.com/t/devlake-io/shared_invite/zt-18uayb6ut-cHOjiYcBwERQ8VVPZ9cQQw" target="_blank" rel="noopener noreferrer">Slack</a> </li><li>ç‚¹å‡»ä¸‹æ–¹ä»£ç ä»“åº“åœ°å€ &gt; Readme &gt; æ‰«æå¾®ä¿¡ç¾¤äºŒç»´ç </li></ul></li><li>DevLake ä»£ç ä»“åº“ï¼š<a href="https://github.com/apache/incubator-devlake/" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake/</a></li><li>DevLake å®˜ç½‘ï¼š<a href="https://devlake.apache.org/" target="_blank" rel="noopener noreferrer">https://devlake.apache.org/</a></li><li>DevLake Podling Websiteï¼š<a href="https://incubator.apache.org/projects/devlake.html" target="_blank" rel="noopener noreferrer">https://incubator.apache.org/projects/devlake.html</a></li><li>å¦‚ä½•å‚ä¸è´¡çŒ®ï¼š<a href="https://github.com/apache/incubator-devlake#how-to-contribute" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-devlake#how-to-contribute</a></li><li>è®¢é˜…é‚®ä»¶åˆ—è¡¨äº†è§£åŠ¨æ€ï¼š<a href="mailto:dev@devlake.incubator.apache.org" target="_blank" rel="noopener noreferrer">dev@devlake.incubator.apache.org</a></li></ul>]]></content>
        <author>
            <name>Weisi Deng</name>
            <uri>https://github.com/Ushuaiaff</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="apache" term="apache"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Apache DevLakeæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„]]></title>
        <id>how-apache-devlake-runs</id>
        <link href="https://devlake.apache.org/zh/blog/how-apache-devlake-runs"/>
        <updated>2022-05-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Apache DevLake æ˜¯ä¸€ä¸ªDevOpsæ•°æ®æ”¶é›†å’Œæ•´åˆå·¥å…·ï¼Œé€šè¿‡ Grafana ä¸ºå¼€å‘å›¢é˜Ÿå‘ˆç°å‡ºä¸åŒé˜¶æ®µçš„æ•°æ®ï¼Œè®©å›¢é˜Ÿèƒ½å¤Ÿä»¥æ•°æ®ä¸ºé©±åŠ¨æ”¹è¿›å¼€å‘æµç¨‹ã€‚]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/apache/incubator-devlake" target="_blank" rel="noopener noreferrer">Apache DevLake</a> æ˜¯ä¸€ä¸ªDevOpsæ•°æ®æ”¶é›†å’Œæ•´åˆå·¥å…·ï¼Œé€šè¿‡ Grafana ä¸ºå¼€å‘å›¢é˜Ÿå‘ˆç°å‡ºä¸åŒé˜¶æ®µçš„æ•°æ®ï¼Œè®©å›¢é˜Ÿèƒ½å¤Ÿä»¥æ•°æ®ä¸ºé©±åŠ¨æ”¹è¿›å¼€å‘æµç¨‹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-devlake-æ¶æ„æ¦‚è¿°">Apache DevLake æ¶æ„æ¦‚è¿°<a class="hash-link" href="#apache-devlake-æ¶æ„æ¦‚è¿°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>å·¦è¾¹æ˜¯<a href="https://devlake.apache.org/docs/DataModels/DataSupport" target="_blank" rel="noopener noreferrer">å¯é›†æˆçš„DevOpsæ•°æ®æ’ä»¶</a>ï¼Œç›®å‰å·²æœ‰çš„æ’ä»¶åŒ…æ‹¬ Githubï¼ŒGitlabï¼ŒJIRAï¼ŒJenkinsï¼ŒTapdï¼ŒFeishu ä»¥åŠæ€ç é€¸ä¸»æ‰“çš„ä»£ç åˆ†æå¼•æ“</li><li>ä¸­é—´æ˜¯ä¸»ä½“æ¡†æ¶ï¼Œé€šè¿‡ä¸»ä½“æ¡†æ¶è¿è¡Œæ’ä»¶ä¸­çš„å­ä»»åŠ¡ï¼Œå®Œæˆæ•°æ®çš„æ”¶é›†ï¼Œæ‰©å±•ï¼Œå¹¶è½¬æ¢åˆ°é¢†åŸŸå±‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ config-ui æˆ–è€… api è°ƒç”¨çš„å½¢å¼æ¥è§¦å‘ä»»åŠ¡</li><li>RMDBS ç›®å‰æ”¯æŒ Mysql å’Œ PostgreSQLï¼ŒåæœŸè¿˜ä¼šç»§ç»­æ”¯æŒæ›´å¤šçš„æ•°æ®åº“</li><li>Grafana å¯ä»¥é€šè¿‡sqlè¯­å¥ç”Ÿæˆå›¢é˜Ÿéœ€è¦çš„å„ç§æ•°æ®</li></ul><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.001-9fe996eee294ce1843bc3f126a1a7b89.png" width="567" height="310" class="img_ev3q"></p><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¯¦ç»†èŠä¸€èŠç³»ç»Ÿæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‚</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç³»ç»Ÿå¯åŠ¨">ç³»ç»Ÿå¯åŠ¨<a class="hash-link" href="#ç³»ç»Ÿå¯åŠ¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨æˆ‘ä»¬çš„ golang ç¨‹åºå¯åŠ¨ä¹‹å‰ï¼Œé¦–å…ˆä¼šè‡ªåŠ¨è°ƒç”¨å„ä¸ª package çš„ init() æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹çœ‹services åŒ…çš„è½½å…¥ï¼Œä¸‹é¢çš„ä»£ç æœ‰è¯¦ç»†æ³¨é‡Šï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è·å–é…ç½®ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è·å–åˆ°æ•°æ®åº“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> runner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewGormDb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Nested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"db"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é…ç½®æ—¶åŒº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> cron</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UTC</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºå®šæ—¶ä»»åŠ¡ç®¡ç†å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cronManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cron</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// åˆå§‹åŒ–æ•°æ®è¿ç§»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">migration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨å†Œæ¡†æ¶çš„æ•°æ®è¿ç§»è„šæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">migrationscripts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RegisterAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è½½å…¥æ’ä»¶ï¼Œä»cfg.GetString("PLUGIN_DIR")è·å–åˆ°çš„æ–‡ä»¶å¤¹ä¸­è½½å…¥æ‰€æœ‰.soæ–‡ä»¶ï¼Œåœ¨LoadPluginsæ–¹æ³•ä¸­ï¼Œå…·ä½“æ¥è®²ï¼Œé€šè¿‡è°ƒç”¨runner.LoadPluginså°†pluginName:PluginMetaé”®å€¼å¯¹å­˜å…¥åˆ°core.pluginsä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> runner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LoadPlugins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"PLUGIN_DIR"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Nested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"plugin"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ‰§è¡Œæ•°æ®è¿ç§»è„šæœ¬ï¼Œå®Œæˆæ•°æ®åº“æ¡†æ¶å±‚å„ä¸ªè¡¨çš„åˆå§‹åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> migration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// call service init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">pipelineServiceInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devlakeçš„ä»»åŠ¡æ‰§è¡ŒåŸç†">DevLakeçš„ä»»åŠ¡æ‰§è¡ŒåŸç†<a class="hash-link" href="#devlakeçš„ä»»åŠ¡æ‰§è¡ŒåŸç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><strong>Pipelineçš„è¿è¡Œæµç¨‹</strong></p><p>åœ¨è®²è§£Pipelineæµç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè§£é‡Šä¸€ä¸‹<a href="https://devlake.apache.org/docs/Glossary#blueprints" target="_blank" rel="noopener noreferrer">Blueprint</a>ã€‚</p><p>Blueprintæ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼ŒåŒ…å«äº†éœ€è¦æ‰§è¡Œçš„å­ä»»åŠ¡ä»¥åŠæ‰§è¡Œè®¡åˆ’ã€‚Blueprint çš„æ¯ä¸€æ¬¡æ‰§è¡Œè®°å½•æ˜¯ä¸€æ¡Historical Runï¼ˆä¹Ÿç§°ä¸º Pipelineï¼‰ï¼Œä»£è¡¨ DevLake ä¸€æ¬¡è§¦å‘ï¼Œé€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªæ’ä»¶ï¼Œå®Œæˆäº†ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®æ”¶é›†è½¬æ¢çš„ä»»åŠ¡ã€‚</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.002-40065677c2b00df89eeaac1d9512f286.png" width="567" height="263" class="img_ev3q"></p><p>ä»¥ä¸‹æ˜¯ Pipeline è¿è¡Œæµç¨‹å›¾ï¼š</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.003-d07631a740cb5b056d15a35627afef80.png" width="344" height="515" class="img_ev3q"></p><p>ä¸€ä¸ªpipelineåŒ…å«ä¸€ä¸ªäºŒç»´æ•°ç»„tasksï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ä¸€ç³»åˆ—ä»»åŠ¡æŒ‰é¢„è®¾é¡ºåºæ‰§è¡Œã€‚å¦‚æœä¸‹å›¾ä¸­çš„ Stage3 çš„æ’ä»¶éœ€è¦ä¾èµ–å…¶ä»–æ’ä»¶å‡†å¤‡æ•°æ®ï¼ˆä¾‹å¦‚ refdiff çš„è¿è¡Œéœ€è¦ä¾èµ– gitextractor å’Œ githubï¼Œæ•°æ®æºä¸æ’ä»¶çš„æ›´å¤šä¿¡æ¯è¯·çœ‹<a href="https://devlake.apache.org/docs/DataModels/DataSupport" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a>ï¼‰ï¼Œé‚£ä¹ˆ Stage 3 å¼€å§‹æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä¿è¯å…¶ä¾èµ–é¡¹å·²åœ¨ Stage1 å’Œ Stage2 æ‰§è¡Œå®Œæˆï¼š</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.004-a6a550c4f00b232abc7b28e30738be09.png" width="567" height="238" class="img_ev3q"></p><p><strong>Taskçš„è¿è¡Œæµç¨‹</strong></p><p>åœ¨stage1ï¼Œstage2ï¼Œstage3ä¸­çš„å„æ’ä»¶ä»»åŠ¡éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œï¼š</p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.005-4d14031484d1272b4be8d7ff2f08d2a2.png" width="304" height="501" class="img_ev3q"></p><p><strong>æ¥ä¸‹æ¥å°±æ˜¯é¡ºåºæ‰§è¡Œæ’ä»¶ä¸­çš„å­ä»»åŠ¡</strong></p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.006-83ed245c2c8d805aca908814f0f0f5f9.png" width="331" height="617" class="img_ev3q"></p><ol><li>RunTask ä¹‹å‰çš„å·¥ä½œéƒ½æ˜¯åœ¨å‡†å¤‡ RunTask æ–¹æ³•éœ€è¦çš„å‚æ•°ï¼Œæ¯”å¦‚ loggerï¼Œdbï¼Œcontext ç­‰ç­‰ã€‚</li><li>RunTask æ–¹æ³•ä¸­ä¸»è¦æ˜¯å¯¹æ•°æ®åº“ä¸­çš„tasksè¿›è¡ŒçŠ¶æ€æ›´æ–°ï¼ŒåŒæ—¶ï¼Œå‡†å¤‡è¿è¡Œæ’ä»¶ä»»åŠ¡çš„ optionsï¼ˆæŠŠä» config-ui ä¼ è¿‡æ¥çš„ json è½¬æˆ map ä¼ åˆ° RunPluginTask ä¸­ï¼‰</li><li>RunPluginTask é¦–å…ˆé€šè¿‡ core.GetPlugin(pluginName) è·å–åˆ°å¯¹åº” <a href="#pm">PluginMeta</a>ï¼Œç„¶åé€šè¿‡ PluginMeta è·å–åˆ° <a href="#pt">PluginTask</a>ï¼Œå†æ‰§è¡Œ RunPluginSubTasks</li></ol><p><strong>æ¯ä¸€ä¸ªæ’ä»¶å­ä»»åŠ¡çš„è¿è¡Œæµç¨‹ï¼ˆæ¶‰åŠåˆ°çš„ interface åŠ func ä¼šåœ¨<a href="#DevLake%E4%B8%AD%E7%9A%84%E9%87%8D%E8%A6%81%E6%8E%A5%E5%8F%A3">ä¸‹ä¸€èŠ‚</a>è¯¦ç»†é˜è¿°ï¼‰</strong></p><p><img loading="lazy" alt="Generated" src="/zh/assets/images/Aspose.Words.093a76ac-457b-4498-a472-7dbea580bca9.007-09a5f7c401dfb5a557b10c3870d103fe.png" width="567" height="214" class="img_ev3q"></p><ol><li>é€šè¿‡è°ƒç”¨SubTaskMetas()è·å–åˆ°æ‰€æœ‰æ’ä»¶æ‰€æœ‰çš„å¯ç”¨å­ä»»åŠ¡<a href="#stm">subtaskMeta</a></li><li>é€šè¿‡<code>options["tasks"]</code>ä»¥åŠsubtaskMetaç»„å»ºéœ€è¦æ‰§è¡Œçš„å­ä»»åŠ¡é›†åˆsubtaskMetas</li><li>è®¡ç®—æ€»å…±å¤šå°‘ä¸ªå­ä»»åŠ¡</li><li>é€šè¿‡<code>helper.NewDefaultTaskContext</code>æ„å»º<a href="#tc">taskCtx</a></li><li>è°ƒç”¨<code>pluginTask.PrepareTaskData</code>æ„å»º<a href="#td">taskData</a>ï¼Œ</li><li>æ¥ä¸‹æ¥è¿­ä»£subtaskMetasé‡Œé¢çš„æ‰€æœ‰å­ä»»åŠ¡<ol><li>é€šè¿‡<code>taskCtx.SubTaskContext(subtaskMeta.Name)</code>è·å–åˆ°å­ä»»åŠ¡çš„<a href="#sc">subtaskCtx</a></li><li>æ‰§è¡Œ<a href="#step"><code>subtaskMeta.EntryPoint(subtaskCtx)</code></a></li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devlakeä¸­çš„é‡è¦æ¥å£">DevLakeä¸­çš„é‡è¦æ¥å£<a class="hash-link" href="#devlakeä¸­çš„é‡è¦æ¥å£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li><a id="pm">PluginMeta</a>: åŒ…å«äº†æ’ä»¶æœ€åŸºæœ¬çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰æ’ä»¶éƒ½éœ€è¦å®ç°ï¼Œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™å­˜åœ¨core.pluginsä¸­ï¼Œåœ¨æ‰§è¡Œæ’ä»¶ä»»åŠ¡çš„æ—¶å€™é€šè¿‡core.GetPluginè·å–</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> PluginMeta </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">Description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//PkgPath information will be lost when compiled as plugin(.so), this func will return that info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">RootPkgPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><a id="pt">PluginTask</a>: é€šè¿‡PluginMetaè·å–ï¼Œæ’ä»¶å®ç°è¿™ä¸ªæ–¹æ³•ä¹‹åï¼ŒFrameworkå°±èƒ½ç›´æ¥è¿è¡Œå­ä»»åŠ¡ï¼Œè€Œä¸æ˜¯æ‰”ç»™æ’ä»¶è‡ªå·±å»æ‰§è¡Œï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯æ’ä»¶çš„å­ä»»åŠ¡å®ç°æ›´åŠ ç®€å•ï¼Œåœ¨æ’ä»¶è¿è¡Œå½“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´å®¹æ˜“çš„å»å¹²æ¶‰ï¼ˆæ¯”å¦‚å¢åŠ æ—¥å¿—ç­‰ç­‰ï¼‰</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> PluginTask </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// return all available subtasks, framework will run them for you in order</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">SubTaskMetas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">SubTaskMeta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// based on task context and user input options, return data that shared among all subtasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">PrepareTaskData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskCtx TaskContext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>æ¯ä¸ªæ’ä»¶è¿˜æœ‰ä¸€ä¸ª<a id="td">taskData</a>ï¼Œé‡Œé¢åŒ…å«äº†é…ç½®é€‰é¡¹ï¼ŒapiClientä»¥åŠä¸€äº›æ’ä»¶å…¶å®ƒå±æ€§ï¼ˆæ¯”å¦‚githubæœ‰Repoä¿¡æ¯ï¼‰</li><li><a id="stm">SubTaskMeta</a>: ä¸€ä¸ªå­ä»»åŠ¡çš„å…ƒæ•°æ®ï¼Œæ¯ä¸ªå­ä»»åŠ¡éƒ½ä¼šå®šä¹‰ä¸€ä¸ªSubTaskMeta</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> CollectMeetingTopUserItemMeta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SubTaskMeta</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"collectMeetingTopUserItem"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   EntryPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CollectMeetingTopUserItem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   EnabledByDefault</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Collect top user meeting data from Feishu api"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li><a id="ec">ExecContext</a>: å®šä¹‰äº†æ‰§è¡Œ(å­)ä»»åŠ¡éœ€è¦çš„æ‰€æœ‰èµ„æº</li><li><a id="stc">SubTaskContext</a>: å®šä¹‰äº†æ‰§è¡Œå­ä»»åŠ¡æ‰€éœ€è¦çš„èµ„æºï¼ˆåŒ…å«äº†ExecContextï¼‰</li><li><a id="tc">TaskContext</a>: å®šä¹‰äº†æ‰§è¡Œæ’ä»¶ä»»åŠ¡æ‰€éœ€è¦çš„èµ„æºï¼ˆåŒ…å«äº†ExecContextï¼‰ã€‚ä¸SubTaskContextçš„åŒºåˆ«åœ¨äºSubTaskContextä¸­çš„TaskContext()æ–¹æ³•å¯ä»¥è¿”å›TaskContextï¼Œè€ŒTaskContextä¸­çš„æ–¹æ³•SubTaskContext(subtask string)æ–¹æ³•å¯ä»¥è¿”å›SubTaskContextï¼Œå­ä»»åŠ¡éš¶å±äºæ’ä»¶ä»»åŠ¡ï¼Œæ‰€ä»¥æŠŠè¿™ä¸¤ä¸ªContextè¿›è¡Œäº†åŒºåˆ†</li><li><a id="step">SubTaskEntryPoint</a>: æ‰€æœ‰çš„æ’ä»¶å­ä»»åŠ¡éƒ½éœ€è¦å®ç°è¿™ä¸ªå‡½æ•°ï¼Œè¿™æ ·æ‰èƒ½ç”±æ¡†æ¶å±‚ç»Ÿä¸€åè°ƒå®‰æ’</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åç»­">åç»­<a class="hash-link" href="#åç»­" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¿™ç¯‡æ–‡ç« ä»‹ç»äº† DevLake çš„æ¶æ„ä»¥åŠè¿è¡Œæµç¨‹ï¼Œè¿˜æœ‰ä¸‰ä¸ªæ ¸å¿ƒ api<!-- -->_<!-- -->collectorã€api<!-- -->_<!-- -->extractor å’Œ data<!-- -->_<!-- -->convertor å°†ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è¿›è¡Œå‰–æã€‚</p>]]></content>
        <author>
            <name>é™ˆæ˜ åˆ</name>
            <uri>https://github.com/warren830</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="apache" term="apache"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨antså¼•å‘çš„æ­»é”]]></title>
        <id>deadlock-caused-by-using-ants</id>
        <link href="https://devlake.apache.org/zh/blog/deadlock-caused-by-using-ants"/>
        <updated>2022-04-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[1. èƒŒæ™¯]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-èƒŒæ™¯">1. èƒŒæ™¯<a class="hash-link" href="#1-èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘ä»¬çš„é¡¹ç›®æœ‰å¤§é‡çš„apiè¯·æ±‚ç”±goroutineå®Œæˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªpoolæ¥èŠ‚çœé¢‘ç¹åˆ›å»ºgoroutineæ‰€é€ æˆçš„çš„å¼€é”€ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ›´ç®€æ˜“çš„è°ƒåº¦goroutineï¼Œåœ¨å¯¹githubä¸Šå¤šä¸ªåç¨‹æ± çš„å¯¹æ¯”åï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰å®šäº†<a href="https://github.com/panjf2000/ants" target="_blank" rel="noopener noreferrer">ants</a>ä½œä¸ºæˆ‘ä»¬çš„è°ƒåº¦ç®¡ç†poolã€‚</p><ol><li>æœ€è¿‘åœ¨æµ‹è¯•ä¸­å¶ç„¶å‘ç°ç³»ç»Ÿå‡ºç°äº†â€œæ­»é”â€çš„æƒ…å†µï¼Œè¿›è€Œé‡‡å–æ–­ç½‘çš„æ–¹å¼å‘ç°â€œæ­»é”â€åœ¨æç«¯æƒ…å†µä¸‹æ˜¯ç¨³å®šå‡ºç°ï¼Œç»è¿‡æ»¡ç¯‡çš„logï¼Œbreakï¼Œæœ€ç»ˆæŠŠé—®é¢˜å®šä½åˆ°äº†antsçš„submitæ–¹æ³•ã€‚è¿™ä¸ªé—®é¢˜æ¥è‡ªäºåœ¨ä½¿ç”¨ants poolçš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å®ç°é‡è¯•ï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•ä¸­åˆé€’å½’è°ƒç”¨äº†æ–¹æ³•æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯submit taskå†…éƒ¨åˆsubmitä¸€ä¸ªtaskï¼Œä¸‹é¢æ˜¯ç®€åŒ–åçš„ä»£ç ï¼š</li></ol><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">func (apiClient *ApiAsyncClient) DoAsync(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retry int,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   return apiClient.scheduler.Submit(func() error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _, err := apiClient.Do()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         if retry &lt; apiClient.maxRetry {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return apiClient.DoAsync(retry+1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç å—ä¸­ï¼Œå¯ä»¥çœ‹åˆ°return apiClient.DoAsync(retry+1)è¿™ä¸€æ­¥é€’å½’è°ƒç”¨äº†è‡ªå·±ï¼Œå³åœ¨submitä¸­åˆè°ƒç”¨äº†submit</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-æ·±å…¥antsåˆ†æ">2. æ·±å…¥antsåˆ†æ<a class="hash-link" href="#2-æ·±å…¥antsåˆ†æ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="img" src="/zh/assets/images/ants_source_code_1-dbc90cd562952b6434590b8ae7121255.png" width="333" height="231" class="img_ev3q"></p><ul><li>åœ¨ä¸Šé¢submitæºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆæ˜¯é€šè¿‡retrieveWorkerå›å»ä¸€ä¸ªworkerï¼Œç„¶åæŠŠtaskæ”¾å…¥åˆ°workerçš„task channelå½“ä¸­ï¼Œå¾ˆç®€å•ï¼Œä¹Ÿçœ‹ä¸å‡ºæ¥ä¸ºä»€ä¹ˆä¼šâ€œdead lockâ€ï¼Œæ²¡åŠæ³•ï¼Œå»åˆ°retrieveWorker</li></ul><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// retrieveWorker returns a available worker to run the tasks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (p *Pool) retrieveWorker() (w *goWorker) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> spawnWorker := func() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  w = p.workerCache.Get().(*goWorker)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  w.run()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p.lock.Lock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> w = p.workers.detach()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if w != nil { // first try to fetch the worker from the queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> } else if capacity := p.Cap(); capacity == -1 || capacity &gt; p.Running() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // if the worker queue is empty and we don't run out of the pool capacity,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // then just spawn a new worker goroutine.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  spawnWorker()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> } else { // otherwise, we'll have to keep them blocked and wait for at least one worker to be put back into pool.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if p.options.Nonblocking {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> retry:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if p.options.MaxBlockingTasks != 0 &amp;&amp; p.blockingNum &gt;= p.options.MaxBlockingTasks {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.blockingNum++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.cond.Wait() // block and wait for an available worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.blockingNum--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var nw int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if nw = p.Running(); nw == 0 { // awakened by the scavenger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if !p.IsClosed() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spawnWorker()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if w = p.workers.detach(); w == nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if nw &lt; capacity {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spawnWorker()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   goto retry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p.lock.Unlock()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="img" src="/zh/assets/images/ants_source_code_flowchart-6f51973ac906b9029502a2c9063df6ad.png" width="1280" height="481" class="img_ev3q"></p><ul><li>è¿™ä¸ªæ–¹æ³•çš„å¤§æ¦‚æµç¨‹å°±æ˜¯å…ˆå¯¹poolä¸Šé”ï¼Œç„¶åä»poolçš„workeré˜Ÿåˆ—ä¸­å»å–ä¸€ä¸ªworkerï¼Œdetachå…¶å®å°±æ˜¯è¿”å›äº†workerï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªworkerä»é˜Ÿåˆ—ä¸­åˆ é™¤æ‰äº†ï¼Œæ¥ä¸‹æ¥æœ‰ä¸‰ç§æƒ…å†µ<ul><li>å¦‚æœæˆåŠŸå–åˆ°workerï¼Œè§£é”pï¼Œè¿”å›å–åˆ°çš„worker</li><li>å¦‚æœworkeré˜Ÿåˆ—æ˜¯ç©ºçš„å¹¶ä¸”poolçš„å®¹é‡æ²¡æœ‰è€—å°½ï¼Œå°±è§£é”poolå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„workerè¿”å›ç»™submit</li><li>æœ€åä¸€ç§æƒ…å†µå°±æ˜¯poolå®¹é‡è€—å°½äº†ï¼Œworkeré˜Ÿåˆ—ä¹Ÿæ²¡æœ‰ç©ºé—²çš„workerï¼Œé‚£å°±è¦æ ¹æ®æˆ‘ä»¬åˆ›å»ºpoolæ—¶ä¼ å…¥çš„å‚æ•°æ¥å†³å®šä¸‹ä¸€æ­¥æƒ…å†µäº†<ul><li>é¦–å…ˆè¯´ä¸€ä¸‹è¿™é‡Œæ¶‰åŠçš„ä¸¤ä¸ªé‡è¦å‚æ•°ï¼Œä¸€ä¸ªæ˜¯capacityï¼Œè¿™ä¸ªå€¼å¦‚æœåœ¨new poolçš„æ—¶å€™ä¸è®¾ç½®ï¼Œä¼šæ˜¯MaxInt32ï¼Œç›¸å½“äºæ— é™åˆ¶çš„goroutineï¼Œä½†æ˜¯æƒ…å†µä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬ä¼šé¦–å…ˆå¤ç”¨ç©ºé—²çš„workerï¼Œè¿˜å¯ä»¥å®šæ—¶æ¸…ç©ºå¤šä½™çš„ç©ºé—²workerï¼ŒblockingNumä¸ºæ­£åœ¨ç­‰å¾…çš„goroutineï¼Œåˆå§‹ä¸º0</li><li>å¦‚æœè®¾ç½®äº†Nonblockingä¸ºtrueï¼Œç›´æ¥è§£é”ï¼Œè¿”å›nilï¼Œsubmitå°±ä¼šç›´æ¥è¿”å›ä¸€ä¸ªé”™è¯¯ErrPoolOverloadï¼Œä»£è¡¨poolè¶…è´Ÿè·äº†ï¼Œä¸åšä»»ä½•å…¶ä»–å¤„ç†ï¼Œsubmitå¤±è´¥ï¼Œç»“æŸ~~</li><li>å¦ä¸€ç§æƒ…å†µå°±æ˜¯æ²¡æœ‰è®¾ç½®Nonblockingï¼Œé»˜è®¤ä¸ºfalseï¼Œå°±è¿›å…¥åˆ°äº†ä¸€ä¸ªretryæ ‡ç­¾ï¼Œè¿™é‡Œé¢å°±æ¶‰åŠåˆ°äº†å¦ä¸€ä¸ªåˆ›å»ºpoolæ—¶å€™çš„å‚æ•°MaxBlockingTasksï¼Œè¿™ä¸ªMaxBlockingTaskså°±æ˜¯ä¸€ä¸ªthreshold<ul><li>é¦–å…ˆåˆ¤æ–­å¦‚æœè®¾ç½®äº†MaxBlockingTaskså¹¶ä¸”å½“å‰blockingNumå¤§äºæˆ–è€…ç­‰äºMaxBlockingTasksï¼Œé‚£ä¹ˆç›´æ¥è§£é”poolå¹¶ä¸”è¿”å›nilï¼Œsubmitå¤±è´¥ï¼Œç»“æŸ~~</li><li>ä¸Šé¢çš„æ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™é¦–å…ˆblockingNum++ï¼Œç„¶åå¼€å§‹waitä¸€ç›´åˆ°æœ‰workeræ‘¸å®Œé±¼å›æ¥å·¥ä½œï¼Œåˆ™blockingNum--ã€‚é—®é¢˜å°±åœ¨è¿™é‡Œäº†ï¼ï¼ï¼å¦‚æœæ‰€æœ‰çš„workeréƒ½åœ¨å·¥ä½œï¼ˆä¹Ÿè®¸æ˜¯çœ‹èµ·æ¥åœ¨å·¥ä½œï¼Œå®é™…ä¸Šåœ¨æ‘¸é±¼ï¼‰ï¼Œè¿™é‡Œå°±ä¼šä¸€ç›´wait()ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±ä»£ç ä¸­returnåé¢çš„DoAsyncä¼šä¸€ç›´wait()ï¼Œä»æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®æ¥è®²ï¼Œå°±æ˜¯æ‰€æœ‰workerè¿™ä¸ªæ—¶å€™éƒ½åœ¨submitä¸€ä¸ªæ–°çš„taskåˆ°åŒä¸€ä¸ªpoolä¸­ï¼Œè€Œè¿™ä¸ªæ—¶å€™poolå·²ç»æ»¡äº†ï¼Œå¯¼è‡´æ‰€æœ‰workeréƒ½é˜»å¡åœ¨äº†è¿™é‡Œï¼Œâ€œæ­»é”â€ä¹Ÿå°±å‡ºç°äº†</li></ul></li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-æœ€åèŠå‡ å¥è‡ªå·±å¯¹äºgolangå†…å­˜æ¨¡å‹çš„ç†è§£">3. æœ€åèŠå‡ å¥è‡ªå·±å¯¹äºgolangå†…å­˜æ¨¡å‹çš„ç†è§£<a class="hash-link" href="#3-æœ€åèŠå‡ å¥è‡ªå·±å¯¹äºgolangå†…å­˜æ¨¡å‹çš„ç†è§£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>goçš„è°ƒåº¦æµç¨‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”Ÿäº§-æ¶ˆè´¹çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åˆ©ç”¨go funcæ˜¯ç”Ÿäº§äº†ä¸€ä¸ªtaskæ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œç”±ç³»ç»Ÿçº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è·å–åç¨‹ç„¶åæ‰§è¡Œ</li><li>è®²åˆ°goçš„è°ƒåº¦æµç¨‹ï¼Œå’±ä»¬å°±ä¸èƒ½ä¸è¯´ä¸€ä¸‹goçš„MPGï¼ˆåˆ†åˆ«è§£é‡Šä¸€ä¸‹ï¼Œå°±ä¸åšæ·±å…¥äº†ï¼Œå¦‚æœæœ‰äººçœ‹ï¼ŒåæœŸå†åŠªåŠ›æ•´ç†ä¸€ä»½è¯¦ç»†èŠèŠï¼‰<ol><li>M ä»£è¡¨ç€ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œæ‰€æœ‰çš„goroutineéƒ½æ˜¯è·‘åœ¨Mä¹‹ä¸Šçš„</li><li>På¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œä¸»è¦ç”±Pæ¥æ‰§è¡Œgoroutine</li><li>Gå°±æ˜¯go funcå°è£…çš„è¿™ä¸ªæ–¹æ³•</li></ol></li><li>çœŸæ­£çš„å¹¶å‘æ•°æ˜¯ç”±GOMAXPROCSæ¥å†³å®šçš„ï¼Œå¹¶ä¸æ˜¯æäº¤å¤šå°‘goroutineï¼Œå¹¶å‘æ•°å°±æ˜¯å¤šå°‘ï¼ŒGOMAXPROCSæ˜¯ç”±æœºå™¨çš„cpuæ ¸æ•°æ¥å†³å®šçš„</li><li>æ‰€ä»¥å›åˆ°ç¬¬2éƒ¨åˆ†ï¼Œpool.cond.waitç­‰å¾…çš„æ˜¯ç»‘å®šä¸Šä¸€ä¸ªgoroutineï¼Œå’Œå…¶ä»–è¯­è¨€çš„ç­‰å¾…çº¿ç¨‹å…·æœ‰ç›¸ä¼¼å´å®Œå…¨ä¸åŒçš„æ„ä¹‰ï¼Œæ¯ä¸€ä¸ªworkeræ˜¯ä¸€ä¸ªGï¼Œpoolä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè€ŒMä¼šä»é˜Ÿåˆ—ä¸­è·å–å¯ä»¥æ‰§è¡Œçš„Gï¼Œå½“æ‰€æœ‰çš„Géƒ½åœ¨ç­‰å¾…åˆ›å»ºæ–°çš„Gæ—¶ï¼ŒMå…¨éƒ¨éƒ½å¤„äºç©ºé—²çŠ¶æ€</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-è§£å†³æ–¹æ¡ˆ">4. è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#4-è§£å†³æ–¹æ¡ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>å½“ç„¶ï¼Œæœ€é è°±çš„åº”è¯¥æ˜¯å°½é‡é¿å…ç±»ä¼¼è¿™æ ·çš„é€’å½’è°ƒç”¨æ“ä½œ</li><li>å¦‚æœå®åœ¨ä¸è¡Œï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ ä¸€ä¸ªsub poolï¼Œä½œä¸ºæ¬¡çº§é˜Ÿåˆ—ï¼Œè®©é€’å½’ç”Ÿæˆçš„Gå¯ä»¥åœ¨sub poolé‡Œç­‰å¾…ç©ºé—²çš„Mæ¥å¤„ç†</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-å¯¹æ¯”ä¸åŒsizeçš„poolå’Œä¸¤ä¸ªpoolçš„å†…å­˜alloc_spaceå’Œcpuå¼€é”€">5. å¯¹æ¯”ä¸åŒsizeçš„poolå’Œä¸¤ä¸ªpoolçš„å†…å­˜ï¼ˆalloc_spaceï¼‰å’ŒCPUå¼€é”€<a class="hash-link" href="#5-å¯¹æ¯”ä¸åŒsizeçš„poolå’Œä¸¤ä¸ªpoolçš„å†…å­˜alloc_spaceå’Œcpuå¼€é”€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><table><thead><tr><th>Pool size</th><th>CPU(ants)%</th><th>CPU(runtime.gcBgMarkWorker)%</th><th>CPU(runtime.mcall)%</th><th>å†…å­˜(runtime.allocm)kB</th><th>å†…å­˜(runtime.gcBgMarkWorker)kB</th><th>å†…å­˜(root)</th></tr></thead><tbody><tr><td>Two pools(158, 632)</td><td>27.98</td><td>7.73</td><td>25.44</td><td>2050.25</td><td>512.02</td><td>8798</td></tr><tr><td>Pool 158</td><td>28.11</td><td>6.61</td><td>25.08</td><td>2050</td><td></td><td>6661</td></tr><tr><td>Pool 1580</td><td>27.41</td><td>12.96</td><td>23.17</td><td>3075.38</td><td></td><td>10264</td></tr><tr><td>Pool 7900</td><td>25.89</td><td>9.82</td><td>22.52</td><td>3587.94</td><td></td><td>5725</td></tr><tr><td>Pool 790000</td><td>25.12</td><td>12.79</td><td>23.44</td><td>3075.38</td><td></td><td>9748</td></tr></tbody></table><p>runtime.gcBgMarkWorker: ç”¨äºæ ‡è®°åƒåœ¾å¯¹è±¡</p><p>ä»ä¸Šé¢çš„è¡¨æ ¼å¯ä»¥çœ‹åˆ°ï¼Œå¯èƒ½å­˜åœ¨å¤šæ ¸çš„å½±å“ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä»¬å…¬å¸ç°åœ¨éœ€è¦çš„å¹¶å‘æ•°é‡çº§æ¥è®²ï¼Œpoolçš„sizeå¯¹ç³»ç»Ÿå½±å“å¹¶ä¸å¤§ã€‚</p>]]></content>
        <author>
            <name>é™ˆæ˜ åˆ</name>
            <uri>https://github.com/warren830</uri>
        </author>
        <category label="devlake" term="devlake"/>
        <category label="ants" term="ants"/>
    </entry>
</feed>